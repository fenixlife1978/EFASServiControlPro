(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[290],{3998:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var s=r(95155),a=r(12115),n=r(17129),i=r(83101),l=r(64269);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:o=!1,...c}=e,u=o?n.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(d({variant:a,size:i,className:r})),ref:t,...c})});o.displayName="Button"},7545:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]])},18332:(e,t,r)=>{"use strict";r.d(t,{Fc:()=>d,TN:()=>c,XL:()=>o});var s=r(95155),a=r(12115),n=r(83101),i=r(64269);let l=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,...n}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(l({variant:a}),r),...n})});d.displayName="Alert";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})});o.displayName="AlertTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...a})});c.displayName="AlertDescription"},20063:(e,t,r)=>{"use strict";var s=r(47260);r.o(s,"redirect")&&r.d(t,{redirect:function(){return s.redirect}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},44297:(e,t,r)=>{"use strict";r.d(t,{C:()=>g,w:()=>h});var s=r(95155),a=r(12115),n=r(20063),i=r(63862),l=r(19708),d=r(92033),o=r(7545),c=r(18332),u=r(52619),x=r.n(u),m=r(3998);let f=(0,a.createContext)(void 0),g=e=>{let{children:t}=e,[r,u]=(0,a.useState)(null),[g,h]=(0,a.useState)(null),[p,b]=(0,a.useState)(!0),[v,j]=(0,a.useState)(null),y=(0,n.useSearchParams)(),{user:N,loading:w}=(0,i.Jd)();return((0,a.useEffect)(()=>{(async()=>{if(w||!i.db)return;if(b(!0),j(null),!N)return b(!1);let e=y.get("institutionId"),t=localStorage.getItem("selectedInstitutionId"),r="vallecondo@gmail.com"===N.email;try{let s=e||t;if(!r&&!s){let e=await (0,l.x7)((0,l.H9)(i.db,"users",N.uid));if(e.exists()&&e.data().institutionId)s=e.data().institutionId;else{j("Tu cuenta no est\xe1 asociada a ninguna instituci\xf3n."),b(!1);return}}if(!s){j(r?"Por favor, selecciona una instituci\xf3n desde el Panel Maestro.":"No se pudo determinar la instituci\xf3n."),b(!1);return}let a=(0,l.H9)(i.db,"institutions",s),n=await (0,l.x7)(a),d=null;if(n.exists())d=n.data();else{let e=(0,l.P)((0,l.rJ)(i.db,"institutions"),(0,l._M)("InstitutoId","==",s)),t=await (0,l.GG)(e);t.empty||(d=t.docs[0].data())}d?"published"===d.status||r?(u(s),h(d)):j("Esta instituci\xf3n no se encuentra publicada actualmente."):j('Error: La instituci\xf3n "'.concat(s,'" no existe en EFAS Cloud.'))}catch(e){console.error("Error en InstitutionProvider:",e),j("Error de conexi\xf3n con la base de datos.")}finally{b(!1)}})()},[y,N,w]),p||w)?(0,s.jsxs)("div",{className:"flex h-screen w-full flex-col items-center justify-center bg-slate-950 text-white",children:[(0,s.jsx)(d.A,{className:"h-10 w-10 animate-spin text-orange-600"}),(0,s.jsx)("p",{className:"mt-4 text-slate-400 font-bold tracking-widest uppercase italic",children:"EFAS ServiControlPro"})]}):v?(0,s.jsx)("div",{className:"flex h-screen w-full items-center justify-center bg-[#0a0c10] p-6",children:(0,s.jsxs)(c.Fc,{variant:"destructive",className:"max-w-md bg-slate-900 border-red-900/50 rounded-2xl p-8",children:[(0,s.jsx)(o.A,{className:"h-5 w-5 text-red-500 mb-2"}),(0,s.jsx)(c.XL,{className:"text-red-500 font-black uppercase tracking-tighter text-xl italic",children:"Acceso Denegado"}),(0,s.jsxs)(c.TN,{className:"text-slate-300 font-medium",children:[(0,s.jsx)("p",{className:"mt-2",children:v}),(null==N?void 0:N.email)==="vallecondo@gmail.com"&&(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)(m.$,{asChild:!0,className:"bg-orange-600 hover:bg-orange-700 w-full font-black italic uppercase py-6 rounded-xl shadow-lg shadow-orange-900/20",children:(0,s.jsx)(x(),{href:"/super-admin/dashboard",children:"Ir al Panel Maestro"})})})]})]})}):(0,s.jsx)(f.Provider,{value:{institutionId:r,institutionData:g,setInstitutionId:e=>{e?localStorage.setItem("selectedInstitutionId",e):localStorage.removeItem("selectedInstitutionId"),u(e)}},children:t})},h=()=>{let e=(0,a.useContext)(f);if(void 0===e)throw Error("useInstitution debe usarse dentro de un InstitutionProvider");return e}},45300:(e,t,r)=>{"use strict";r.d(t,{db:()=>o,j2:()=>d});var s=r(52078),a=r(59253),n=r(19708),i=r(58134);r(13328),r(34491);let l=(0,s.Dk)().length>0?(0,s.Sx)():(0,s.Wp)({apiKey:"AIzaSyACK79dDRclgjFMEUokqpskC1ezyvmO11k",authDomain:"studio-7637044995-2342d.firebaseapp.com",projectId:"studio-7637044995-2342d",storageBucket:"studio-7637044995-2342d.firebasestorage.app",messagingSenderId:"7637044995",appId:"1:7637044995:web:2c6b412952864386927958"}),d=(0,a.xI)(l),o=(0,n.aU)(l);(0,i.c7)(l)},53377:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(95155),a=r(12115),n=r(52619),i=r.n(n),l=r(19708),d=r(45300),o=r(44297);function c(){let{institutionId:e}=(0,o.w)(),[t,r]=(0,a.useState)([]),[n,c]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{if(!e)return;let t=(0,l.P)((0,l.rJ)(d.db,"classrooms"),(0,l._M)("InstitutoId","==",e)),s=(0,l.aQ)(t,e=>{r(e.docs.map(e=>({id:e.id,...e.data()}))),c(!1)});return()=>s()},[e]),(0,s.jsxs)("div",{className:"p-6 md:p-10 bg-slate-50 min-h-screen",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-10 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-4xl font-black italic uppercase text-slate-900 tracking-tighter",children:["Control de ",(0,s.jsx)("span",{className:"text-orange-500",children:"Aulas"})]}),(0,s.jsxs)("p",{className:"text-slate-500 font-medium uppercase text-xs tracking-widest mt-1",children:["EFAS ServControlPro • ID: ",e||"---"]})]}),(0,s.jsx)("button",{className:"bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-8 rounded-2xl transition-all shadow-lg shadow-orange-200 uppercase text-sm italic",children:"+ Nueva Aula"})]}),n?(0,s.jsx)("div",{className:"flex justify-center py-20",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-orange-500"})}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,s.jsx)("div",{className:"bg-white border-2 border-slate-100 p-1 rounded-[2.5rem] shadow-xl hover:border-orange-200 transition-all group",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsx)("div",{className:"bg-slate-100 w-14 h-14 rounded-3xl flex items-center justify-center group-hover:bg-orange-100 transition-colors",children:(0,s.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFEB"})}),(0,s.jsx)("span",{className:"px-4 py-1 rounded-full text-[10px] font-black uppercase italic ".concat("activa"===e.estado?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.estado||"Activa"})]}),(0,s.jsx)("h3",{className:"text-xl font-black text-slate-800 uppercase italic leading-none mb-1",children:e.nombre}),(0,s.jsxs)("p",{className:"text-slate-400 font-bold text-sm mb-6",children:["Secci\xf3n: ",e.seccion||"N/A"]}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-[10px] text-slate-400 uppercase font-black",children:"Capacidad"}),(0,s.jsxs)("p",{className:"text-lg font-black text-slate-700",children:[e.capacidad||0," ",(0,s.jsx)("span",{className:"text-xs text-slate-400",children:"Puestos"})]})]}),(0,s.jsx)(i(),{href:"/dashboard/classrooms/".concat(e.id),className:"bg-slate-900 hover:bg-orange-500 text-white w-12 h-12 rounded-2xl flex items-center justify-center transition-all shadow-md",children:"→"})]})]})},e.id))}),0===t.length&&!n&&(0,s.jsx)("div",{className:"text-center py-20 bg-white rounded-[3rem] border-2 border-dashed border-slate-200",children:(0,s.jsx)("p",{className:"text-slate-400 font-bold italic uppercase",children:"No hay aulas registradas para este instituto"})})]})}function u(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"p-10 font-black italic text-slate-400",children:"CARGANDO SISTEMA..."}),children:(0,s.jsx)(o.C,{children:(0,s.jsx)(c,{})})})}},63862:(e,t,r)=>{"use strict";r.d(t,{As:()=>c,BH:()=>f,Ge:()=>m,Jd:()=>o,db:()=>s.db,jt:()=>u,pt:()=>g,ri:()=>d,uN:()=>x,zb:()=>h});var s=r(45300),a=r(13328),n=r(34491),i=r(19708),l=r(59253);let d=async()=>{try{await (0,l.CI)(s.j2),localStorage.removeItem("selectedInstitutionId"),window.location.href="/login"}catch(e){console.error("Error al cerrar sesi\xf3n:",e)}},o=()=>{let[e,t,r]=(0,a.hD)(s.j2);return{user:e,loading:t,error:r}},c=()=>{let[e,t,r]=(0,a.hD)(s.j2);return{user:e,loading:t,error:r,auth:s.j2}},u=()=>s.db,x=n.ZY,m=e=>{if("string"==typeof e&&(!e||e.includes("undefined")||e.includes("null")))return{value:[],loading:!1,error:Error("Ruta de colecci\xf3n inv\xe1lida")};let t="string"==typeof e?(0,i.rJ)(s.db,e):e,[r,a,l]=(0,n.Ar)(t,{idField:"id"});return{value:r||[],loading:a,error:l}},f=async(e,t)=>{try{if(!e||"string"!=typeof e||e.includes("undefined")||e.includes("null"))return console.error("Path inv\xe1lido detectado:",e),{success:!1,error:"Ruta de base de datos no v\xe1lida"};let r=await (0,i.gS)((0,i.rJ)(s.db,e),{...t,createdAt:(0,i.O5)(),updatedAt:(0,i.O5)()});return{success:!0,id:r.id}}catch(e){return console.error("Error addDocument:",e),{success:!1,error:e.message}}},g=async(e,t,r)=>{try{if(!e||!t)throw Error("Colecci\xf3n o ID faltante");return await (0,i.mZ)((0,i.H9)(s.db,e,t),{...r,updatedAt:(0,i.O5)()}),{success:!0}}catch(e){return console.error("Error updateDocument:",e),{success:!1,error:e.message}}},h=async(e,t)=>{try{if(!e||!t)throw Error("Colecci\xf3n o ID faltante");return await (0,i.kd)((0,i.H9)(s.db,e,t)),{success:!0}}catch(e){return console.error("Error deleteDocument:",e),{success:!1,error:e.message}}}},64269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(2821),a=r(75889);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},92033:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},99413:(e,t,r)=>{Promise.resolve().then(r.bind(r,53377))}},e=>{e.O(0,[992,644,909,982,15,441,255,358],()=>e(e.s=99413)),_N_E=e.O()}]);