(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12],{1625:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var a=r(95155),s=r(12115),n=r(19201),i=r(16802),l=r(56177),o=r(45444);let c=(0,r(14294).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var d=r(98428),u=r(52619),h=r.n(u),x=r(20063),m=r(63862),p=r(64269);function f(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,p.cn)("animate-pulse rounded-md bg-muted",t),...r})}var g=r(44297);let v=JSON.parse('{"o":[{"id":"user-avatar","description":"User avatar placeholder","imageUrl":"https://images.unsplash.com/photo-1704726135027-9c6f034cfa41?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwxfHxhdmF0YXIlMjB1c2VyfGVufDB8fHx8MTc3MDQ5Mjk5Mnww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"avatar user"},{"id":"qr-code","description":"QR code placeholder","imageUrl":"https://images.unsplash.com/photo-1662383729882-e03ce8e00887?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw2fHxxciUyMGNvZGV8ZW58MHx8fHwxNzcwNDMwNzM4fDA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"qr code"},{"id":"efas-logo","description":"EFAS ServiControlPro Logo","imageUrl":"https://storage.googleapis.com/gweb-aip-dev.appspot.com/work-storage/2h3XJ-i-PjJ9mQ0YV9T-bA","imageHint":"efas logo"}]}').o,b=()=>{let e=(0,x.usePathname)(),t=(0,x.useRouter)(),{user:r}=(0,m.Jd)(),{installApp:u,isInstallable:p,isStandalone:f}=function(){let[e,t]=(0,s.useState)(null),[r,a]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{window.matchMedia("(display-mode: standalone)").matches&&a(!0);let e=e=>{e.preventDefault(),t(e)};window.addEventListener("beforeinstallprompt",e);let r=()=>{t(null)};return window.addEventListener("appinstalled",r),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",r)}},[]),{installApp:async()=>{if(!e)return;e.prompt();let{outcome:r}=await e.userChoice;"accepted"===r&&t(null)},isInstallable:!!e&&!r,isStandalone:r}}();return v.find(e=>"efas-logo"===e.id),(0,a.jsx)("nav",{className:"border-b border-white/5 bg-[#0a0c10]/80 backdrop-blur-md sticky top-0 z-[50]",children:(0,a.jsxs)("div",{className:"max-w-[1600px] mx-auto px-6 h-20 flex items-center justify-between",children:[(0,a.jsxs)(h(),{href:"/dashboard",className:"flex items-center gap-3 group",children:[(0,a.jsx)("div",{className:"bg-orange-600 p-2 rounded-xl shadow-[0_0_15px_rgba(234,88,12,0.3)] group-hover:scale-105 transition-transform",children:(0,a.jsx)(n.A,{className:"text-white w-6 h-6"})}),(0,a.jsxs)("div",{className:"hidden sm:block",children:[(0,a.jsxs)("h1",{className:"text-white font-black italic uppercase tracking-tighter text-lg leading-none",children:["EFAS ",(0,a.jsx)("span",{className:"text-orange-500",children:"ServiControlPro"})]}),(0,a.jsx)("p",{className:"text-[8px] text-slate-500 font-bold uppercase tracking-[0.3em]",children:"Institutional Security"})]})]}),(0,a.jsxs)("div",{className:"hidden lg:flex items-center gap-8",children:[(0,a.jsxs)(h(),{href:"/dashboard",className:"text-[11px] font-black uppercase italic flex items-center gap-2 transition-colors ".concat("/dashboard"===e?"text-orange-500":"text-slate-400 hover:text-white"),children:[(0,a.jsx)(i.A,{className:"w-4 h-4"})," Dashboard"]}),(0,a.jsxs)(h(),{href:"/dashboard/classrooms",className:"text-[11px] font-black uppercase italic flex items-center gap-2 transition-colors ".concat(e.includes("classrooms")?"text-orange-500":"text-slate-400 hover:text-white"),children:[(0,a.jsx)(l.A,{className:"w-4 h-4"})," Aulas"]}),(0,a.jsxs)(h(),{href:"/institutions",className:"text-[11px] font-black uppercase italic flex items-center gap-2 transition-colors ".concat(e.includes("institutions")?"text-orange-500":"text-slate-400 hover:text-white"),children:[(0,a.jsx)(o.A,{className:"w-4 h-4"})," Instituciones"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[p&&!f&&(0,a.jsxs)("button",{onClick:u,className:"hidden md:flex items-center gap-2 bg-orange-500/10 hover:bg-orange-500 text-orange-500 hover:text-white border border-orange-500/20 px-4 py-2 rounded-xl text-[10px] font-black uppercase transition-all",children:[(0,a.jsx)(c,{className:"w-3 h-3"})," Instalar App"]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 border-l border-white/10 pl-6",children:[(0,a.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-white uppercase italic",children:null==r?void 0:r.email}),(0,a.jsx)("p",{className:"text-[8px] font-bold text-orange-500 uppercase tracking-widest",children:"Super Admin"})]}),(0,a.jsx)("button",{onClick:()=>{localStorage.clear(),t.push("/login")},className:"bg-white/5 hover:bg-red-500/10 p-3 rounded-xl border border-white/5 hover:border-red-500/20 transition-all group",title:"Cerrar Sesi\xf3n",children:(0,a.jsx)(d.A,{className:"w-4 h-4 text-slate-500 group-hover:text-red-500"})})]})]})]})})};function w(){return(0,a.jsxs)("div",{className:"min-h-screen bg-[#0a0c10] flex flex-col",children:[(0,a.jsx)("div",{className:"h-20 border-b border-white/5 flex items-center px-6",children:(0,a.jsx)(f,{className:"h-8 w-48 bg-white/5"})}),(0,a.jsx)("div",{className:"flex-1 p-8",children:(0,a.jsx)(f,{className:"h-full w-full bg-white/5 rounded-3xl"})})]})}function y(e){let{children:t}=e,{user:r,loading:n}=(0,m.Jd)(),i=(0,x.usePathname)(),l=(0,x.useSearchParams)();return((0,s.useEffect)(()=>{if(!n&&!r){let e="".concat(i).concat(l.toString()?"?".concat(l.toString()):"");(0,x.redirect)("/login?redirect=".concat(encodeURIComponent(e)))}},[r,n,i,l]),n)?(0,a.jsx)(w,{}):r?(0,a.jsx)(g.C,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-[#0a0c10] flex flex-col font-sans",children:[(0,a.jsx)(b,{}),(0,a.jsx)("main",{className:"flex-1 w-full max-w-[1600px] mx-auto p-6 md:p-8 overflow-y-auto",children:t}),(0,a.jsx)("footer",{className:"py-8 border-t border-white/5 text-center bg-[#0a0c10]",children:(0,a.jsx)("p",{className:"text-[9px] text-slate-600 font-black uppercase tracking-[0.5em]",children:"EFAS ServiControlPro \xa9 2026 â€¢ Security Infrastructure"})})]})}):null}function j(e){let{children:t}=e;return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)(w,{}),children:(0,a.jsx)(y,{children:t})})}},3998:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(95155),s=r(12115),n=r(17129),i=r(83101),l=r(64269);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,...d}=e,u=c?n.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:s,size:i,className:r})),ref:t,...d})});c.displayName="Button"},7545:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(14294).A)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]])},16802:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(14294).A)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},18332:(e,t,r)=>{"use strict";r.d(t,{Fc:()=>o,TN:()=>d,XL:()=>c});var a=r(95155),s=r(12115),n=r(83101),i=r(64269);let l=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(l({variant:s}),r),...n})});o.displayName="Alert";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})});c.displayName="AlertTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...s})});d.displayName="AlertDescription"},19201:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(14294).A)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},20063:(e,t,r)=>{"use strict";var a=r(47260);r.o(a,"redirect")&&r.d(t,{redirect:function(){return a.redirect}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},44297:(e,t,r)=>{"use strict";r.d(t,{C:()=>p,w:()=>f});var a=r(95155),s=r(12115),n=r(20063),i=r(63862),l=r(19708),o=r(92033),c=r(7545),d=r(18332),u=r(52619),h=r.n(u),x=r(3998);let m=(0,s.createContext)(void 0),p=e=>{let{children:t}=e,[r,u]=(0,s.useState)(null),[p,f]=(0,s.useState)(null),[g,v]=(0,s.useState)(!0),[b,w]=(0,s.useState)(null),y=(0,n.useSearchParams)(),{user:j,loading:N}=(0,i.Jd)();return((0,s.useEffect)(()=>{(async()=>{if(N||!i.db)return;if(v(!0),w(null),!j)return v(!1);let e=y.get("institutionId"),t=localStorage.getItem("selectedInstitutionId"),r="vallecondo@gmail.com"===j.email;try{let a=e||t;if(!r&&!a){let e=await (0,l.x7)((0,l.H9)(i.db,"users",j.uid));if(e.exists()&&e.data().institutionId)a=e.data().institutionId;else{w("Tu cuenta no est\xe1 asociada a ninguna instituci\xf3n."),v(!1);return}}if(!a){w(r?"Por favor, selecciona una instituci\xf3n desde el Panel Maestro.":"No se pudo determinar la instituci\xf3n."),v(!1);return}let s=(0,l.H9)(i.db,"institutions",a),n=await (0,l.x7)(s),o=null;if(n.exists())o=n.data();else{let e=(0,l.P)((0,l.rJ)(i.db,"institutions"),(0,l._M)("InstitutoId","==",a)),t=await (0,l.GG)(e);t.empty||(o=t.docs[0].data())}o?"published"===o.status||r?(u(a),f(o)):w("Esta instituci\xf3n no se encuentra publicada actualmente."):w('Error: La instituci\xf3n "'.concat(a,'" no existe en EFAS Cloud.'))}catch(e){console.error("Error en InstitutionProvider:",e),w("Error de conexi\xf3n con la base de datos.")}finally{v(!1)}})()},[y,j,N]),g||N)?(0,a.jsxs)("div",{className:"flex h-screen w-full flex-col items-center justify-center bg-slate-950 text-white",children:[(0,a.jsx)(o.A,{className:"h-10 w-10 animate-spin text-orange-600"}),(0,a.jsx)("p",{className:"mt-4 text-slate-400 font-bold tracking-widest uppercase italic",children:"EFAS ServiControlPro"})]}):b?(0,a.jsx)("div",{className:"flex h-screen w-full items-center justify-center bg-[#0a0c10] p-6",children:(0,a.jsxs)(d.Fc,{variant:"destructive",className:"max-w-md bg-slate-900 border-red-900/50 rounded-2xl p-8",children:[(0,a.jsx)(c.A,{className:"h-5 w-5 text-red-500 mb-2"}),(0,a.jsx)(d.XL,{className:"text-red-500 font-black uppercase tracking-tighter text-xl italic",children:"Acceso Denegado"}),(0,a.jsxs)(d.TN,{className:"text-slate-300 font-medium",children:[(0,a.jsx)("p",{className:"mt-2",children:b}),(null==j?void 0:j.email)==="vallecondo@gmail.com"&&(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(x.$,{asChild:!0,className:"bg-orange-600 hover:bg-orange-700 w-full font-black italic uppercase py-6 rounded-xl shadow-lg shadow-orange-900/20",children:(0,a.jsx)(h(),{href:"/super-admin/dashboard",children:"Ir al Panel Maestro"})})})]})]})}):(0,a.jsx)(m.Provider,{value:{institutionId:r,institutionData:p,setInstitutionId:e=>{e?localStorage.setItem("selectedInstitutionId",e):localStorage.removeItem("selectedInstitutionId"),u(e)}},children:t})},f=()=>{let e=(0,s.useContext)(m);if(void 0===e)throw Error("useInstitution debe usarse dentro de un InstitutionProvider");return e}},45300:(e,t,r)=>{"use strict";r.d(t,{db:()=>c,j2:()=>o});var a=r(52078),s=r(59253),n=r(19708),i=r(58134);r(13328),r(34491);let l=(0,a.Dk)().length>0?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyACK79dDRclgjFMEUokqpskC1ezyvmO11k",authDomain:"studio-7637044995-2342d.firebaseapp.com",projectId:"studio-7637044995-2342d",storageBucket:"studio-7637044995-2342d.firebasestorage.app",messagingSenderId:"7637044995",appId:"1:7637044995:web:2c6b412952864386927958"}),o=(0,s.xI)(l),c=(0,n.aU)(l);(0,i.c7)(l)},45444:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(14294).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},56177:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(14294).A)("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]])},63862:(e,t,r)=>{"use strict";r.d(t,{As:()=>d,BH:()=>m,Ge:()=>x,Jd:()=>c,db:()=>a.db,jt:()=>u,pt:()=>p,ri:()=>o,uN:()=>h,zb:()=>f});var a=r(45300),s=r(13328),n=r(34491),i=r(19708),l=r(59253);let o=async()=>{try{await (0,l.CI)(a.j2),localStorage.removeItem("selectedInstitutionId"),window.location.href="/login"}catch(e){console.error("Error al cerrar sesi\xf3n:",e)}},c=()=>{let[e,t,r]=(0,s.hD)(a.j2);return{user:e,loading:t,error:r}},d=()=>{let[e,t,r]=(0,s.hD)(a.j2);return{user:e,loading:t,error:r,auth:a.j2}},u=()=>a.db,h=n.ZY,x=e=>{if("string"==typeof e&&(!e||e.includes("undefined")||e.includes("null")))return{value:[],loading:!1,error:Error("Ruta de colecci\xf3n inv\xe1lida")};let t="string"==typeof e?(0,i.rJ)(a.db,e):e,[r,s,l]=(0,n.Ar)(t,{idField:"id"});return{value:r||[],loading:s,error:l}},m=async(e,t)=>{try{if(!e||"string"!=typeof e||e.includes("undefined")||e.includes("null"))return console.error("Path inv\xe1lido detectado:",e),{success:!1,error:"Ruta de base de datos no v\xe1lida"};let r=await (0,i.gS)((0,i.rJ)(a.db,e),{...t,createdAt:(0,i.O5)(),updatedAt:(0,i.O5)()});return{success:!0,id:r.id}}catch(e){return console.error("Error addDocument:",e),{success:!1,error:e.message}}},p=async(e,t,r)=>{try{if(!e||!t)throw Error("Colecci\xf3n o ID faltante");return await (0,i.mZ)((0,i.H9)(a.db,e,t),{...r,updatedAt:(0,i.O5)()}),{success:!0}}catch(e){return console.error("Error updateDocument:",e),{success:!1,error:e.message}}},f=async(e,t)=>{try{if(!e||!t)throw Error("Colecci\xf3n o ID faltante");return await (0,i.kd)((0,i.H9)(a.db,e,t)),{success:!0}}catch(e){return console.error("Error deleteDocument:",e),{success:!1,error:e.message}}}},64269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2821),s=r(75889);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},90567:(e,t,r)=>{Promise.resolve().then(r.bind(r,1625))},92033:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(14294).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},98428:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(14294).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])}},e=>{e.O(0,[992,644,909,982,15,441,255,358],()=>e(e.s=90567)),_N_E=e.O()}]);