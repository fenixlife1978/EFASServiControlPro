(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[284],{3998:(e,t,s)=>{"use strict";s.d(t,{$:()=>o});var a=s(95155),l=s(12115),r=s(17129),i=s(83101),n=s(64269);let c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=l.forwardRef((e,t)=>{let{className:s,variant:l,size:i,asChild:o=!1,...d}=e,x=o?r.DX:"button";return(0,a.jsx)(x,{className:(0,n.cn)(c({variant:l,size:i,className:s})),ref:t,...d})});o.displayName="Button"},15894:(e,t,s)=>{"use strict";s.d(t,{dj:()=>x});var a=s(12115);let l=0,r=new Map,i=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},n=[],c={toasts:[]};function o(e){c=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(c,e),n.forEach(e=>{e(c)})}function d(e){let{...t}=e,s=(l=(l+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:s});return o({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function x(){let[e,t]=a.useState(c);return a.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},34168:(e,t,s)=>{"use strict";s.d(t,{C:()=>c,w:()=>o});var a=s(95155),l=s(12115),r=s(45300),i=s(19708);let n=(0,l.createContext)({institutionId:null,setInstitutionId:()=>{},userRole:null}),c=e=>{let{children:t}=e,[s,c]=(0,l.useState)(null),[o,d]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let e=async()=>{let e=r.j2.currentUser;if(!e)return;if("vallecondo@gmail.com"===e.email)return void d("super-admin");let t=(0,i.P)((0,i.rJ)(r.db,"usuarios"),(0,i._M)("email","==",e.email)),s=await (0,i.GG)(t);if(!s.empty){let e=s.docs[0].data();d(e.role),c(e.InstitutoId)}},t=r.j2.onAuthStateChanged(()=>e());return()=>t()},[]),(0,a.jsx)(n.Provider,{value:{institutionId:s,setInstitutionId:c,userRole:o},children:t})},o=()=>(0,l.useContext)(n)},35613:(e,t,s)=>{Promise.resolve().then(s.bind(s,43626))},43626:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ei});var a=s(95155),l=s(12115),r=s(34168),i=s(45300),n=s(19708),c=s(15039),o=s(91851),d=s(8861),x=s(6943),u=s(45444),p=s(98428),m=s(61270),b=s(1272),h=s(62593),g=s(7646),f=s(68288),j=s(66065),v=s(91480),N=s(73180),w=s(90109),y=s(97965),k=s(32265),A=s(6600),I=s(63263),S=s(36204),C=s(27314),E=s(24538),O=s(27500),_=s(55666),D=s(12036),T=s(13630),M=s(94979),z=s(59253),R=s(63862),L=s(92033),P=s(60334),H=s(86594),J=s(44846),B=s(15894);function U(e){let{institutionId:t}=e,[s,r]=(0,l.useState)({filterActive:!0,strictMode:!1,maintenanceMode:!1}),[i,o]=(0,l.useState)(!0),{toast:d}=(0,B.dj)();(0,l.useEffect)(()=>{let e=(0,n.H9)(R.db,"institutions/".concat(t,"/config"),"global_settings"),s=(0,n.aQ)(e,t=>{t.exists()?r(t.data()):(0,n.BN)(e,{filterActive:!0,strictMode:!1,maintenanceMode:!1}),o(!1)});return()=>s()},[t]);let x=async(e,s)=>{try{let a=(0,n.H9)(R.db,"institutions/".concat(t,"/config"),"global_settings");await (0,n.mZ)(a,{[e]:s}),d({title:"Configuraci\xf3n Actualizada",description:"".concat(e," ahora est\xe1 ").concat(s?"ACTIVADO":"DESACTIVADO")})}catch(e){d({variant:"destructive",title:"Error al actualizar"})}};return i?(0,a.jsx)(L.A,{className:"w-6 h-6 animate-spin text-orange-500 mx-auto"}):(0,a.jsxs)("div",{className:"bg-[#11141d] border border-white/5 rounded-3xl p-8 shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,a.jsx)(v.A,{className:"text-orange-500 w-6 h-6"}),(0,a.jsx)("h2",{className:"text-xl font-black italic uppercase text-white",children:"Controles Maestros"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/5",children:[(0,a.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl ".concat(s.filterActive?"bg-emerald-500/20 text-emerald-500":"bg-red-500/20 text-red-500"),children:(0,a.jsx)(P.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-black text-white uppercase italic",children:"Filtro de Contenido"}),(0,a.jsx)("p",{className:"text-[10px] text-slate-500 font-bold uppercase",children:"Activa/Desactiva toda la protecci\xf3n"})]})]}),(0,a.jsx)(J.d,{checked:s.filterActive,onCheckedChange:e=>x("filterActive",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/5",children:[(0,a.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl ".concat(s.strictMode?"bg-orange-500/20 text-orange-500":"bg-slate-800 text-slate-500"),children:(0,a.jsx)(c.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-black text-white uppercase italic",children:"Modo Estricto (Whitelisting)"}),(0,a.jsx)("p",{className:"text-[10px] text-slate-500 font-bold uppercase",children:"Solo permite sitios autorizados"})]})]}),(0,a.jsx)(J.d,{checked:s.strictMode,onCheckedChange:e=>x("strictMode",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/5",children:[(0,a.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl ".concat(s.maintenanceMode?"bg-red-600/20 text-red-600 animate-pulse":"bg-slate-800 text-slate-500"),children:(0,a.jsx)(H.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-black text-white uppercase italic",children:"Bloqueo de Navegaci\xf3n"}),(0,a.jsx)("p",{className:"text-[10px] text-slate-500 font-bold uppercase",children:"Cierra el acceso a internet totalmente"})]})]}),(0,a.jsx)(J.d,{checked:s.maintenanceMode,onCheckedChange:e=>x("maintenanceMode",e)})]})]})]})}var Q=s(26615),F=s(92925);function q(e){let{isOpen:t,onClose:s,tabletId:r,alumnoNombre:o}=e,[d,x]=(0,l.useState)([]),[u,p]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{if(!t||!r)return;p(!0);let e=(0,n.P)((0,n.rJ)(i.db,"web_history"),(0,n._M)("tabletId","==",r),(0,n.My)("timestamp","desc"),(0,n.AB)(20)),s=(0,n.aQ)(e,e=>{x(e.docs.map(e=>({id:e.id,...e.data()}))),p(!1)});return()=>s()},[t,r]),t)?(0,a.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"bg-[#1a1d23] border border-white/10 w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-white/10 flex items-center justify-between bg-gradient-to-r from-orange-500/10 to-transparent",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-orange-500/20 flex items-center justify-center",children:(0,a.jsx)(_.A,{className:"text-orange-500 w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-bold text-lg leading-tight",children:"Historial de Navegaci\xf3n"}),(0,a.jsxs)("p",{className:"text-slate-400 text-xs uppercase tracking-wider font-semibold",children:["Alumno: ",o]})]})]}),(0,a.jsx)("button",{onClick:s,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-400 hover:text-white",children:(0,a.jsx)(Q.A,{className:"w-6 h-6"})})]}),(0,a.jsx)("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:u?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("p",{className:"text-slate-500 text-sm",children:"Consultando Centinela..."})]}):d.length>0?(0,a.jsx)("div",{className:"space-y-3",children:d.map(e=>{var t;return(0,a.jsxs)("div",{className:"group p-4 rounded-xl bg-white/5 border border-white/5 hover:border-orange-500/30 hover:bg-orange-500/5 transition-all flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 overflow-hidden",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-slate-800 text-slate-400 group-hover:text-orange-500 group-hover:bg-orange-500/10 transition-colors",children:(0,a.jsx)(h.A,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{className:"overflow-hidden",children:[(0,a.jsx)("p",{className:"text-sm text-slate-200 font-medium truncate group-hover:text-white",children:e.url}),(0,a.jsx)("p",{className:"text-[10px] text-slate-500 font-mono",children:(null==(t=e.timestamp)?void 0:t.toDate().toLocaleString())||"Fecha no disponible"})]})]}),(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-slate-500 hover:text-orange-500 opacity-0 group-hover:opacity-100 transition-all",children:(0,a.jsx)(F.A,{className:"w-4 h-4"})})]},e.id)})}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,a.jsx)(c.A,{className:"w-12 h-12 text-slate-700 mb-4"}),(0,a.jsx)("p",{className:"text-slate-400 font-medium",children:"No se detectaron registros recientes."}),(0,a.jsx)("p",{className:"text-slate-600 text-xs mt-1",children:"El sistema Centinela no ha reportado actividad para este dispositivo."})]})}),(0,a.jsx)("div",{className:"p-4 bg-black/20 border-t border-white/5 text-center",children:(0,a.jsx)("p",{className:"text-[10px] text-slate-500 uppercase tracking-[0.2em]",children:"EDUControlPro - Monitoreo en Tiempo Real"})})]})}):null}var Z=s(3998);function G(e){let{institutionId:t}=e,[s,r]=(0,l.useState)({blacklisted_urls:[]}),[i,c]=(0,l.useState)(""),[o,d]=(0,l.useState)(!0),{toast:x}=(0,B.dj)();(0,l.useEffect)(()=>{let e=(0,n.H9)(R.db,"institutions/".concat(t,"/config"),"security_rules"),s=(0,n.aQ)(e,t=>{t.exists()?r(t.data()):(0,n.BN)(e,{blacklisted_urls:[]}),d(!1)});return()=>s()},[t]);let u=async e=>{if(e.preventDefault(),i)try{let e=(0,n.H9)(R.db,"institutions/".concat(t,"/config"),"security_rules");await (0,n.mZ)(e,{blacklisted_urls:(0,n.hq)(i.toLowerCase().trim())}),c(""),x({title:"Lista actualizada",description:"URL bloqueada correctamente."})}catch(e){x({variant:"destructive",title:"Error",description:"No se pudo a\xf1adir."})}},p=async e=>{try{let s=(0,n.H9)(R.db,"institutions/".concat(t,"/config"),"security_rules");await (0,n.mZ)(s,{blacklisted_urls:(0,n.C3)(e)})}catch(e){console.error(e)}};return o?(0,a.jsx)("div",{className:"p-10 text-center text-slate-500 font-black italic",children:"CARGANDO REGLAS..."}):(0,a.jsxs)("div",{className:"bg-[#11141d] border border-white/5 rounded-3xl p-8 shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(m.A,{className:"text-orange-500 w-6 h-6"}),(0,a.jsx)("h2",{className:"text-xl font-black italic uppercase text-white",children:"Filtro de Contenido"})]}),(0,a.jsx)("span",{className:"bg-orange-500/10 text-orange-500 px-3 py-1 rounded-full text-[10px] font-black border border-orange-500/20",children:"PROTECCI\xd3N ACTIVA"})]}),(0,a.jsxs)("form",{onSubmit:u,className:"flex gap-2 mb-8",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(_.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),(0,a.jsx)("input",{value:i,onChange:e=>c(e.target.value),className:"w-full bg-[#1c212c] rounded-2xl py-4 pl-12 pr-4 text-sm text-white outline-none focus:ring-2 focus:ring-orange-500 border border-white/5",placeholder:"Ej: facebook.com o palabras clave"})]}),(0,a.jsx)(Z.$,{type:"submit",className:"bg-orange-600 hover:bg-orange-700 text-white font-black italic rounded-2xl px-6",children:(0,a.jsx)(k.A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-2",children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-slate-500 uppercase ml-2 mb-4 tracking-widest",children:"Lista Negra Actual"}),0===s.blacklisted_urls.length?(0,a.jsx)("div",{className:"text-center py-10 bg-white/5 rounded-2xl border border-dashed border-white/10",children:(0,a.jsx)("p",{className:"text-slate-600 text-xs font-bold uppercase italic",children:"No hay restricciones activas"})}):s.blacklisted_urls.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-[#1c212c] p-4 rounded-2xl border border-white/5 group hover:border-orange-500/30 transition-all",children:[(0,a.jsx)("span",{className:"text-sm font-mono text-slate-300 font-bold",children:e}),(0,a.jsx)("button",{onClick:()=>p(e),className:"text-slate-600 hover:text-red-500 p-1 transition-colors",children:(0,a.jsx)(Q.A,{className:"w-4 h-4"})})]},t))]}),(0,a.jsx)("div",{className:"mt-8 pt-6 border-t border-white/5",children:(0,a.jsx)("p",{className:"text-[9px] text-slate-600 font-bold leading-tight uppercase italic",children:"* Cualquier intento de acceso a estos dominios activar\xe1 la pantalla de bloqueo y enviar\xe1 una incidencia al panel principal de EDUControlPro."})})]})}function V(){let{institutionId:e,setInstitutionId:t}=(0,r.w)(),[s,R]=(0,l.useState)("Cargando..."),[L,P]=(0,l.useState)("dashboard"),[H,J]=(0,l.useState)({isOpen:!1,tabletId:"",alumnoNombre:""}),[B,Q]=(0,l.useState)({isOpen:!1,tabletId:"",alumnoNombre:"",text:""}),[F,Z]=(0,l.useState)([]),[V,K]=(0,l.useState)([]),[W,$]=(0,l.useState)(null),[X,Y]=(0,l.useState)([]),[ee,et]=(0,l.useState)([]),[es,ea]=(0,l.useState)(""),[el,er]=(0,l.useState)(!1),[ei,en]=(0,l.useState)({nombre_completo:"",seccion:"",grado:""}),[ec,eo]=(0,l.useState)(""),[ed,ex]=(0,l.useState)(!1),[eu,ep]=(0,l.useState)(null),[em,eb]=(0,l.useState)("");(0,l.useEffect)(()=>{e&&(async()=>{let t=(0,n.H9)(i.db,"institutions",e),s=await (0,n.x7)(t);s.exists()&&R(s.data().nombre)})()},[e]),(0,l.useEffect)(()=>{if(!e)return;let t=(0,n.aQ)((0,n.P)((0,n.rJ)(i.db,"institutions/".concat(e,"/Aulas"))),e=>{Z(e.docs.map(e=>({id:e.id,...e.data()})))}),s=(0,n.aQ)((0,n.P)((0,n.rJ)(i.db,"dispositivos"),(0,n._M)("InstitutoId","==",e)),e=>{K(e.docs.map(e=>({id:e.id,...e.data()})))}),a=(0,n.aQ)((0,n.P)((0,n.rJ)(i.db,"usuarios"),(0,n._M)("InstitutoId","==",e),(0,n._M)("role","==","estudiante")),e=>{et(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>{t(),s(),a()}},[e]),(0,l.useEffect)(()=>{if(!W||!e)return void Y([]);let t=(0,n.P)((0,n.rJ)(i.db,"usuarios"),(0,n._M)("InstitutoId","==",e),(0,n._M)("aulaId","==",W.id),(0,n._M)("role","==","estudiante"));return(0,n.aQ)(t,e=>{Y(e.docs.map(e=>({id:e.id,...e.data()})))})},[W,e]);let eh=async()=>{if(B.tabletId&&B.text.trim()){ex(!0);try{let e=(0,n.H9)(i.db,"dispositivos",B.tabletId);await (0,n.mZ)(e,{pending_message:B.text,message_timestamp:(0,n.O5)(),message_sender:"Direcci\xf3n Institucional"}),alert("Mensaje enviado a ".concat(B.alumnoNombre)),Q({...B,isOpen:!1,text:""})}catch(e){console.error(e)}ex(!1)}},eg=async t=>{if(t.preventDefault(),e){ex(!0);try{await (0,n.mZ)((0,n.H9)(i.db,"institutions",e),{nombre:s,lastUpdate:(0,n.O5)()}),alert("Configuraci\xf3n actualizada.")}catch(e){console.error(e)}ex(!1)}},ef=async()=>{if(em.trim()&&eu)try{await (0,n.mZ)((0,n.H9)(i.db,"usuarios",eu.id),{nombre:em}),eu.tabletId&&await (0,n.mZ)((0,n.H9)(i.db,"dispositivos",eu.tabletId),{alumno_asignado:em}),ep(null),eb("")}catch(e){console.error(e)}},ej=async e=>{if(confirm("\xbfEliminar a ".concat(e.nombre,"?")))try{e.tabletId&&await (0,n.mZ)((0,n.H9)(i.db,"dispositivos",e.tabletId),{alumno_asignado:"",aulaId:"",InstitutoId:"",status:"pending_name"}),await (0,n.kd)((0,n.H9)(i.db,"usuarios",e.id))}catch(e){console.error(e)}},ev=ee.filter(e=>e.nombre.toLowerCase().includes(es.toLowerCase())||e.tabletId&&e.tabletId.toLowerCase().includes(es.toLowerCase()));return(0,a.jsxs)("div",{className:"min-h-screen bg-[#0a0c10] text-slate-300 font-sans",children:[(0,a.jsxs)("nav",{className:"fixed left-0 top-0 h-full w-20 bg-[#0f1117] border-r border-slate-800/50 flex flex-col items-center py-8 gap-8 z-50",children:[(0,a.jsx)("div",{className:"bg-orange-500 p-3 rounded-2xl shadow-lg shadow-orange-500/20",children:(0,a.jsx)(c.A,{className:"text-white w-6 h-6"})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col gap-6 pt-10",children:[(0,a.jsx)("button",{onClick:()=>{P("dashboard"),$(null)},className:"p-3 rounded-xl transition-all ".concat("dashboard"===L?"text-orange-500 bg-orange-500/10":"text-slate-600 hover:text-white"),children:(0,a.jsx)(o.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>P("monitoring"),className:"p-3 rounded-xl transition-all ".concat("monitoring"===L?"text-orange-500 bg-orange-500/10":"text-slate-600 hover:text-white"),children:(0,a.jsx)(d.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>P("users"),className:"p-3 rounded-xl transition-all ".concat("users"===L?"text-orange-500 bg-orange-500/10":"text-slate-600 hover:text-white"),children:(0,a.jsx)(x.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>P("settings"),className:"p-3 rounded-xl transition-all ".concat("settings"===L?"text-orange-500 bg-orange-500/10":"text-slate-600 hover:text-white"),children:(0,a.jsx)(u.A,{className:"w-5 h-5"})})]}),(0,a.jsx)("button",{onClick:()=>(0,z.CI)(i.j2),className:"p-3 text-slate-600 hover:text-red-500 transition-colors",children:(0,a.jsx)(p.A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("main",{className:"pl-20",children:[(0,a.jsxs)("header",{className:"sticky top-0 z-40 bg-[#0a0c10]/80 backdrop-blur-md border-b border-slate-800/50 px-8 py-6 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-[9px] font-black uppercase tracking-[0.4em] text-orange-500 mb-1",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-orange-500 rounded-full animate-ping"}),"EDUControlPro v3.0"]}),(0,a.jsxs)("h1",{className:"text-2xl font-black italic uppercase text-white tracking-tighter",children:[s," ",(0,a.jsxs)("span",{className:"text-slate-500 font-light ml-2",children:["/ ",L.toUpperCase()]})]})]}),(0,a.jsx)("button",{onClick:()=>t(null),className:"bg-slate-900 border border-slate-800 text-slate-400 hover:text-white px-5 py-2 rounded-xl text-[10px] font-black uppercase italic flex items-center gap-2",children:"← Volver a Sedes"})]}),(0,a.jsxs)("div",{className:"p-8 max-w-[1600px] mx-auto grid grid-cols-12 gap-8",children:[(0,a.jsxs)("div",{className:"col-span-12 lg:col-span-4 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-[#0f1117] p-8 rounded-[2.5rem] border border-slate-800 shadow-2xl",children:[(0,a.jsxs)("h2",{className:"text-xl font-black italic uppercase text-white mb-6 flex items-center gap-3",children:[(0,a.jsx)(m.A,{className:"text-orange-500 w-5 h-5"})," Master Switch"]}),(0,a.jsx)("div",{className:"scale-95 origin-left",children:(0,a.jsx)(U,{institutionId:e})})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 to-[#0f1117] p-8 rounded-[2.5rem] border border-slate-800",children:[(0,a.jsx)("h3",{className:"text-xs font-black uppercase text-slate-500 tracking-widest italic mb-6",children:"M\xe9tricas del Periodo"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-black/20 p-4 rounded-2xl border border-slate-800/50 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[8px] font-black text-slate-600 uppercase",children:"Sitios Bloqueados"}),(0,a.jsx)("p",{className:"text-xl font-black text-white italic",children:"142"})]}),(0,a.jsx)(b.A,{className:"text-orange-500/20 w-8 h-8"})]}),(0,a.jsxs)("div",{className:"bg-black/20 p-4 rounded-2xl border border-slate-800/50 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[8px] font-black text-slate-600 uppercase",children:"Tiempo de Uso Promedio"}),(0,a.jsx)("p",{className:"text-xl font-black text-white italic",children:"4h 20m"})]}),(0,a.jsx)(h.A,{className:"text-blue-500/20 w-8 h-8"})]})]})]})]}),(0,a.jsx)("div",{className:"col-span-12 lg:col-span-8",children:(0,a.jsxs)("div",{className:"bg-[#0f1117] p-10 rounded-[3rem] border border-slate-800 min-h-[600px] relative",children:["settings"===L&&(0,a.jsxs)("div",{className:"space-y-10 animate-in slide-in-from-right-4 duration-500",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-4xl font-black italic uppercase text-white tracking-tighter leading-none",children:["Configuraci\xf3n ",(0,a.jsx)("span",{className:"text-orange-500 font-light",children:"de Sede"})]}),(0,a.jsx)("p",{className:"text-[10px] font-bold text-slate-500 uppercase mt-2 italic",children:"Ajustes t\xe9cnicos y perfil institucional"})]}),(0,a.jsxs)("form",{onSubmit:eg,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-slate-900/40 p-6 rounded-[2rem] border border-slate-800 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-orange-500 mb-2",children:[(0,a.jsx)(g.A,{size:16}),(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Perfil General"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-[9px] font-black text-slate-500 uppercase ml-1",children:"Nombre de la Sede"}),(0,a.jsx)("input",{className:"w-full bg-slate-900 border border-slate-800 rounded-xl px-4 py-3 text-xs font-bold text-white uppercase outline-none focus:border-orange-500",value:s,onChange:e=>R(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"bg-slate-900/40 p-6 rounded-[2rem] border border-slate-800 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-blue-500 mb-2",children:[(0,a.jsx)(f.A,{size:16}),(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Identificador"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-[9px] font-black text-slate-500 uppercase ml-1",children:"InstitutoId (Referencia)"}),(0,a.jsx)("div",{className:"w-full bg-slate-900 border border-slate-800 rounded-xl px-4 py-3 text-[10px] font-mono font-bold text-slate-500 truncate",children:e})]})]})]}),(0,a.jsxs)("div",{className:"bg-slate-900/40 p-8 rounded-[2rem] border border-slate-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-slate-400 mb-6",children:[(0,a.jsx)(j.A,{size:16}),(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Auditor\xeda de Recursos"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[8px] font-black text-slate-600 uppercase",children:"Aulas"}),(0,a.jsx)("p",{className:"text-lg font-black text-white italic",children:F.length})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[8px] font-black text-slate-600 uppercase",children:"Tablets"}),(0,a.jsx)("p",{className:"text-lg font-black text-white italic",children:V.length})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[8px] font-black text-slate-600 uppercase",children:"Alumnos"}),(0,a.jsx)("p",{className:"text-lg font-black text-white italic",children:ee.length})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[8px] font-black text-slate-600 uppercase",children:"Sede"}),(0,a.jsx)("p",{className:"text-lg font-black text-green-500 italic",children:"ON"})]})]})]}),(0,a.jsxs)("button",{type:"submit",disabled:ed,className:"w-full bg-orange-500 text-white p-5 rounded-2xl text-[10px] font-black uppercase italic hover:bg-white hover:text-black transition-all flex items-center justify-center gap-3",children:[ed?(0,a.jsx)(v.A,{className:"animate-spin",size:16}):(0,a.jsx)(N.A,{size:16}),"Aplicar Configuraci\xf3n"]})]})]}),"monitoring"===L&&(0,a.jsxs)("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[(0,a.jsx)("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-4xl font-black italic uppercase text-white tracking-tighter leading-none",children:["Activity ",(0,a.jsx)("span",{className:"text-orange-500 font-light",children:"Reports"})]}),(0,a.jsx)("p",{className:"text-[10px] font-bold text-slate-500 uppercase mt-2 italic",children:"Historial unificado y exportaci\xf3n de logs"})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:(0,a.jsxs)("div",{className:"md:col-span-2 relative",children:[(0,a.jsx)(w.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-600"}),(0,a.jsx)("input",{placeholder:"FILTRAR...",className:"w-full bg-slate-900/50 border border-slate-800 rounded-2xl pl-12 pr-6 py-4 text-[10px] font-bold uppercase text-white outline-none focus:border-orange-500",value:ec,onChange:e=>eo(e.target.value)})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-3",children:V.filter(e=>{var t;return null==(t=e.alumno_asignado)?void 0:t.toLowerCase().includes(ec.toLowerCase())}).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-5 bg-slate-900/30 rounded-3xl border border-slate-800/50 hover:bg-slate-800/20 transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-slate-800 rounded-xl flex items-center justify-center border border-slate-700",children:(0,a.jsx)(y.A,{size:16,className:"text-slate-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-black text-white uppercase italic",children:e.alumno_asignado||"DISPOSITIVO LIBRE"}),(0,a.jsxs)("p",{className:"text-[8px] font-bold text-slate-600 uppercase tracking-widest",children:["ID: ",e.id]})]})]}),(0,a.jsx)("button",{onClick:()=>J({isOpen:!0,tabletId:e.id,alumnoNombre:e.alumno_asignado}),className:"px-6 py-3 bg-orange-500/10 hover:bg-orange-500 text-orange-500 hover:text-white rounded-xl text-[9px] font-black uppercase italic transition-all border border-orange-500/20",children:"Generar Log"})]},e.id))})]}),"dashboard"===L&&!W&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,a.jsxs)("h2",{className:"text-4xl font-black italic uppercase text-white tracking-tighter",children:["Mapa ",(0,a.jsx)("span",{className:"text-orange-500 font-light",children:"de Aulas"})]}),(0,a.jsx)("button",{onClick:()=>er(!0),className:"bg-orange-500 text-white p-4 rounded-2xl hover:bg-orange-600 shadow-lg shadow-orange-500/20 transition-all",children:(0,a.jsx)(k.A,{className:"w-6 h-6"})})]}),(0,a.jsx)("div",{className:"mb-12",children:(0,a.jsx)(G,{institutionId:e})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:F.map(e=>(0,a.jsxs)("button",{onClick:()=>$(e),className:"bg-slate-900/30 p-8 rounded-[2.5rem] border border-slate-800 hover:border-orange-500 transition-all group text-left relative overflow-hidden",children:[(0,a.jsx)(A.A,{className:"w-8 h-8 text-slate-700 mb-4 group-hover:text-orange-500 transition-colors"}),(0,a.jsx)("h3",{className:"text-xl font-black italic uppercase text-white leading-tight",children:e.nombre_completo}),(0,a.jsxs)("p",{className:"text-[10px] font-bold text-slate-500 uppercase mt-1",children:[e.grado," • ",e.seccion]}),(0,a.jsx)("div",{className:"absolute right-6 bottom-6 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(I.A,{className:"text-orange-500"})})]},e.id))})]}),W&&"dashboard"===L&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>$(null),className:"mb-8 flex items-center gap-2 text-[10px] font-black uppercase text-slate-500 hover:text-orange-500 transition-all",children:[(0,a.jsx)(S.A,{className:"w-3 h-3"})," Regresar"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:X.map(e=>{let t=V.find(t=>t.id===e.tabletId);return(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between p-6 bg-slate-900/50 rounded-[2rem] border border-slate-800 group hover:border-orange-500/40 transition-all gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-slate-800 rounded-2xl flex items-center justify-center border border-slate-700",children:(0,a.jsx)(C.A,{className:(null==t?void 0:t.online)?"text-orange-500":"text-slate-500"})}),(null==t?void 0:t.online)&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-[#0f1117] animate-pulse"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-black uppercase text-white italic",children:e.nombre}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("span",{className:"text-[8px] font-black px-1.5 py-0.5 rounded ".concat((null==t?void 0:t.online)?"bg-green-500/20 text-green-500":"bg-slate-800 text-slate-500"),children:(null==t?void 0:t.online)?"EN L\xcdNEA":"DESCONECTADO"}),(null==t?void 0:t.bateria)&&(0,a.jsxs)("span",{className:"text-[9px] font-bold text-slate-500 flex items-center gap-1",children:[(0,a.jsx)(E.A,{size:10})," ",t.bateria,"%"]})]})]})]}),(0,a.jsx)("div",{className:"flex-1 bg-black/40 rounded-xl px-4 py-2 border border-slate-800/50 max-w-xs overflow-hidden",children:(0,a.jsx)("p",{className:"text-[10px] font-medium text-slate-400 truncate italic",children:(null==t?void 0:t.last_url)||"..."})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>Q({isOpen:!0,tabletId:e.tabletId||"",alumnoNombre:e.nombre,text:""}),className:"w-12 h-12 rounded-2xl bg-blue-500/10 border border-blue-500/20 flex items-center justify-center hover:bg-blue-500 hover:text-white transition-all",children:(0,a.jsx)(O.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>J({isOpen:!0,tabletId:e.tabletId||"",alumnoNombre:e.nombre}),className:"w-12 h-12 rounded-2xl bg-orange-500/10 border border-orange-500/20 flex items-center justify-center hover:bg-orange-500 hover:text-white transition-all",children:(0,a.jsx)(_.A,{className:"w-5 h-5"})})]})]},e.id)})})]}),"users"===L&&(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("h2",{className:"text-4xl font-black italic uppercase text-white tracking-tighter",children:["Directorio ",(0,a.jsx)("span",{className:"text-orange-500 font-light",children:"Global"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(w.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),(0,a.jsx)("input",{placeholder:"BUSCAR...",className:"bg-slate-900 border border-slate-800 rounded-2xl pl-12 pr-6 py-3 text-[10px] font-bold uppercase text-white w-72 outline-none focus:border-orange-500 transition-all",value:es,onChange:e=>ea(e.target.value)})]})]}),(0,a.jsx)("div",{className:"overflow-hidden rounded-[2rem] border border-slate-800 bg-slate-900/20 text-[10px]",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{className:"bg-slate-900/80 border-b border-slate-800 text-slate-500 font-black uppercase",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-5",children:"Alumno / HWID"}),(0,a.jsx)("th",{className:"px-6 py-5",children:"Aula"}),(0,a.jsx)("th",{className:"px-6 py-5 text-right",children:"Control"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-800/30",children:ev.map(e=>{var t;return(0,a.jsxs)("tr",{className:"hover:bg-slate-800/20 transition-colors group",children:[(0,a.jsxs)("td",{className:"px-6 py-5 flex items-center gap-4",children:[(0,a.jsx)(C.A,{size:14,className:"text-slate-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-black text-white italic uppercase",children:e.nombre}),(0,a.jsxs)("p",{className:"text-[8px] text-slate-600 uppercase",children:["HWID: ",e.tabletId||"---"]})]})]}),(0,a.jsx)("td",{className:"px-6 py-5 font-black uppercase text-slate-400 italic",children:(null==(t=F.find(t=>t.id===e.aulaId))?void 0:t.nombre_completo)||"N/A"}),(0,a.jsxs)("td",{className:"px-6 py-5 text-right flex gap-2 justify-end",children:[(0,a.jsx)("button",{onClick:()=>Q({isOpen:!0,tabletId:e.tabletId||"",alumnoNombre:e.nombre,text:""}),className:"p-2.5 bg-slate-800 rounded-xl hover:text-blue-400 transition-all",children:(0,a.jsx)(O.A,{size:14})}),(0,a.jsx)("button",{onClick:()=>J({isOpen:!0,tabletId:e.tabletId||"",alumnoNombre:e.nombre}),className:"p-2.5 bg-slate-800 rounded-xl hover:text-orange-500 transition-all",children:(0,a.jsx)(_.A,{size:14})}),(0,a.jsx)("button",{onClick:()=>{ep(e),eb(e.nombre)},className:"p-2.5 bg-slate-800 rounded-xl hover:text-blue-400 transition-all",children:(0,a.jsx)(D.A,{size:14})}),(0,a.jsx)("button",{onClick:()=>ej(e),className:"p-2.5 bg-slate-800 rounded-xl hover:text-red-500 transition-all",children:(0,a.jsx)(T.A,{size:14})})]})]},e.id)})})]})})]})]})})]})]}),B.isOpen&&(0,a.jsx)("div",{className:"fixed inset-0 bg-[#0a0c10]/95 backdrop-blur-md z-[120] flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-[#0f1117] border border-slate-800 rounded-[2.5rem] p-10 w-full max-w-md shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-blue-500 mb-2",children:[(0,a.jsx)(O.A,{size:20}),(0,a.jsxs)("h2",{className:"text-xl font-black italic uppercase text-white",children:["Mensaje ",(0,a.jsx)("span",{className:"text-blue-500 font-light",children:"Directo"})]})]}),(0,a.jsxs)("p",{className:"text-[10px] font-black text-slate-500 uppercase mb-6",children:["Alumno: ",(0,a.jsx)("span",{className:"text-white",children:B.alumnoNombre})]}),(0,a.jsx)("textarea",{placeholder:"ESCRIBA LA ADVERTENCIA O INFRACCI\xd3N...",className:"w-full bg-slate-900 border border-slate-800 p-4 rounded-xl text-white font-bold text-xs uppercase min-h-[120px] outline-none focus:border-blue-500 mb-6",value:B.text,onChange:e=>Q({...B,text:e.target.value})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:eh,disabled:ed||!B.text.trim(),className:"flex-1 bg-blue-600 hover:bg-white hover:text-blue-600 p-5 rounded-xl font-black uppercase text-white text-xs flex items-center justify-center gap-2 transition-all disabled:opacity-20",children:[(0,a.jsx)(M.A,{size:14})," Enviar Alerta"]}),(0,a.jsx)("button",{onClick:()=>Q({...B,isOpen:!1}),className:"p-5 text-[9px] font-black uppercase text-slate-600",children:"Cancelar"})]})]})}),eu&&(0,a.jsx)("div",{className:"fixed inset-0 bg-[#0a0c10]/95 backdrop-blur-md z-[110] flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-[#0f1117] border border-slate-800 rounded-[2.5rem] p-10 w-full max-w-md shadow-2xl",children:[(0,a.jsxs)("h2",{className:"text-2xl font-black italic uppercase text-white mb-8",children:["Editar ",(0,a.jsx)("span",{className:"text-blue-500",children:"Nombre"})]}),(0,a.jsx)("input",{className:"w-full bg-slate-900 border border-slate-800 p-4 rounded-xl text-white font-bold text-xs uppercase",value:em,onChange:e=>eb(e.target.value)}),(0,a.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,a.jsx)("button",{onClick:ef,className:"flex-1 bg-blue-600 p-5 rounded-xl font-black uppercase text-white text-xs",children:"Guardar"}),(0,a.jsx)("button",{onClick:()=>ep(null),className:"p-5 text-[9px] font-black uppercase text-slate-600",children:"Cancelar"})]})]})}),el&&(0,a.jsx)("div",{className:"fixed inset-0 bg-[#0a0c10]/95 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-[#0f1117] border border-slate-800 rounded-[3rem] p-10 w-full max-w-md shadow-2xl",children:[(0,a.jsxs)("h2",{className:"text-3xl font-black italic uppercase text-white mb-8",children:["Nueva ",(0,a.jsx)("span",{className:"text-orange-500",children:"Aula"})]}),(0,a.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),await (0,n.gS)((0,n.rJ)(i.db,"institutions/".concat(e,"/Aulas")),{...ei,status:"published",createdAt:(0,n.O5)(),InstitutoId:e}),er(!1),en({nombre_completo:"",seccion:"",grado:""})},className:"space-y-4",children:[(0,a.jsx)("input",{placeholder:"NOMBRE",className:"w-full bg-slate-900 border border-slate-800 p-4 rounded-xl text-white font-bold text-xs uppercase",value:ei.nombre_completo,onChange:e=>en({...ei,nombre_completo:e.target.value})}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-orange-500 p-5 rounded-xl font-black uppercase text-white text-xs",children:"Desplegar"})]})]})}),(0,a.jsx)(q,{isOpen:H.isOpen,onClose:()=>J({...H,isOpen:!1}),tabletId:H.tabletId,alumnoNombre:H.alumnoNombre})]})}var K=s(12834),W=s(19201),$=s(81598),X=s(42770),Y=s(5320);function ee(){let[e,t]=(0,l.useState)(!1),[s,r]=(0,l.useState)({nombre:"",InstitutoId:"",ubicacion:""}),c=async e=>{if(e.preventDefault(),s.nombre&&s.InstitutoId){t(!0);try{await (0,n.gS)((0,n.rJ)(i.db,"institutions"),{nombre:s.nombre,InstitutoId:s.InstitutoId.toUpperCase().trim(),ubicacion:s.ubicacion,status:"active",createdAt:(0,n.O5)()}),r({nombre:"",InstitutoId:"",ubicacion:""})}catch(e){console.error(e)}finally{t(!1)}}},o="w-full bg-[#1a1d26] border border-slate-800 p-4 rounded-2xl focus:border-orange-500 outline-none font-bold text-slate-200 text-xs transition-all placeholder:text-slate-600";return(0,a.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[8px] font-black uppercase text-slate-500 ml-2 tracking-widest",children:"Nombre de la Sede"}),(0,a.jsx)("input",{required:!0,className:o,value:s.nombre,onChange:e=>r({...s,nombre:e.target.value}),placeholder:"EJ: COLEGIO CENTRAL"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[8px] font-black uppercase text-slate-500 ml-2 tracking-widest",children:"ID Instituto"}),(0,a.jsx)("input",{required:!0,className:o,value:s.InstitutoId,onChange:e=>r({...s,InstitutoId:e.target.value}),placeholder:"CBT-001"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[8px] font-black uppercase text-slate-500 ml-2 tracking-widest",children:"Ubicaci\xf3n"}),(0,a.jsx)("input",{className:o,value:s.ubicacion,onChange:e=>r({...s,ubicacion:e.target.value}),placeholder:"Sede Norte"})]})]}),(0,a.jsxs)("button",{disabled:e,type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-black italic uppercase py-5 rounded-2xl transition-all shadow-lg shadow-orange-500/10 flex items-center justify-center gap-3 text-xs mt-4",children:[e?(0,a.jsx)(L.A,{className:"animate-spin w-4 h-4"}):(0,a.jsx)(k.A,{className:"w-4 h-4"}),"Desplegar Sede"]})]})}var et=s(56177),es=s(33173);function ea(){let[e,t]=(0,l.useState)([]),{setInstitutionId:s}=(0,r.w)(),[c,o]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{let e=(0,n.aQ)((0,n.P)((0,n.rJ)(i.db,"institutions")),e=>{t(e.docs.map(e=>({id:e.id,...e.data()}))),o(!1)});return()=>e()},[]),c)?(0,a.jsx)("div",{className:"text-center py-20 animate-pulse font-black italic text-slate-700 uppercase text-xs",children:"Escaneando Red..."}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(e=>(0,a.jsxs)("div",{className:"bg-[#1a1d26]/50 p-6 rounded-[2.5rem] border border-slate-800 hover:border-orange-500/50 transition-all group",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("div",{className:"bg-slate-900 p-3 rounded-xl border border-slate-800 group-hover:border-orange-500/30 transition-colors",children:(0,a.jsx)(et.A,{className:"w-5 h-5 text-slate-400 group-hover:text-orange-500"})}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-[8px] font-black uppercase text-slate-500 tracking-tighter italic",children:"Online"})]})]}),(0,a.jsx)("h3",{className:"text-lg font-black italic uppercase text-white mb-1 leading-tight",children:e.nombre}),(0,a.jsxs)("p",{className:"text-[9px] font-bold text-slate-600 uppercase italic mb-8 tracking-widest",children:["Access Key: ",e.InstitutoId]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>s(e.InstitutoId),className:"flex-1 bg-white text-black font-black italic uppercase text-[9px] py-3 rounded-xl hover:bg-orange-500 hover:text-white transition-all flex items-center justify-center gap-2",children:["Gestionar ",(0,a.jsx)(es.A,{className:"w-3 h-3"})]}),(0,a.jsx)("button",{className:"bg-slate-900 p-3 rounded-xl text-slate-600 hover:text-red-500 border border-slate-800 transition-all",children:(0,a.jsx)(T.A,{className:"w-4 h-4"})})]})]},e.id))})}var el=s(55590);function er(){var e;let{institutionId:t}=(0,r.w)(),[s,o]=(0,l.useState)("vincular"),[d,u]=(0,l.useState)([]),[p,b]=(0,l.useState)([]),[h,f]=(0,l.useState)([]),[j,N]=(0,l.useState)(""),[w,A]=(0,l.useState)(""),[I,S]=(0,l.useState)(null),[C,E]=(0,l.useState)(!1),[O,_]=(0,l.useState)({instId:"",aulaId:""}),[D,T]=(0,l.useState)(null),[M,z]=(0,l.useState)(""),[R,L]=(0,l.useState)(!1),[P,H]=(0,l.useState)("");(0,l.useEffect)(()=>(0,n.aQ)((0,n.rJ)(i.db,"institutions"),e=>{u(e.docs.map(e=>({id:e.id,...e.data()})))}),[]),(0,l.useEffect)(()=>{if(j)return(0,n.aQ)((0,n.rJ)(i.db,"institutions/".concat(j,"/Aulas")),e=>{b(e.docs.map(e=>({id:e.id,...e.data()})))})},[j]),(0,l.useEffect)(()=>j&&w?(0,n.aQ)((0,n.H9)(i.db,"institutions/".concat(j,"/Aulas"),w),e=>{e.exists()&&S({id:e.id,...e.data()})}):void S(null),[j,w]),(0,l.useEffect)(()=>{let e=w?(0,n.P)((0,n.rJ)(i.db,"dispositivos"),(0,n._M)("aulaId","==",w)):(0,n.P)((0,n.rJ)(i.db,"dispositivos"));return(0,n.aQ)(e,e=>{f(e.docs.map(e=>({id:e.id,...e.data()})))})},[w]),(0,l.useEffect)(()=>{if(!C)return;let e=(0,n.P)((0,n.rJ)(i.db,"dispositivos"),(0,n._M)("status","==","pending_name"),(0,n.My)("createdAt","desc"),(0,n.AB)(1));return(0,n.aQ)(e,e=>{e.empty||T({id:e.docs[0].id,...e.docs[0].data()})})},[C]);let J=async()=>{if(M&&D){L(!0);try{await (0,n.mZ)((0,n.H9)(i.db,"dispositivos",D.id),{status:"active",alumno_asignado:M,InstitutoId:O.instId,aulaId:O.aulaId,lastUpdated:(0,n.O5)(),restrictions:{extremeSecurity:!1}}),T(null),z("")}catch(e){console.error(e)}finally{L(!1)}}},B=async()=>{if(!P||!j||!w)return;let e=(0,n.H9)(i.db,"institutions/".concat(j,"/Aulas"),w);await (0,n.mZ)(e,{blacklistedApps:(0,n.hq)(P.toLowerCase().trim()),lastSecurityUpdate:(0,n.O5)()}),H("")},U=async e=>{let t=(0,n.H9)(i.db,"institutions/".concat(j,"/Aulas"),w);await (0,n.mZ)(t,{blacklistedApps:(0,n.C3)(e)})},F=async(e,t)=>{await (0,n.mZ)((0,n.H9)(i.db,"dispositivos",e),{"restrictions.extremeSecurity":!t,lastUpdated:(0,n.O5)()})},q="w-full bg-[#1a1d26] border border-slate-800 p-4 rounded-xl focus:border-orange-500 outline-none font-bold text-slate-200 text-[10px] uppercase transition-all";return(0,a.jsxs)("div",{className:"min-h-screen bg-[#0a0c10] text-slate-300 font-sans",children:[(0,a.jsxs)("nav",{className:"fixed left-0 top-0 h-full w-20 bg-[#0f1117] border-r border-slate-800/50 flex flex-col items-center py-8 gap-8 z-50",children:[(0,a.jsx)("div",{className:"bg-orange-500 p-3 rounded-2xl shadow-lg shadow-orange-500/20",children:(0,a.jsx)(W.A,{className:"text-white w-6 h-6"})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col gap-6 pt-10",children:[(0,a.jsx)("button",{onClick:()=>o("vincular"),className:"p-3 rounded-xl transition-all ".concat("vincular"===s?"text-orange-500 bg-orange-500/10":"text-slate-600 hover:text-white"),children:(0,a.jsx)(v.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>o("sedes"),className:"p-3 rounded-xl transition-all ".concat("sedes"===s?"text-orange-500 bg-orange-500/10":"text-slate-600 hover:text-white"),children:(0,a.jsx)(g.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>o("usuarios"),className:"p-3 rounded-xl transition-all ".concat("usuarios"===s?"text-orange-500 bg-orange-500/10":"text-slate-600 hover:text-white"),children:(0,a.jsx)(x.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>o("dispositivos"),className:"p-3 rounded-xl transition-all ".concat("dispositivos"===s?"text-orange-500 bg-orange-500/10":"text-slate-600 hover:text-white"),children:(0,a.jsx)(y.A,{className:"w-5 h-5"})})]})]}),(0,a.jsxs)("main",{className:"pl-20",children:[(0,a.jsxs)("header",{className:"sticky top-0 z-40 bg-[#0a0c10]/80 backdrop-blur-md border-b border-slate-800/50 px-10 py-8 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-4xl font-black italic uppercase text-white tracking-tighter",children:["EDU ",(0,a.jsx)("span",{className:"text-orange-500",children:"ControlPro"})]}),(0,a.jsx)("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-[0.4em] mt-1 italic",children:"dispositivos"===s?"Consola de Blindaje Colectivo":"Super Admin Panel"})]}),"dispositivos"===s&&w&&(0,a.jsx)("div",{className:"flex gap-4",children:(0,a.jsxs)("div",{className:"bg-orange-500/10 border border-orange-500/20 px-4 py-2 rounded-xl flex items-center gap-2",children:[(0,a.jsx)($.A,{className:"text-orange-500 w-3 h-3"}),(0,a.jsx)("span",{className:"text-[9px] font-black text-orange-500 uppercase italic",children:"Aula Seleccionada"})]})})]}),(0,a.jsxs)("div",{className:"p-10 max-w-[1700px] mx-auto",children:["dispositivos"===s&&(0,a.jsxs)("div",{className:"space-y-10 animate-in fade-in",children:[(0,a.jsx)("section",{className:"bg-[#0f1117] p-8 rounded-[3rem] border border-slate-800 shadow-2xl",children:(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-8 items-end",children:[(0,a.jsxs)("div",{className:"col-span-12 lg:col-span-3",children:[(0,a.jsx)("label",{className:"text-[9px] font-black text-slate-500 uppercase mb-3 block italic",children:"1. Seleccionar Sede"}),(0,a.jsxs)("select",{className:q,onChange:e=>{N(e.target.value),A("")},children:[(0,a.jsx)("option",{value:"",children:"-- SELECCIONAR INSTITUTO --"}),d.map(e=>(0,a.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,a.jsxs)("div",{className:"col-span-12 lg:col-span-3",children:[(0,a.jsx)("label",{className:"text-[9px] font-black text-slate-500 uppercase mb-3 block italic",children:"2. Seleccionar Aula"}),(0,a.jsxs)("select",{className:q,value:w,onChange:e=>A(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"-- SELECCIONAR AULA --"}),p.map(e=>(0,a.jsx)("option",{value:e.id,children:e.nombre_completo},e.id))]})]}),(0,a.jsx)("div",{className:"col-span-12 lg:col-span-6",children:w?(0,a.jsxs)("div",{className:"bg-black/40 p-6 rounded-3xl border border-orange-500/20",children:[(0,a.jsxs)("p",{className:"text-[9px] font-black text-orange-500 uppercase mb-4 italic flex items-center gap-2",children:[(0,a.jsx)(m.A,{size:12})," Configuraci\xf3n de Apps para toda el Aula"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{value:P,onChange:e=>H(e.target.value),placeholder:"EJ: COM.TIKTOK.ANDROID",className:"flex-1 bg-black border border-slate-800 px-4 py-3 rounded-xl text-[9px] font-bold text-white uppercase outline-none focus:border-orange-500"}),(0,a.jsx)("button",{onClick:B,className:"bg-orange-500 hover:bg-orange-600 text-white p-3 rounded-xl transition-all",children:(0,a.jsx)(k.A,{size:18})})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-4",children:null==I||null==(e=I.blacklistedApps)?void 0:e.map(e=>(0,a.jsxs)("div",{className:"bg-red-500/10 border border-red-500/20 px-3 py-1 rounded-lg flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-[8px] font-bold text-red-500 uppercase italic",children:e}),(0,a.jsx)("button",{onClick:()=>U(e),className:"text-red-900 hover:text-red-500 transition-colors",children:(0,a.jsx)(Q.A,{size:12})})]},e))})]}):(0,a.jsx)("div",{className:"h-[100px] flex items-center justify-center border-2 border-dashed border-slate-800 rounded-3xl",children:(0,a.jsx)("p",{className:"text-[10px] font-black text-slate-600 uppercase italic",children:"Selecciona un aula para gestionar apps colectivamente"})})})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:h.map(e=>{var t,s,l,r,i,n;return(0,a.jsxs)("div",{className:"bg-[#0f1117] rounded-[2.5rem] border ".concat((null==(t=e.restrictions)?void 0:t.extremeSecurity)?"border-red-600/50 shadow-[0_0_40px_rgba(220,38,38,0.15)]":"border-slate-800"," p-0 overflow-hidden transition-all duration-500"),children:[(0,a.jsxs)("div",{className:"p-8 pb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("div",{className:"bg-slate-900 p-3 rounded-2xl border border-slate-800 text-orange-500",children:(0,a.jsx)(X.A,{size:20,className:(null==(s=e.restrictions)?void 0:s.extremeSecurity)?"text-red-500":""})}),(0,a.jsx)("div",{className:"px-3 py-1 rounded-full text-[8px] font-black uppercase italic ".concat((null==(l=e.restrictions)?void 0:l.extremeSecurity)?"bg-red-500 text-white":"bg-green-500/10 text-green-500 border border-green-500/20"),children:(null==(r=e.restrictions)?void 0:r.extremeSecurity)?"Blindaje Activo":"Sistema Libre"})]}),(0,a.jsx)("h3",{className:"text-white font-black text-2xl italic uppercase truncate leading-none",children:e.alumno_asignado||"DISPOSITIVO LIBRE"}),(0,a.jsxs)("p",{className:"text-slate-600 text-[9px] font-mono mt-2 uppercase",children:["ID: ",e.id]})]}),(0,a.jsx)("div",{className:"p-8 pt-0",children:(0,a.jsxs)("button",{onClick:()=>{var t;return F(e.id,!!(null==(t=e.restrictions)?void 0:t.extremeSecurity))},className:"w-full py-5 rounded-2xl font-black uppercase text-[10px] italic border-2 transition-all flex items-center justify-center gap-3 ".concat((null==(i=e.restrictions)?void 0:i.extremeSecurity)?"bg-red-600 border-red-600 text-white shadow-lg shadow-red-900/40 hover:bg-red-700":"bg-transparent border-slate-800 text-slate-500 hover:border-orange-500/50 hover:text-white"),children:[(0,a.jsx)(c.A,{size:16}),(null==(n=e.restrictions)?void 0:n.extremeSecurity)?"Desactivar Blindaje Total":"Activar Blindaje Total"]})})]},e.id)})})]}),"vincular"===s&&(0,a.jsx)("div",{className:"grid grid-cols-12 gap-10 animate-in slide-in-from-bottom-4",children:(0,a.jsx)("div",{className:"col-span-12 lg:col-span-5",children:(0,a.jsxs)("section",{className:"bg-[#0f1117] p-8 rounded-[3rem] border-2 border-orange-500/20 shadow-2xl relative",children:[(0,a.jsxs)("h2",{className:"text-xs font-black uppercase italic text-white flex items-center gap-2 mb-8",children:[(0,a.jsx)(Y.A,{className:"text-orange-500",size:18})," Estaci\xf3n QR"]}),C?(0,a.jsxs)("div",{className:"flex flex-col items-center py-4 text-white",children:[(0,a.jsx)("div",{className:"bg-white p-6 rounded-[2rem] mb-8 border-[12px] border-slate-900 shadow-2xl",children:(0,a.jsx)(K.h,{value:JSON.stringify({InstitutoId:O.instId,aulaId:O.aulaId}),size:220})}),D?(0,a.jsxs)("div",{className:"w-full bg-slate-900 p-6 rounded-3xl border border-orange-500 animate-in zoom-in",children:[(0,a.jsx)("input",{autoFocus:!0,className:q,placeholder:"NOMBRE DEL ALUMNO",value:M,onChange:e=>z(e.target.value)}),(0,a.jsx)("button",{onClick:J,className:"w-full bg-green-600 text-white font-black py-4 rounded-xl text-[10px] mt-4 uppercase italic",children:"Vincular Tablet"})]}):(0,a.jsx)("p",{className:"text-[10px] font-bold text-slate-500 uppercase animate-pulse italic tracking-[0.2em]",children:"Esperando escaneo..."}),(0,a.jsx)("button",{onClick:()=>E(!1),className:"mt-8 text-[9px] font-black text-red-500/50 uppercase tracking-widest",children:"Cerrar Sesi\xf3n"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("select",{className:q,onChange:e=>_({...O,instId:e.target.value}),children:[(0,a.jsx)("option",{value:"",children:"Seleccionar Sede"}),d.map(e=>(0,a.jsx)("option",{value:e.id,children:e.nombre},e.id))]}),(0,a.jsxs)("select",{className:q,onChange:e=>_({...O,aulaId:e.target.value}),children:[(0,a.jsx)("option",{value:"",children:"Seleccionar Aula"}),p.map(e=>(0,a.jsx)("option",{value:e.id,children:e.nombre_completo},e.id))]}),(0,a.jsx)("button",{disabled:!O.instId||!O.aulaId,onClick:()=>E(!0),className:"w-full bg-orange-500 text-white font-black italic uppercase py-5 rounded-2xl transition-all disabled:opacity-30",children:"Activar Estaci\xf3n"})]})]})})}),"sedes"===s&&(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-10",children:[(0,a.jsx)("div",{className:"col-span-12 lg:col-span-5",children:(0,a.jsx)(ee,{})}),(0,a.jsx)("div",{className:"col-span-12 lg:col-span-7",children:(0,a.jsx)(ea,{})})]}),"usuarios"===s&&(0,a.jsx)(el.A,{})]})]})]})}function ei(){let{institutionId:e}=(0,r.w)(),[t,s]=(0,l.useState)(null),[i,n]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{s(localStorage.getItem("userRole")),n(!0)},[]),i)?(0,a.jsx)("main",{children:e?(0,a.jsx)(V,{}):"super-admin"===t?(0,a.jsx)(er,{}):(0,a.jsx)(V,{})}):(0,a.jsx)("div",{className:"min-h-screen bg-[#0a0c10] flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"})})}},44846:(e,t,s)=>{"use strict";s.d(t,{d:()=>n});var a=s(95155),l=s(12115),r=s(27599),i=s(64269);let n=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.bL,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...l,ref:t,children:(0,a.jsx)(r.zi,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});n.displayName=r.bL.displayName},45300:(e,t,s)=>{"use strict";s.d(t,{db:()=>o,j2:()=>c});var a=s(52078),l=s(59253),r=s(19708),i=s(58134);s(13328),s(34491);let n=(0,a.Dk)().length>0?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyACK79dDRclgjFMEUokqpskC1ezyvmO11k",authDomain:"studio-7637044995-2342d.firebaseapp.com",projectId:"studio-7637044995-2342d",storageBucket:"studio-7637044995-2342d.firebasestorage.app",messagingSenderId:"7637044995",appId:"1:7637044995:web:2c6b412952864386927958"}),c=(0,l.xI)(n),o=(0,r.aU)(n);(0,i.c7)(n)},55590:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var a=s(95155),l=s(12115),r=s(45300),i=s(19708),n=s(42997),c=s(92033),o=s(19201);function d(){let[e,t]=(0,l.useState)(!1),[s,d]=(0,l.useState)({nombre:"",email:"",role:"director",InstitutoId:""}),[x,u]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=(0,i.aQ)((0,i.P)((0,i.rJ)(r.db,"institutions")),e=>{u(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>e()},[]);let p=async e=>{if(e.preventDefault(),s.email&&s.InstitutoId){t(!0);try{await (0,i.gS)((0,i.rJ)(r.db,"usuarios"),{nombre:s.nombre,email:s.email.toLowerCase().trim(),role:s.role,InstitutoId:s.InstitutoId,createdAt:new Date}),d({nombre:"",email:"",role:"director",InstitutoId:""}),alert("Usuario creado y vinculado correctamente")}catch(e){console.error("Error:",e),alert("Error al crear usuario")}finally{t(!1)}}},m="w-full bg-[#1a1d26] border border-slate-800 p-4 rounded-xl focus:border-orange-500 outline-none font-bold text-slate-200 text-xs transition-all placeholder:text-slate-600",b="w-full bg-[#1a1d26] border border-slate-800 p-4 rounded-xl focus:border-orange-500 outline-none font-bold text-slate-200 text-xs transition-all appearance-none";return(0,a.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)(n.A,{className:"text-orange-500 w-5 h-5"}),(0,a.jsx)("h3",{className:"text-sm font-black uppercase text-white tracking-widest italic",children:"Nuevo Operador"})]}),(0,a.jsx)("input",{required:!0,className:m,value:s.nombre,onChange:e=>d({...s,nombre:e.target.value}),placeholder:"NOMBRE COMPLETO"}),(0,a.jsx)("input",{required:!0,type:"email",className:m,value:s.email,onChange:e=>d({...s,email:e.target.value}),placeholder:"CORREO ELECTR\xd3NICO"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("select",{className:b,value:s.role,onChange:e=>d({...s,role:e.target.value}),children:[(0,a.jsx)("option",{value:"director",children:"Director"}),(0,a.jsx)("option",{value:"profesor",children:"Profesor"})]}),(0,a.jsxs)("select",{required:!0,className:b,value:s.InstitutoId,onChange:e=>d({...s,InstitutoId:e.target.value}),children:[(0,a.jsx)("option",{value:"",children:"Seleccionar Sede"}),x.map(e=>(0,a.jsxs)("option",{value:e.InstitutoId,children:[e.nombre," (",e.InstitutoId,")"]},e.InstitutoId))]})]}),(0,a.jsxs)("button",{disabled:e,type:"submit",className:"w-full bg-slate-900 hover:bg-orange-500 text-white font-black italic uppercase py-4 rounded-xl transition-all shadow-lg flex items-center justify-center gap-3 text-xs mt-4 border border-slate-800",children:[e?(0,a.jsx)(c.A,{className:"animate-spin w-4 h-4"}):(0,a.jsx)(o.A,{className:"w-4 h-4"}),"Vincular al Sistema"]})]})}},63862:(e,t,s)=>{"use strict";s.d(t,{As:()=>d,Ge:()=>p,Jd:()=>o,db:()=>a.db,jt:()=>x,ri:()=>c,uN:()=>u});var a=s(45300),l=s(13328),r=s(34491),i=s(19708),n=s(59253);let c=async()=>{try{await (0,n.CI)(a.j2),localStorage.removeItem("selectedInstitutionId"),window.location.href="/login"}catch(e){console.error("Error al cerrar sesi\xf3n:",e)}},o=()=>{let[e,t,s]=(0,l.hD)(a.j2);return{user:e,loading:t,error:s}},d=()=>{let[e,t,s]=(0,l.hD)(a.j2);return{user:e,loading:t,error:s,auth:a.j2}},x=()=>a.db,u=r.ZY,p=e=>{if("string"==typeof e&&(!e||e.includes("undefined")||e.includes("null")))return{value:[],loading:!1,error:Error("Ruta de colecci\xf3n inv\xe1lida")};let t="string"==typeof e?(0,i.rJ)(a.db,e):e,[s,l,n]=(0,r.Ar)(t);return{value:s||[],loading:l,error:n}}},64269:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r});var a=s(2821),l=s(75889);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.QP)((0,a.$)(t))}}},e=>{e.O(0,[992,644,363,909,672,856,298,441,255,358],()=>e(e.s=35613)),_N_E=e.O()}]);