(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[41],{20063:(e,t,a)=>{"use strict";var s=a(47260);a.o(s,"redirect")&&a.d(t,{redirect:function(){return s.redirect}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},23074:(e,t,a)=>{Promise.resolve().then(a.bind(a,24558))},24558:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(95155),l=a(12115),r=a(19708),n=a(45300),i=a(34168),o=a(20063),c=a(52619),d=a.n(c);function u(){let{institutionId:e}=(0,i.w)(),[t,a]=(0,l.useState)([]),[c,u]=(0,l.useState)(!0),[x,m]=(0,l.useState)(!1),[p,b]=(0,l.useState)({nombre_completo:"",seccion:"",grado:""});(0,o.useRouter)(),(0,l.useEffect)(()=>{if(!e)return;let t="institutions/".concat(e,"/Aulas"),s=(0,r.rJ)(n.db,t),l=(0,r.aQ)(s,e=>{a(e.docs.map(e=>({id:e.id,...e.data()}))),u(!1)});return()=>l()},[e]);let h=async t=>{if(t.preventDefault(),p.nombre_completo&&e)try{let t="institutions/".concat(e,"/Aulas");await (0,r.gS)((0,r.rJ)(n.db,t),{...p,status:"published",createdAt:(0,r.O5)(),InstitutoId:e}),m(!1),b({nombre_completo:"",seccion:"",grado:""})}catch(e){console.error("Error al crear aula:",e)}};return(0,s.jsxs)("div",{className:"p-8 bg-slate-50 min-h-screen",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-12",children:[(0,s.jsxs)("header",{children:[(0,s.jsxs)("h1",{className:"text-5xl font-black italic uppercase text-slate-900 tracking-tighter",children:["Control de ",(0,s.jsx)("span",{className:"text-orange-500",children:"Aulas"})]}),(0,s.jsxs)("p",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-[0.3em] mt-3 italic",children:["EDU ServControlPro • ",e]})]}),(0,s.jsx)("button",{onClick:()=>m(!0),className:"bg-orange-500 hover:bg-slate-900 text-white px-8 py-4 rounded-2xl font-black uppercase italic text-xs transition-all shadow-lg shadow-orange-200",children:"+ Nueva Aula"})]}),c?(0,s.jsx)("div",{className:"font-black italic text-slate-300 uppercase animate-pulse",children:"Cargando..."}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map(e=>(0,s.jsxs)("div",{className:"bg-white p-8 rounded-[3rem] border-2 border-slate-100 shadow-sm hover:border-orange-500 transition-all group",children:[(0,s.jsx)("span",{className:"text-[9px] font-black text-orange-500 uppercase tracking-widest bg-orange-50 px-3 py-1 rounded-full mb-4 inline-block italic",children:e.status||"Publicado"}),(0,s.jsx)("h3",{className:"text-2xl font-black italic uppercase text-slate-800 leading-tight mb-2",children:e.nombre_completo}),(0,s.jsxs)("p",{className:"text-slate-400 font-bold uppercase text-[10px] mb-6 italic",children:["Secci\xf3n: ",e.seccion," • Grado: ",e.grado]}),(0,s.jsx)(d(),{href:"/dashboard/classrooms/view?id=".concat(e.id),className:"inline-flex items-center justify-center w-full bg-slate-900 text-white py-4 rounded-2xl font-black uppercase italic text-xs",children:"Ver Dispositivos →"})]},e.id))}),x&&(0,s.jsx)("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-[3rem] p-10 w-full max-w-md shadow-2xl",children:[(0,s.jsxs)("h2",{className:"text-3xl font-black italic uppercase mb-6 text-slate-900",children:["Registrar ",(0,s.jsx)("span",{className:"text-orange-500",children:"Aula"})]}),(0,s.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,s.jsx)("input",{placeholder:"NOMBRE COMPLETO",className:"w-full p-4 bg-slate-50 rounded-xl border-none font-bold text-sm text-slate-900",value:p.nombre_completo,onChange:e=>b({...p,nombre_completo:e.target.value})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)("input",{placeholder:"SECCI\xd3N",className:"w-full p-4 bg-slate-50 rounded-xl border-none font-bold text-sm text-slate-900",value:p.seccion,onChange:e=>b({...p,seccion:e.target.value})}),(0,s.jsx)("input",{placeholder:"GRADO",className:"w-full p-4 bg-slate-50 rounded-xl border-none font-bold text-sm text-slate-900",value:p.grado,onChange:e=>b({...p,grado:e.target.value})})]}),(0,s.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,s.jsx)("button",{type:"button",onClick:()=>m(!1),className:"flex-1 font-black uppercase italic text-xs text-slate-400",children:"Cancelar"}),(0,s.jsx)("button",{type:"submit",className:"flex-1 bg-orange-500 text-white p-4 rounded-xl font-black uppercase italic text-xs",children:"Guardar"})]})]})]})})]})}},34168:(e,t,a)=>{"use strict";a.d(t,{C:()=>o,w:()=>c});var s=a(95155),l=a(12115),r=a(45300),n=a(19708);let i=(0,l.createContext)({institutionId:null,setInstitutionId:()=>{},userRole:null}),o=e=>{let{children:t}=e,[a,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let e=async()=>{let e=r.j2.currentUser;if(!e)return;if("vallecondo@gmail.com"===e.email)return void d("super-admin");let t=(0,n.P)((0,n.rJ)(r.db,"usuarios"),(0,n._M)("email","==",e.email)),a=await (0,n.GG)(t);if(!a.empty){let e=a.docs[0].data();d(e.role),o(e.InstitutoId)}},t=r.j2.onAuthStateChanged(()=>e());return()=>t()},[]),(0,s.jsx)(i.Provider,{value:{institutionId:a,setInstitutionId:o,userRole:c},children:t})},c=()=>(0,l.useContext)(i)},45300:(e,t,a)=>{"use strict";a.d(t,{db:()=>c,j2:()=>o});var s=a(52078),l=a(59253),r=a(19708),n=a(58134);a(13328),a(34491);let i=(0,s.Dk)().length>0?(0,s.Sx)():(0,s.Wp)({apiKey:"AIzaSyACK79dDRclgjFMEUokqpskC1ezyvmO11k",authDomain:"studio-7637044995-2342d.firebaseapp.com",projectId:"studio-7637044995-2342d",storageBucket:"studio-7637044995-2342d.firebasestorage.app",messagingSenderId:"7637044995",appId:"1:7637044995:web:2c6b412952864386927958"}),o=(0,l.xI)(i),c=(0,r.aU)(i);(0,n.c7)(i)}},e=>{e.O(0,[992,644,363,619,441,255,358],()=>e(e.s=23074)),_N_E=e.O()}]);