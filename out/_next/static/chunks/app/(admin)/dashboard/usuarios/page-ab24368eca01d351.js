(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6704],{13727:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(95155),r=a(12115),l=a(45300),o=a(19708),n=a(59253),i=a(34168),c=a(20063);function d(){var e;let{institutionId:t}=(0,i.w)(),a=(0,c.useRouter)(),[d,u]=(0,r.useState)(""),[p,x]=(0,r.useState)(""),[m,b]=(0,r.useState)(""),[h,g]=(0,r.useState)("profesor"),[f,v]=(0,r.useState)(!1),[j,N]=(0,r.useState)({tipo:"",texto:""}),w=(null==(e=l.j2.currentUser)?void 0:e.email)==="vallecondo@gmail.com",k=async e=>{e.preventDefault(),v(!0),N({tipo:"",texto:""});try{let e=(await (0,n.eJ)(l.j2,d,p)).user;await (0,o.BN)((0,o.H9)(l.db,"users",e.uid),{uid:e.uid,nombre:m,email:d,rol:w?h:"profesor",InstitutoId:t,fechaRegistro:new Date().toISOString()}),N({tipo:"exito",texto:"\xa1Perfecto! El ".concat(h," ha sido registrado.")}),u(""),x(""),b("")}catch(e){N({tipo:"error",texto:"Error: "+e.message})}finally{v(!1)}};return(0,s.jsxs)("div",{className:"p-8 bg-slate-50 min-h-screen",children:[(0,s.jsxs)("button",{onClick:()=>a.back(),className:"mb-8 flex items-center gap-3 text-slate-400 hover:text-orange-500 font-black uppercase text-[10px] tracking-widest transition-all group",children:[(0,s.jsx)("span",{className:"bg-white h-10 w-10 flex items-center justify-center rounded-full shadow-sm group-hover:shadow-orange-200 group-hover:scale-110 transition-all text-lg font-bold",children:"â†"}),"Volver"]}),(0,s.jsxs)("div",{className:"max-w-2xl bg-white p-10 rounded-[3rem] border-2 border-slate-100 shadow-xl mx-auto",children:[(0,s.jsxs)("header",{className:"mb-8",children:[(0,s.jsxs)("h1",{className:"text-4xl font-black italic uppercase text-slate-900 tracking-tighter leading-none",children:["Registro de ",(0,s.jsx)("span",{className:"text-orange-500",children:"Personal"})]}),(0,s.jsx)("p",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-widest mt-2",children:w?"Panel de Super Admin":"Gesti\xf3n de Instituto: ".concat(t)})]}),(0,s.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-[10px] font-black uppercase text-slate-400 ml-2",children:"Nombre Completo"}),(0,s.jsx)("input",{required:!0,className:"w-full bg-slate-50 border-2 border-slate-100 p-4 rounded-2xl focus:border-orange-500 outline-none font-bold text-slate-700 transition-colors",value:m,onChange:e=>b(e.target.value),placeholder:"Nombre del docente"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-[10px] font-black uppercase text-slate-400 ml-2",children:"Cargo / Rol"}),(0,s.jsxs)("select",{disabled:!w,className:"w-full bg-slate-100 border-2 border-slate-100 p-4 rounded-2xl outline-none font-black italic uppercase text-sm text-slate-800 cursor-pointer disabled:opacity-70",value:h,onChange:e=>g(e.target.value),children:[(0,s.jsx)("option",{value:"profesor",children:"Profesor (Monitor)"}),(0,s.jsx)("option",{value:"director",children:"Director (Administrador)"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-[10px] font-black uppercase text-slate-400 ml-2",children:"Email Institucional"}),(0,s.jsx)("input",{required:!0,type:"email",className:"w-full bg-slate-50 border-2 border-slate-100 p-4 rounded-2xl focus:border-orange-500 outline-none font-bold text-slate-700",value:d,onChange:e=>u(e.target.value),placeholder:"correo@ejemplo.com"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-[10px] font-black uppercase text-slate-400 ml-2",children:"Contrase\xf1a de acceso"}),(0,s.jsx)("input",{required:!0,type:"password",className:"w-full bg-slate-50 border-2 border-slate-100 p-4 rounded-2xl focus:border-orange-500 outline-none font-bold text-slate-700",value:p,onChange:e=>x(e.target.value),placeholder:"M\xednimo 6 caracteres"})]}),j.texto&&(0,s.jsx)("div",{className:"p-4 rounded-2xl font-bold text-sm text-center animate-pulse ".concat("exito"===j.tipo?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:j.texto}),(0,s.jsx)("button",{disabled:f,className:"w-full bg-slate-900 hover:bg-orange-500 text-white font-black italic uppercase py-5 rounded-[2rem] transition-all shadow-lg active:scale-95 disabled:opacity-50",children:f?"Sincronizando...":"Dar de alta en el sistema"})]})]})]})}},20063:(e,t,a)=>{"use strict";var s=a(47260);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},34168:(e,t,a)=>{"use strict";a.d(t,{C:()=>i,w:()=>c});var s=a(95155),r=a(12115),l=a(45300),o=a(19708);let n=(0,r.createContext)({institutionId:null,setInstitutionId:()=>{},userRole:null}),i=e=>{let{children:t}=e,[a,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=async()=>{let e=l.j2.currentUser;if(!e)return;if("vallecondo@gmail.com"===e.email)return void d("super-admin");let t=(0,o.P)((0,o.rJ)(l.db,"usuarios"),(0,o._M)("email","==",e.email)),a=await (0,o.GG)(t);if(!a.empty){let e=a.docs[0].data();d(e.role),i(e.InstitutoId)}},t=l.j2.onAuthStateChanged(()=>e());return()=>t()},[]),(0,s.jsx)(n.Provider,{value:{institutionId:a,setInstitutionId:i,userRole:c},children:t})},c=()=>(0,r.useContext)(n)},39053:(e,t,a)=>{Promise.resolve().then(a.bind(a,13727))},45300:(e,t,a)=>{"use strict";a.d(t,{db:()=>c,j2:()=>i});var s=a(52078),r=a(19708),l=a(59253),o=a(58134);let n=(0,s.Dk)().length>0?(0,s.Sx)():(0,s.Wp)({apiKey:"AIzaSyACK79dDRclgjFMEUokqpskC1ezyvmO11k",authDomain:"studio-7637044995-2342d.firebaseapp.com",projectId:"studio-7637044995-2342d",storageBucket:"studio-7637044995-2342d.firebasestorage.app",messagingSenderId:"7637044995",appId:"1:7637044995:web:2c6b412952864386927958"}),i=(0,l.xI)(n),c=(0,r.aU)(n);(0,o.c7)(n)}},e=>{e.O(0,[2992,3644,3947,8441,1255,7358],()=>e(e.s=39053)),_N_E=e.O()}]);