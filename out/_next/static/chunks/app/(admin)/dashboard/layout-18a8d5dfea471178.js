(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{14294:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(12115);let s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...h}=e;return(0,a.createElement)("svg",{ref:t,...l,width:i,height:i,stroke:r,strokeWidth:o?24*Number(n)/Number(i):n,className:s("lucide",c),...h},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),n=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:n,...o}=r;return(0,a.createElement)(i,{ref:l,iconNode:t,className:s("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),n),...o})});return r.displayName="".concat(e),r}},19201:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(14294).A)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},20063:(e,t,r)=>{"use strict";var a=r(47260);r.o(a,"redirect")&&r.d(t,{redirect:function(){return a.redirect}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},31012:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var a=r(95155),s=r(12115),l=r(19201),i=r(14294);let n=(0,i.A)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var o=r(56177),c=r(45444);let d=(0,i.A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var u=r(98428),h=r(52619),x=r.n(h),p=r(20063),m=r(63862),f=r(64269);function g(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,f.cn)("animate-pulse rounded-md bg-muted",t),...r})}var v=r(34168);let w=JSON.parse('{"o":[{"id":"user-avatar","description":"User avatar placeholder","imageUrl":"https://images.unsplash.com/photo-1704726135027-9c6f034cfa41?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwxfHxhdmF0YXIlMjB1c2VyfGVufDB8fHx8MTc3MDQ5Mjk5Mnww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"avatar user"},{"id":"qr-code","description":"QR code placeholder","imageUrl":"https://images.unsplash.com/photo-1662383729882-e03ce8e00887?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw2fHxxciUyMGNvZGV8ZW58MHx8fHwxNzcwNDMwNzM4fDA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"qr code"},{"id":"efas-logo","description":"EFAS ServiControlPro Logo","imageUrl":"https://storage.googleapis.com/gweb-aip-dev.appspot.com/work-storage/2h3XJ-i-PjJ9mQ0YV9T-bA","imageHint":"efas logo"}]}').o,b=()=>{let e=(0,p.usePathname)(),t=(0,p.useRouter)(),{user:r}=(0,m.Jd)(),{installApp:i,isInstallable:h,isStandalone:f}=function(){let[e,t]=(0,s.useState)(null),[r,a]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{window.matchMedia("(display-mode: standalone)").matches&&a(!0);let e=e=>{e.preventDefault(),t(e)};window.addEventListener("beforeinstallprompt",e);let r=()=>{t(null)};return window.addEventListener("appinstalled",r),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",r)}},[]),{installApp:async()=>{if(!e)return;e.prompt();let{outcome:r}=await e.userChoice;"accepted"===r&&t(null)},isInstallable:!!e&&!r,isStandalone:r}}();return w.find(e=>"efas-logo"===e.id),(0,a.jsx)("nav",{className:"border-b border-white/5 bg-[#0a0c10]/80 backdrop-blur-md sticky top-0 z-[50]",children:(0,a.jsxs)("div",{className:"max-w-[1600px] mx-auto px-6 h-20 flex items-center justify-between",children:[(0,a.jsxs)(x(),{href:"/dashboard",className:"flex items-center gap-3 group",children:[(0,a.jsx)("div",{className:"bg-orange-600 p-2 rounded-xl shadow-[0_0_15px_rgba(234,88,12,0.3)] group-hover:scale-105 transition-transform",children:(0,a.jsx)(l.A,{className:"text-white w-6 h-6"})}),(0,a.jsxs)("div",{className:"hidden sm:block",children:[(0,a.jsxs)("h1",{className:"text-white font-black italic uppercase tracking-tighter text-lg leading-none",children:["EFAS ",(0,a.jsx)("span",{className:"text-orange-500",children:"ServiControlPro"})]}),(0,a.jsx)("p",{className:"text-[8px] text-slate-500 font-bold uppercase tracking-[0.3em]",children:"Institutional Security"})]})]}),(0,a.jsxs)("div",{className:"hidden lg:flex items-center gap-8",children:[(0,a.jsxs)(x(),{href:"/dashboard",className:"text-[11px] font-black uppercase italic flex items-center gap-2 transition-colors ".concat("/dashboard"===e?"text-orange-500":"text-slate-400 hover:text-white"),children:[(0,a.jsx)(n,{className:"w-4 h-4"})," Dashboard"]}),(0,a.jsxs)(x(),{href:"/dashboard/classrooms",className:"text-[11px] font-black uppercase italic flex items-center gap-2 transition-colors ".concat(e.includes("classrooms")?"text-orange-500":"text-slate-400 hover:text-white"),children:[(0,a.jsx)(o.A,{className:"w-4 h-4"})," Aulas"]}),(0,a.jsxs)(x(),{href:"/institutions",className:"text-[11px] font-black uppercase italic flex items-center gap-2 transition-colors ".concat(e.includes("institutions")?"text-orange-500":"text-slate-400 hover:text-white"),children:[(0,a.jsx)(c.A,{className:"w-4 h-4"})," Instituciones"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[h&&!f&&(0,a.jsxs)("button",{onClick:i,className:"hidden md:flex items-center gap-2 bg-orange-500/10 hover:bg-orange-500 text-orange-500 hover:text-white border border-orange-500/20 px-4 py-2 rounded-xl text-[10px] font-black uppercase transition-all",children:[(0,a.jsx)(d,{className:"w-3 h-3"})," Instalar App"]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 border-l border-white/10 pl-6",children:[(0,a.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-white uppercase italic",children:null==r?void 0:r.email}),(0,a.jsx)("p",{className:"text-[8px] font-bold text-orange-500 uppercase tracking-widest",children:"Super Admin"})]}),(0,a.jsx)("button",{onClick:()=>{localStorage.clear(),t.push("/login")},className:"bg-white/5 hover:bg-red-500/10 p-3 rounded-xl border border-white/5 hover:border-red-500/20 transition-all group",title:"Cerrar Sesi\xf3n",children:(0,a.jsx)(u.A,{className:"w-4 h-4 text-slate-500 group-hover:text-red-500"})})]})]})]})})};function y(){return(0,a.jsxs)("div",{className:"min-h-screen bg-[#0a0c10] flex flex-col",children:[(0,a.jsx)("div",{className:"h-20 border-b border-white/5 flex items-center px-6",children:(0,a.jsx)(g,{className:"h-8 w-48 bg-white/5"})}),(0,a.jsx)("div",{className:"flex-1 p-8",children:(0,a.jsx)(g,{className:"h-full w-full bg-white/5 rounded-3xl"})})]})}function j(e){let{children:t}=e,{user:r,loading:l}=(0,m.Jd)(),i=(0,p.usePathname)(),n=(0,p.useSearchParams)();return((0,s.useEffect)(()=>{if(!l&&!r){let e="".concat(i).concat(n.toString()?"?".concat(n.toString()):"");(0,p.redirect)("/login?redirect=".concat(encodeURIComponent(e)))}},[r,l,i,n]),l)?(0,a.jsx)(y,{}):r?(0,a.jsx)(v.C,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-[#0a0c10] flex flex-col font-sans",children:[(0,a.jsx)(b,{}),(0,a.jsx)("main",{className:"flex-1 w-full max-w-[1600px] mx-auto p-6 md:p-8 overflow-y-auto",children:t}),(0,a.jsx)("footer",{className:"py-8 border-t border-white/5 text-center bg-[#0a0c10]",children:(0,a.jsx)("p",{className:"text-[9px] text-slate-600 font-black uppercase tracking-[0.5em]",children:"EFAS ServiControlPro \xa9 2026 â€¢ Security Infrastructure"})})]})}):null}function k(e){let{children:t}=e;return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)(y,{}),children:(0,a.jsx)(j,{children:t})})}},34168:(e,t,r)=>{"use strict";r.d(t,{C:()=>o,w:()=>c});var a=r(95155),s=r(12115),l=r(45300),i=r(19708);let n=(0,s.createContext)({institutionId:null,setInstitutionId:()=>{},userRole:null}),o=e=>{let{children:t}=e,[r,o]=(0,s.useState)(null),[c,d]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=async()=>{let e=l.j2.currentUser;if(!e)return;if("vallecondo@gmail.com"===e.email)return void d("super-admin");let t=(0,i.P)((0,i.rJ)(l.db,"usuarios"),(0,i._M)("email","==",e.email)),r=await (0,i.GG)(t);if(!r.empty){let e=r.docs[0].data();d(e.role),o(e.InstitutoId)}},t=l.j2.onAuthStateChanged(()=>e());return()=>t()},[]),(0,a.jsx)(n.Provider,{value:{institutionId:r,setInstitutionId:o,userRole:c},children:t})},c=()=>(0,s.useContext)(n)},34228:(e,t,r)=>{Promise.resolve().then(r.bind(r,31012))},45300:(e,t,r)=>{"use strict";r.d(t,{db:()=>c,j2:()=>o});var a=r(52078),s=r(59253),l=r(19708),i=r(58134);r(13328),r(34491);let n=(0,a.Dk)().length>0?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyACK79dDRclgjFMEUokqpskC1ezyvmO11k",authDomain:"studio-7637044995-2342d.firebaseapp.com",projectId:"studio-7637044995-2342d",storageBucket:"studio-7637044995-2342d.firebasestorage.app",messagingSenderId:"7637044995",appId:"1:7637044995:web:2c6b412952864386927958"}),o=(0,s.xI)(n),c=(0,l.aU)(n);(0,i.c7)(n)},45444:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(14294).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},56177:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(14294).A)("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]])},63862:(e,t,r)=>{"use strict";r.d(t,{As:()=>d,Ge:()=>x,Jd:()=>c,db:()=>a.db,jt:()=>u,ri:()=>o,uN:()=>h});var a=r(45300),s=r(13328),l=r(34491),i=r(19708),n=r(59253);let o=async()=>{try{await (0,n.CI)(a.j2),localStorage.removeItem("selectedInstitutionId"),window.location.href="/login"}catch(e){console.error("Error al cerrar sesi\xf3n:",e)}},c=()=>{let[e,t,r]=(0,s.hD)(a.j2);return{user:e,loading:t,error:r}},d=()=>{let[e,t,r]=(0,s.hD)(a.j2);return{user:e,loading:t,error:r,auth:a.j2}},u=()=>a.db,h=l.ZY,x=e=>{if("string"==typeof e&&(!e||e.includes("undefined")||e.includes("null")))return{value:[],loading:!1,error:Error("Ruta de colecci\xf3n inv\xe1lida")};let t="string"==typeof e?(0,i.rJ)(a.db,e):e,[r,s,n]=(0,l.Ar)(t);return{value:r||[],loading:s,error:n}}},64269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var a=r(2821),s=r(75889);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},98428:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(14294).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])}},e=>{e.O(0,[992,644,363,909,619,441,255,358],()=>e(e.s=34228)),_N_E=e.O()}]);