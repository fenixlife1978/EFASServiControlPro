(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5879],{14294:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(12115);let r=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:m,...x}=e;return(0,s.createElement)("svg",{ref:t,...i,width:l,height:l,stroke:a,strokeWidth:c?24*Number(n)/Number(l):n,className:r("lucide",o),...x},[...m.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),n=(e,t)=>{let a=(0,s.forwardRef)((a,i)=>{let{className:n,...c}=a;return(0,s.createElement)(l,{ref:i,iconNode:t,className:r("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),n),...c})});return a.displayName="".concat(e),a}},15039:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(14294).A)("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]])},34865:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(95155),r=a(12115),i=a(19708),l=a(45300),n=a(32587),c=a(25011),o=a(92033),d=a(97965),m=a(5320);let x=(0,a(14294).A)("BellRing",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]]);var p=a(15039);let u=(0,n.F3)("DeviceControl"),h=[{id:1,nombre:"Matem\xe1ticas",icon:"\uD83E\uDDEE"},{id:2,nombre:"Diccionario",icon:"\uD83D\uDCD6"},{id:3,nombre:"Navegador",icon:"\uD83C\uDF10"},{id:4,nombre:"C\xe1mara",icon:"\uD83D\uDCF8"}];function b(){let[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(null),[b,g]=(0,r.useState)(!0),[f,j]=(0,r.useState)(!1),[v,w]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("efas_device_id");e?N(e):g(!1)},[]);let N=e=>(t(!0),(0,i.aQ)((0,i.H9)(l.db,"dispositivos",e),e=>{if(e.exists()){let t=e.data();if(n(t),j(!0===t.comando_bloqueo),t.mensaje_alerta&&t.mensaje_alerta!==v&&w(t.mensaje_alerta),!0===t.comando_bloqueo)try{u.lockDevice()}catch(e){}}g(!1)})),k=async()=>{try{var e;if(!(null==(e=window.Capacitor)?void 0:e.isNativePlatform())){let e=prompt("Simulaci\xf3n: Pega el JSON del QR:");e&&y(e);return}let t=await c.vi.requestPermissions();if("granted"!==t.camera)return alert("Permiso de c\xe1mara denegado");let{barcodes:a}=await c.vi.scan();a.length>0&&y(a[0].displayValue)}catch(e){console.error(e),alert("Error al activar esc\xe1ner")}},y=async e=>{try{let t=JSON.parse(e);if("link_device"===t.action||"enroll"===t.action){g(!0);let e="DEV-".concat(Math.random().toString(36).substr(2,6).toUpperCase());await (0,i.BN)((0,i.H9)(l.db,"dispositivos",e),{id:e,InstitutoId:t.inst||t.InstitutoId,aulaId:t.aula||t.aulaId,status:"pending_name",alumno_asignado:"Esperando nombre...",comando_bloqueo:!1,mensaje_alerta:null,createdAt:(0,i.O5)(),lastConnection:(0,i.O5)()}),localStorage.setItem("efas_device_id",e),N(e)}}catch(e){alert("QR no v\xe1lido para EDU"),g(!1)}};return b?(0,s.jsx)("div",{className:"min-h-screen bg-[#0a0c10] flex items-center justify-center text-white",children:(0,s.jsx)(o.A,{className:"animate-spin text-orange-500"})}):e?(0,s.jsxs)("div",{className:"min-h-screen bg-[#0a0c10] text-white p-8 font-sans",children:[(0,s.jsxs)("header",{className:"mb-12 flex justify-between items-center bg-[#11141d] p-6 rounded-[2.5rem] border border-white/5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-black italic uppercase text-orange-500 leading-none",children:"EDU"}),(0,s.jsx)("p",{className:"text-[8px] font-bold text-slate-500 uppercase",children:"ServControlPro"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-[10px] font-black uppercase italic text-white",children:null==a?void 0:a.alumno_asignado}),(0,s.jsx)("p",{className:"text-[8px] font-bold text-green-500 uppercase",children:"Conectado"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-6",children:h.map(e=>(0,s.jsxs)("button",{className:"flex flex-col items-center p-12 bg-[#11141d] border border-white/5 rounded-[3rem] active:scale-95 transition-all",children:[(0,s.jsx)("span",{className:"text-6xl mb-4",children:e.icon}),(0,s.jsx)("span",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:e.nombre})]},e.id))}),v&&(0,s.jsx)("div",{className:"fixed inset-0 bg-slate-950/95 backdrop-blur-md z-50 flex items-center justify-center p-6",children:(0,s.jsxs)("div",{className:"bg-white p-10 rounded-[3rem] text-center max-w-sm border-b-8 border-orange-500",children:[(0,s.jsx)(x,{className:"w-12 h-12 text-orange-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-xl font-bold text-slate-900 mb-6 uppercase italic",children:v}),(0,s.jsx)("button",{onClick:()=>w(null),className:"bg-slate-900 text-white px-8 py-3 rounded-full font-black uppercase text-xs",children:"Entendido"})]})}),f&&(0,s.jsxs)("div",{className:"fixed inset-0 bg-red-600 z-[100] flex flex-col items-center justify-center text-white p-10",children:[(0,s.jsx)(p.A,{className:"w-24 h-24 mb-4 animate-pulse"}),(0,s.jsx)("h1",{className:"text-5xl font-black uppercase italic tracking-tighter",children:"Acceso Restringido"}),(0,s.jsx)("p",{className:"text-sm font-bold uppercase mt-4 opacity-80 text-center",children:"Este dispositivo ha sido bloqueado por el administrador"})]})]}):(0,s.jsx)("div",{className:"min-h-screen bg-[#0a0c10] flex items-center justify-center p-6 text-white",children:(0,s.jsxs)("div",{className:"max-w-md w-full text-center space-y-8",children:[(0,s.jsx)("div",{className:"bg-orange-500/10 p-8 rounded-[2.5rem] w-32 h-32 mx-auto flex items-center justify-center border border-orange-500/20 shadow-2xl",children:(0,s.jsx)(d.A,{className:"w-16 h-16 text-orange-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-4xl font-black italic uppercase tracking-tighter",children:["Efas ",(0,s.jsx)("span",{className:"text-orange-500",children:"Guardian"})]}),(0,s.jsx)("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mt-2",children:"Dispositivo no vinculado"})]}),(0,s.jsxs)("button",{onClick:k,className:"w-full bg-orange-500 text-white py-6 rounded-[2rem] font-black uppercase italic flex items-center justify-center gap-3 shadow-lg shadow-orange-500/20 hover:scale-105 transition-all",children:[(0,s.jsx)(m.A,{})," Iniciar Vinculaci\xf3n"]})]})})}},45300:(e,t,a)=>{"use strict";a.d(t,{db:()=>o,j2:()=>c});var s=a(52078),r=a(59253),i=a(19708),l=a(58134);a(13328),a(34491);let n=(0,s.Dk)().length>0?(0,s.Sx)():(0,s.Wp)({apiKey:"AIzaSyACK79dDRclgjFMEUokqpskC1ezyvmO11k",authDomain:"studio-7637044995-2342d.firebaseapp.com",projectId:"studio-7637044995-2342d",storageBucket:"studio-7637044995-2342d.firebasestorage.app",messagingSenderId:"7637044995",appId:"1:7637044995:web:2c6b412952864386927958"}),c=(0,r.xI)(n),o=(0,i.aU)(n);(0,l.c7)(n)},54896:(e,t,a)=>{Promise.resolve().then(a.bind(a,34865))},97965:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(14294).A)("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]])}},e=>{e.O(0,[2992,3644,2363,1154,8441,1255,7358],()=>e(e.s=54896)),_N_E=e.O()}]);