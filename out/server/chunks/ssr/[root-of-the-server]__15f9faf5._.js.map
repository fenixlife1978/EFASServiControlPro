{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/firebase/config.ts"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\nimport { getStorage } from \"firebase/storage\"; // <--- Agregado para arreglar el error\n\n// 1. Invocamos las llaves desde tus variables de entorno (Protegidas)\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID\n};\n\n// 2. Función para detectar si el usuario eligió Local o Nube\nexport const getDbMode = () => {\n  if (typeof window !== \"undefined\") {\n    // Si no hay nada guardado, por defecto usamos la nube (Firebase)\n    return localStorage.getItem(\"edu_db_mode\") || \"cloud\"; \n  }\n  return \"cloud\";\n};\n\n// 3. Función para obtener la dirección del Servidor de la Escuela\nexport const getLocalServerUrl = () => {\n  if (typeof window !== \"undefined\") {\n    return localStorage.getItem(\"edu_local_url\") || \"http://localhost:5000\";\n  }\n  return \"http://localhost:5000\";\n};\n\n// Inicializamos Firebase\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst storage = getStorage(app); // <--- Agregado para arreglar el error\n\nexport { db, auth, storage }; // <--- Exportamos storage también"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA,+RAA+C,uCAAuC;AAAtF;;;;;AAEA,sEAAsE;AACtE,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAGO,MAAM,YAAY;IACvB;;IAIA,OAAO;AACT;AAGO,MAAM,oBAAoB;IAC/B;;IAGA,OAAO;AACT;AAEA,yBAAyB;AACzB,MAAM,MAAM,IAAA,qLAAa,EAAC;AAC1B,MAAM,OAAO,IAAA,yMAAO,EAAC;AACrB,MAAM,KAAK,IAAA,iLAAY,EAAC;AACxB,MAAM,UAAU,IAAA,kMAAU,EAAC,MAAM,uCAAuC;;CAE1C,kCAAkC","debugId":null}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/security/LockListener.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { db } from '@/firebase/config';\nimport { doc, onSnapshot } from 'firebase/firestore';\nimport { Lock } from 'lucide-react';\n\nexport default function LockListener() {\n  const [isLocked, setIsLocked] = useState(false);\n  const [deviceId, setDeviceId] = useState<string | null>(null);\n\n  useEffect(() => {\n    // Recuperamos el ID que vinculamos con el QR desde el localStorage\n    const savedId = localStorage.getItem('EDU_Device_ID');\n    if (savedId) setDeviceId(savedId);\n  }, []);\n\n  useEffect(() => {\n    if (!deviceId) return;\n\n    // Escuchamos directamente el documento del dispositivo vinculado\n    const unsub = onSnapshot(doc(db, \"usuarios\", deviceId), (docSnap) => {\n      if (docSnap.exists()) {\n        const data = docSnap.data();\n        setIsLocked(data.bloqueado === true);\n      }\n    });\n\n    return () => unsub();\n  }, [deviceId]);\n\n  if (!isLocked) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-[999999] bg-[#0f1117] flex flex-col items-center justify-center p-6 text-center\">\n      <div className=\"bg-red-500/10 border-2 border-red-500/50 p-10 rounded-[3rem] backdrop-blur-xl mb-8\">\n        <Lock size={100} className=\"text-red-500 animate-pulse\" />\n      </div>\n      <h1 className=\"text-4xl font-black text-white uppercase italic tracking-tighter\">\n        ACCESO <span className=\"text-red-500\">RESTRINGIDO</span>\n      </h1>\n      <p className=\"text-slate-500 font-bold uppercase text-[10px] tracking-widest mt-4\">\n        SISTEMA DE CONTROL EDU SERVICONTROLPRO\n      </p>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAgB;IAExD,IAAA,kNAAS,EAAC;QACR,mEAAmE;QACnE,MAAM,UAAU,aAAa,OAAO,CAAC;QACrC,IAAI,SAAS,YAAY;IAC3B,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,UAAU;QAEf,iEAAiE;QACjE,MAAM,QAAQ,IAAA,+KAAU,EAAC,IAAA,wKAAG,EAAC,+HAAE,EAAE,YAAY,WAAW,CAAC;YACvD,IAAI,QAAQ,MAAM,IAAI;gBACpB,MAAM,OAAO,QAAQ,IAAI;gBACzB,YAAY,KAAK,SAAS,KAAK;YACjC;QACF;QAEA,OAAO,IAAM;IACf,GAAG;QAAC;KAAS;IAEb,IAAI,CAAC,UAAU,OAAO;IAEtB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,0MAAI;oBAAC,MAAM;oBAAK,WAAU;;;;;;;;;;;0BAE7B,8OAAC;gBAAG,WAAU;;oBAAmE;kCACxE,8OAAC;wBAAK,WAAU;kCAAe;;;;;;;;;;;;0BAExC,8OAAC;gBAAE,WAAU;0BAAsE;;;;;;;;;;;;AAKzF","debugId":null}}]
}