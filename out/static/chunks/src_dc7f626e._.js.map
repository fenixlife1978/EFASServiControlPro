{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/firebase/config.ts"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\n\n// 1. Invocamos las llaves desde tus variables de entorno (Protegidas)\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID\n};\n\n// 2. Función para detectar si el usuario eligió Local o Nube\nexport const getDbMode = () => {\n  if (typeof window !== \"undefined\") {\n    // Si no hay nada guardado, por defecto usamos la nube (Firebase)\n    return localStorage.getItem(\"edu_db_mode\") || \"cloud\"; \n  }\n  return \"cloud\";\n};\n\n// 3. Función para obtener la dirección del Servidor de la Escuela\nexport const getLocalServerUrl = () => {\n  if (typeof window !== \"undefined\") {\n    return localStorage.getItem(\"edu_local_url\") || \"http://localhost:5000\";\n  }\n  return \"http://localhost:5000\";\n};\n\n// Inicializamos Firebase (seguirá funcionando para el Login siempre)\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\nexport { db, auth };"],"names":[],"mappings":";;;;;;;;;;AAMU;AANV;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,sEAAsE;AACtE,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAGO,MAAM,YAAY;IACvB,wCAAmC;QACjC,iEAAiE;QACjE,OAAO,aAAa,OAAO,CAAC,kBAAkB;IAChD;;;AAEF;AAGO,MAAM,oBAAoB;IAC/B,wCAAmC;QACjC,OAAO,aAAa,OAAO,CAAC,oBAAoB;IAClD;;;AAEF;AAEA,qEAAqE;AACrE,MAAM,MAAM,IAAA,wLAAa,EAAC;AAC1B,MAAM,OAAO,IAAA,wMAAO,EAAC;AACrB,MAAM,KAAK,IAAA,sLAAY,EAAC","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/security/LockListener.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { db } from '@/firebase/config';\nimport { doc, onSnapshot } from 'firebase/firestore';\nimport { Lock } from 'lucide-react';\n\nexport default function LockListener() {\n  const [isLocked, setIsLocked] = useState(false);\n  const [deviceId, setDeviceId] = useState<string | null>(null);\n\n  useEffect(() => {\n    // Recuperamos el ID que vinculamos con el QR desde el localStorage\n    const savedId = localStorage.getItem('EDU_Device_ID');\n    if (savedId) setDeviceId(savedId);\n  }, []);\n\n  useEffect(() => {\n    if (!deviceId) return;\n\n    // Escuchamos directamente el documento del dispositivo vinculado\n    const unsub = onSnapshot(doc(db, \"usuarios\", deviceId), (docSnap) => {\n      if (docSnap.exists()) {\n        const data = docSnap.data();\n        setIsLocked(data.bloqueado === true);\n      }\n    });\n\n    return () => unsub();\n  }, [deviceId]);\n\n  if (!isLocked) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-[999999] bg-[#0f1117] flex flex-col items-center justify-center p-6 text-center\">\n      <div className=\"bg-red-500/10 border-2 border-red-500/50 p-10 rounded-[3rem] backdrop-blur-xl mb-8\">\n        <Lock size={100} className=\"text-red-500 animate-pulse\" />\n      </div>\n      <h1 className=\"text-4xl font-black text-white uppercase italic tracking-tighter\">\n        ACCESO <span className=\"text-red-500\">RESTRINGIDO</span>\n      </h1>\n      <p className=\"text-slate-500 font-bold uppercase text-[10px] tracking-widest mt-4\">\n        SISTEMA DE CONTROL EDU SERVICONTROLPRO\n      </p>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;;;AALA;;;;;AAOe,SAAS;;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAgB;IAExD,IAAA,0KAAS;kCAAC;YACR,mEAAmE;YACnE,MAAM,UAAU,aAAa,OAAO,CAAC;YACrC,IAAI,SAAS,YAAY;QAC3B;iCAAG,EAAE;IAEL,IAAA,0KAAS;kCAAC;YACR,IAAI,CAAC,UAAU;YAEf,iEAAiE;YACjE,MAAM,QAAQ,IAAA,oLAAU,EAAC,IAAA,6KAAG,EAAC,kIAAE,EAAE,YAAY;gDAAW,CAAC;oBACvD,IAAI,QAAQ,MAAM,IAAI;wBACpB,MAAM,OAAO,QAAQ,IAAI;wBACzB,YAAY,KAAK,SAAS,KAAK;oBACjC;gBACF;;YAEA;0CAAO,IAAM;;QACf;iCAAG;QAAC;KAAS;IAEb,IAAI,CAAC,UAAU,OAAO;IAEtB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,6MAAI;oBAAC,MAAM;oBAAK,WAAU;;;;;;;;;;;0BAE7B,6LAAC;gBAAG,WAAU;;oBAAmE;kCACxE,6LAAC;wBAAK,WAAU;kCAAe;;;;;;;;;;;;0BAExC,6LAAC;gBAAE,WAAU;0BAAsE;;;;;;;;;;;;AAKzF;GAvCwB;KAAA","debugId":null}}]
}