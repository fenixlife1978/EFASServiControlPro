{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,2KAAgB,MAG7B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,6KAAqB;QACpB,WAAW,IAAA,4HAAE,EACX,sXACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,6LAAC,8KAAsB;YACrB,WAAW,IAAA,4HAAE,EACX;;;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,6KAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/hooks/use-toast.ts"],"sourcesContent":["\"use client\"\n\n// Inspired by react-hot-toast library\nimport * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 217, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/admin/config/GlobalControls.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { db } from '@/firebase';\nimport { doc, onSnapshot, updateDoc, setDoc } from 'firebase/firestore';\nimport { Power, ShieldAlert, GlobeLock, Zap, Loader2 } from 'lucide-react';\nimport { Switch } from '@/components/ui/switch'; // Asegúrate de tener el componente Switch de shadcn\nimport { useToast } from '@/hooks/use-toast';\n\nexport function GlobalControls({ institutionId }: { institutionId: string }) {\n  const [config, setConfig] = useState({\n    filterActive: true,\n    strictMode: false,\n    maintenanceMode: false\n  });\n  const [loading, setLoading] = useState(true);\n  const { toast } = useToast();\n\n  useEffect(() => {\n    const docRef = doc(db, `institutions/${institutionId}/config`, 'global_settings');\n    const unsubscribe = onSnapshot(docRef, (snapshot) => {\n      if (snapshot.exists()) {\n        setConfig(snapshot.data() as any);\n      } else {\n        setDoc(docRef, { filterActive: true, strictMode: false, maintenanceMode: false });\n      }\n      setLoading(false);\n    });\n    return () => unsubscribe();\n  }, [institutionId]);\n\n  const toggleSetting = async (key: string, value: boolean) => {\n    try {\n      const docRef = doc(db, `institutions/${institutionId}/config`, 'global_settings');\n      await updateDoc(docRef, { [key]: value });\n      toast({\n        title: \"Configuración Actualizada\",\n        description: `${key} ahora está ${value ? 'ACTIVADO' : 'DESACTIVADO'}`,\n      });\n    } catch (error) {\n      toast({ variant: \"destructive\", title: \"Error al actualizar\" });\n    }\n  };\n\n  if (loading) return <Loader2 className=\"w-6 h-6 animate-spin text-orange-500 mx-auto\" />;\n\n  return (\n    <div className=\"bg-[#11141d] border border-white/5 rounded-3xl p-8 shadow-xl\">\n      <div className=\"flex items-center gap-3 mb-8\">\n        <Zap className=\"text-orange-500 w-6 h-6\" />\n        <h2 className=\"text-xl font-black italic uppercase text-white\">Controles Maestros</h2>\n      </div>\n\n      <div className=\"space-y-6\">\n        {/* Interruptor de Filtro Global */}\n        <div className=\"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/5\">\n          <div className=\"flex gap-4 items-center\">\n            <div className={`p-3 rounded-xl ${config.filterActive ? 'bg-emerald-500/20 text-emerald-500' : 'bg-red-500/20 text-red-500'}`}>\n              <Power className=\"w-5 h-5\" />\n            </div>\n            <div>\n              <p className=\"text-sm font-black text-white uppercase italic\">Filtro de Contenido</p>\n              <p className=\"text-[10px] text-slate-500 font-bold uppercase\">Activa/Desactiva toda la protección</p>\n            </div>\n          </div>\n          <Switch \n            checked={config.filterActive} \n            onCheckedChange={(val) => toggleSetting('filterActive', val)} \n          />\n        </div>\n\n        {/* Interruptor de Modo Estricto */}\n        <div className=\"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/5\">\n          <div className=\"flex gap-4 items-center\">\n            <div className={`p-3 rounded-xl ${config.strictMode ? 'bg-orange-500/20 text-orange-500' : 'bg-slate-800 text-slate-500'}`}>\n              <ShieldAlert className=\"w-5 h-5\" />\n            </div>\n            <div>\n              <p className=\"text-sm font-black text-white uppercase italic\">Modo Estricto (Whitelisting)</p>\n              <p className=\"text-[10px] text-slate-500 font-bold uppercase\">Solo permite sitios autorizados</p>\n            </div>\n          </div>\n          <Switch \n            checked={config.strictMode} \n            onCheckedChange={(val) => toggleSetting('strictMode', val)} \n          />\n        </div>\n\n        {/* Bloqueo Total / Mantenimiento */}\n        <div className=\"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/5\">\n          <div className=\"flex gap-4 items-center\">\n            <div className={`p-3 rounded-xl ${config.maintenanceMode ? 'bg-red-600/20 text-red-600 animate-pulse' : 'bg-slate-800 text-slate-500'}`}>\n              <GlobeLock className=\"w-5 h-5\" />\n            </div>\n            <div>\n              <p className=\"text-sm font-black text-white uppercase italic\">Bloqueo de Navegación</p>\n              <p className=\"text-[10px] text-slate-500 font-bold uppercase\">Cierra el acceso a internet totalmente</p>\n            </div>\n          </div>\n          <Switch \n            checked={config.maintenanceMode} \n            onCheckedChange={(val) => toggleSetting('maintenanceMode', val)} \n          />\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 551, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/admin/monitoring/WebHistoryModal.tsx"],"sourcesContent":["'use client';\nimport React, { useEffect, useState } from 'react';\nimport { db } from '@/firebase/config';\nimport { collection, query, where, orderBy, limit, onSnapshot } from 'firebase/firestore';\nimport { X, Globe, Clock, ExternalLink, ShieldAlert } from 'lucide-react';\n\ninterface WebHistory {\n  id: string;\n  url: string;\n  timestamp: any;\n}\n\ninterface WebHistoryModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  tabletId: string;\n  alumnoNombre: string;\n}\n\nexport function WebHistoryModal({ isOpen, onClose, tabletId, alumnoNombre }: WebHistoryModalProps) {\n  const [history, setHistory] = useState<WebHistory[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!isOpen || !tabletId) return;\n\n    setLoading(true);\n    // Buscamos en la colección 'web_history' filtrando por la tablet específica\n    const q = query(\n      collection(db, 'web_history'),\n      where('tabletId', '==', tabletId),\n      orderBy('timestamp', 'desc'),\n      limit(20)\n    );\n\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const docs = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      })) as WebHistory[];\n      setHistory(docs);\n      setLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, [isOpen, tabletId]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm\">\n      <div className=\"bg-[#1a1d23] border border-white/10 w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden\">\n        {/* Header */}\n        <div className=\"p-6 border-b border-white/10 flex items-center justify-between bg-gradient-to-r from-orange-500/10 to-transparent\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-full bg-orange-500/20 flex items-center justify-center\">\n              <Globe className=\"text-orange-500 w-5 h-5\" />\n            </div>\n            <div>\n              <h3 className=\"text-white font-bold text-lg leading-tight\">Historial de Navegación</h3>\n              <p className=\"text-slate-400 text-xs uppercase tracking-wider font-semibold\">Alumno: {alumnoNombre}</p>\n            </div>\n          </div>\n          <button onClick={onClose} className=\"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-400 hover:text-white\">\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6 max-h-[60vh] overflow-y-auto\">\n          {loading ? (\n            <div className=\"flex flex-col items-center justify-center py-12 gap-3\">\n              <div className=\"w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full animate-spin\"></div>\n              <p className=\"text-slate-500 text-sm\">Consultando Centinela...</p>\n            </div>\n          ) : history.length > 0 ? (\n            <div className=\"space-y-3\">\n              {history.map((item) => (\n                <div key={item.id} className=\"group p-4 rounded-xl bg-white/5 border border-white/5 hover:border-orange-500/30 hover:bg-orange-500/5 transition-all flex items-center justify-between\">\n                  <div className=\"flex items-center gap-4 overflow-hidden\">\n                    <div className=\"p-2 rounded-lg bg-slate-800 text-slate-400 group-hover:text-orange-500 group-hover:bg-orange-500/10 transition-colors\">\n                      <Clock className=\"w-4 h-4\" />\n                    </div>\n                    <div className=\"overflow-hidden\">\n                      <p className=\"text-sm text-slate-200 font-medium truncate group-hover:text-white\">{item.url}</p>\n                      <p className=\"text-[10px] text-slate-500 font-mono\">\n                        {item.timestamp?.toDate().toLocaleString() || 'Fecha no disponible'}\n                      </p>\n                    </div>\n                  </div>\n                  <a href={item.url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"p-2 text-slate-500 hover:text-orange-500 opacity-0 group-hover:opacity-100 transition-all\">\n                    <ExternalLink className=\"w-4 h-4\" />\n                  </a>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n              <ShieldAlert className=\"w-12 h-12 text-slate-700 mb-4\" />\n              <p className=\"text-slate-400 font-medium\">No se detectaron registros recientes.</p>\n              <p className=\"text-slate-600 text-xs mt-1\">El sistema Centinela no ha reportado actividad para este dispositivo.</p>\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"p-4 bg-black/20 border-t border-white/5 text-center\">\n          <p className=\"text-[10px] text-slate-500 uppercase tracking-[0.2em]\">EDUControlPro Sistema de Control Parental Educativo - Monitoreo en Tiempo Real</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;;;AAJA;;;;;AAmBO,SAAS,gBAAgB,KAAiE;QAAjE,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,YAAY,EAAwB,GAAjE;;IAC9B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAe,EAAE;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;qCAAC;YACR,IAAI,CAAC,UAAU,CAAC,UAAU;YAE1B,WAAW;YACX,4EAA4E;YAC5E,MAAM,IAAI,IAAA,+KAAK,EACb,IAAA,oLAAU,EAAC,kIAAE,EAAE,gBACf,IAAA,+KAAK,EAAC,YAAY,MAAM,WACxB,IAAA,iLAAO,EAAC,aAAa,SACrB,IAAA,+KAAK,EAAC;YAGR,MAAM,cAAc,IAAA,oLAAU,EAAC;yDAAG,CAAC;oBACjC,MAAM,OAAO,SAAS,IAAI,CAAC,GAAG;sEAAC,CAAA,MAAO,CAAC;gCACrC,IAAI,IAAI,EAAE;gCACV,GAAG,IAAI,IAAI,EAAE;4BACf,CAAC;;oBACD,WAAW;oBACX,WAAW;gBACb;;YAEA;6CAAO,IAAM;;QACf;oCAAG;QAAC;QAAQ;KAAS;IAErB,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC,gNAAK;wCAAC,WAAU;;;;;;;;;;;8CAEnB,6LAAC;;sDACC,6LAAC;4CAAG,WAAU;sDAA6C;;;;;;sDAC3D,6LAAC;4CAAE,WAAU;;gDAAgE;gDAAS;;;;;;;;;;;;;;;;;;;sCAG1F,6LAAC;4BAAO,SAAS;4BAAS,WAAU;sCAClC,cAAA,6LAAC,oMAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAKjB,6LAAC;oBAAI,WAAU;8BACZ,wBACC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAE,WAAU;0CAAyB;;;;;;;;;;;+BAEtC,QAAQ,MAAM,GAAG,kBACnB,6LAAC;wBAAI,WAAU;kCACZ,QAAQ,GAAG,CAAC,CAAC;gCASH;iDART,6LAAC;gCAAkB,WAAU;;kDAC3B,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC,gNAAK;oDAAC,WAAU;;;;;;;;;;;0DAEnB,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAE,WAAU;kEAAsE,KAAK,GAAG;;;;;;kEAC3F,6LAAC;wDAAE,WAAU;kEACV,EAAA,kBAAA,KAAK,SAAS,cAAd,sCAAA,gBAAgB,MAAM,GAAG,cAAc,OAAM;;;;;;;;;;;;;;;;;;kDAIpD,6LAAC;wCAAE,MAAM,KAAK,GAAG;wCAAE,QAAO;wCAAS,KAAI;wCAAsB,WAAU;kDACrE,cAAA,6LAAC,yOAAY;4CAAC,WAAU;;;;;;;;;;;;+BAblB,KAAK,EAAE;;;;;;;;;;6CAmBrB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,sOAAW;gCAAC,WAAU;;;;;;0CACvB,6LAAC;gCAAE,WAAU;0CAA6B;;;;;;0CAC1C,6LAAC;gCAAE,WAAU;0CAA8B;;;;;;;;;;;;;;;;;8BAMjD,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAE,WAAU;kCAAwD;;;;;;;;;;;;;;;;;;;;;;AAK/E;GA7FgB;KAAA","debugId":null}},
    {"offset": {"line": 866, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/admin/config/SecurityRules.tsx"],"sourcesContent":["'use client';\nimport React, { useState, useEffect } from 'react';\nimport { db } from '@/firebase/config';\nimport { doc, onSnapshot, updateDoc, arrayUnion, arrayRemove, serverTimestamp, collection, query, where, getDocs, limit } from 'firebase/firestore';\nimport { \n  ShieldCheck, Globe, Lock, Unlock, Database, Download, \n  AlertTriangle, CheckCircle2, Plus, Trash2, FileText, ShieldAlert, RefreshCw \n} from 'lucide-react';\nimport jsPDF from 'jspdf';\nimport autoTable from 'jspdf-autotable';\n\ninterface SecurityRulesProps {\n  institutionId: string;\n}\n\nexport const SecurityRules = ({ institutionId }: SecurityRulesProps) => {\n  const [loading, setLoading] = useState(false);\n  const [data, setData] = useState<any>(null);\n  const [newUrl, setNewUrl] = useState('');\n  const [filterType, setFilterType] = useState<'blacklist' | 'whitelist'>('blacklist');\n  const [incidencias, setIncidencias] = useState<any[]>([]);\n  const [refreshing, setRefreshing] = useState(false);\n\n  useEffect(() => {\n    if (!institutionId) return;\n    return onSnapshot(doc(db, \"institutions\", institutionId), (d) => {\n      if (d.exists()) setData(d.data());\n    });\n  }, [institutionId]);\n\n  const fetchIncidencias = async () => {\n    setRefreshing(true);\n    try {\n      const q = query(collection(db, \"incidencias\"), where(\"InstitutoId\", \"==\", institutionId), limit(20));\n      const querySnapshot = await getDocs(q);\n      const docs = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setIncidencias(docs);\n    } catch (e) { \n      console.error(e);\n      setIncidencias([\n        { alumno: \"Simulación: Juan Pérez\", tablet: \"TAB-001\", fecha: \"2026-02-20\", hora: \"14:00\", url: \"ejemplo-bloqueado.com\" }\n      ]);\n    }\n    setTimeout(() => setRefreshing(false), 800);\n  };\n\n  const generatePDF = (tipo: 'seguridad' | 'incidencias') => {\n    const doc = new jsPDF();\n    const isInc = tipo === 'incidencias';\n    \n    doc.setFillColor(15, 17, 23);\n    doc.rect(0, 0, 210, 40, 'F');\n    doc.setTextColor(255, 255, 255);\n    doc.setFontSize(22);\n    doc.setFont(\"helvetica\", \"bold\");\n    doc.text(\"EDU SERVICONTROLPRO\", 15, 20);\n    doc.setFontSize(9);\n    doc.setFont(\"helvetica\", \"italic\");\n    doc.text(isInc ? \"REPORTE DETALLADO DE INCIDENCIAS\" : \"REPORTE OFICIAL DE CUMPLIMIENTO CIPA\", 15, 28);\n    \n    doc.setTextColor(40, 40, 40);\n    doc.setFontSize(10);\n    const instText = `Institución: ${data?.nombre || institutionId}`;\n    doc.text(instText, 15, 50);\n    \n    // Sello de Sede Protegida Verde\n    doc.setTextColor(34, 197, 94);\n    doc.setFontSize(8);\n    doc.text(' [ SEDE PROTEGIDA - VALIDADO POR EDU ]', 15 + doc.getTextWidth(instText), 50);\n\n    autoTable(doc, {\n      startY: 65,\n      head: isInc ? [['ALUMNO', 'DISPOSITIVO', 'FECHA', 'HORA', 'URL DETECTADA']] : [['TIPO', 'CRITERIO / URL', 'SITUACIÓN']],\n      body: isInc ? incidencias.map(i => [i.alumno, i.tablet, i.fecha, i.hora, i.url]) : (data?.blacklist || []).map((u: string) => ['BLACKLIST', u, 'ACTIVO']),\n      headStyles: { fillColor: isInc ? [234, 88, 12] : [15, 17, 23] }\n    });\n    doc.save(`EDU_Reporte_${tipo}.pdf`);\n  };\n\n  const packs = {\n    cipa_strict: {\n      name: \"CIPA Compliance Pack (USA)\",\n      desc: \"Bloqueo estricto de pornografía, contenido obsceno y dañino para menores.\",\n      urls: [\"porn.com\", \"xvideos.com\", \"gambling.com\", \"bet365.com\", \"chatroulette.com\"]\n    },\n    social_blackout: {\n      name: \"Focus Mode: Social Media\",\n      desc: \"Restringe acceso a redes sociales durante horario académico.\",\n      urls: [\"facebook.com\", \"instagram.com\", \"tiktok.com\", \"twitter.com\", \"x.com\"]\n    }\n  };\n\n  const importPack = async (packUrls: string[], packName: string) => {\n    setLoading(true);\n    try {\n      await updateDoc(doc(db, \"institutions\", institutionId), {\n        blacklist: arrayUnion(...packUrls),\n        lastSecurityUpdate: serverTimestamp()\n      });\n    } catch (e) { console.error(e); }\n    setLoading(false);\n  };\n\n  const handleAddUrl = async () => {\n    if (!newUrl) return;\n    await updateDoc(doc(db, \"institutions\", institutionId), {\n      [filterType]: arrayUnion(newUrl.toLowerCase().trim()),\n      lastSecurityUpdate: serverTimestamp()\n    });\n    setNewUrl('');\n  };\n\n  const handleRemoveUrl = async (url: string, type: 'blacklist' | 'whitelist') => {\n    await updateDoc(doc(db, \"institutions\", institutionId), { [type]: arrayRemove(url) });\n  };\n\n  return (\n    <div className=\"space-y-8 animate-in fade-in duration-700 pb-20\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-3xl font-black italic uppercase text-white tracking-tighter\">Security <span className=\"text-orange-500\">Center</span></h2>\n          <p className=\"text-[9px] font-bold text-slate-500 uppercase tracking-widest italic\">Filtrado de Contenido Nivel Gubernamental</p>\n        </div>\n        <div className=\"bg-slate-900/50 border border-slate-800 p-4 rounded-2xl flex items-center gap-3\">\n          <Globe className=\"text-blue-500\" size={18} />\n          <p className=\"text-[10px] font-black text-white uppercase italic\">Filtrado Activo</p>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {/* PANEL IZQUIERDO: PACKS */}\n        <div className=\"bg-[#0f1117] p-8 rounded-[2.5rem] border border-slate-800 shadow-2xl relative overflow-hidden group\">\n          <div className=\"flex items-center gap-2 text-orange-500 mb-4\">\n            <Download size={16} />\n            <span className=\"text-[10px] font-black uppercase tracking-widest\">Importar Protocolos</span>\n          </div>\n          <h3 className=\"text-xl font-black italic uppercase text-white mb-2\">Packs Globales</h3>\n          <div className=\"space-y-3 mt-6\">\n            {Object.entries(packs).map(([key, pack]) => (\n              <button key={key} onClick={() => importPack(pack.urls, pack.name)} className=\"w-full flex items-center justify-between p-4 bg-slate-900 border border-slate-800 rounded-2xl hover:border-orange-500 transition-all group/btn\">\n                <div className=\"text-left\">\n                  <p className=\"text-[9px] font-black text-white uppercase italic\">{pack.name}</p>\n                  <p className=\"text-[7px] font-bold text-slate-600 uppercase mt-1\">{pack.desc}</p>\n                </div>\n                <Plus size={16} />\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* PANEL DERECHO: ESTADO Y CONTADOR SUPERIOR */}\n        <div className=\"bg-[#0f1117] p-8 rounded-[2.5rem] border border-slate-800\">\n          <div className=\"flex items-center gap-2 text-blue-500 mb-4\">\n            <ShieldCheck size={16} />\n            <span className=\"text-[10px] font-black uppercase tracking-widest\">Estado de Reglas</span>\n          </div>\n          \n          {/* CONTADOR SUPERIOR (IMPACTO CIPA) */}\n          <div className=\"mb-6 p-6 bg-orange-500/5 border border-orange-500/10 rounded-[2rem] flex items-center justify-between group\">\n             <div>\n                <p className=\"text-[7px] font-black text-orange-500 uppercase tracking-[0.3em] mb-1\">Impacto de Protección CIPA</p>\n                <p className=\"text-2xl font-black text-white italic tracking-tighter uppercase leading-none\">\n                  {data?.blacklist?.length || 0}\n                  <span className=\"text-orange-500 text-xs ml-2\">Amenazas Bloqueadas</span>\n                </p>\n             </div>\n             <ShieldCheck className=\"text-orange-500 animate-pulse\" size={24} />\n          </div>\n\n          <div className=\"space-y-4\">\n            <div className=\"flex justify-between items-center p-5 bg-black/30 rounded-2xl border border-slate-800/50\">\n               <div className=\"flex items-center gap-3\"><Lock className=\"text-red-500\" size={16}/><span className=\"text-[10px] font-black text-white uppercase italic\">Lista Negra</span></div>\n               <span className=\"text-[10px] font-mono text-slate-500\">TOTAL: {data?.blacklist?.length || 0}</span>\n            </div>\n            <div className=\"flex justify-between items-center p-5 bg-black/30 rounded-2xl border border-slate-800/50\">\n               <div className=\"flex items-center gap-3\"><Unlock className=\"text-green-500\" size={16}/><span className=\"text-[10px] font-black text-white uppercase italic\">Lista Blanca</span></div>\n               <span className=\"text-[10px] font-mono text-slate-500\">TOTAL: {data?.whitelist?.length || 0}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <hr className=\"border-slate-800 my-10\" />\n\n      {/* SECCIÓN BAJA: GESTIÓN Y LOGS */}\n      <div className=\"grid grid-cols-12 gap-8\">\n        <div className=\"col-span-12 lg:col-span-8 space-y-6\">\n          <div className=\"bg-[#0f1117] p-8 rounded-[2.5rem] border border-slate-800 shadow-xl\">\n            <h3 className=\"text-xs font-black text-white uppercase mb-6 flex items-center gap-2 italic\">\n              <Plus size={14} className=\"text-orange-500\"/> Gestión Manual de Filtros\n            </h3>\n            <div className=\"flex gap-4 mb-8\">\n              <select className=\"bg-black border border-slate-800 p-4 rounded-xl text-[9px] font-black text-orange-500 uppercase outline-none\" value={filterType} onChange={(e: any) => setFilterType(e.target.value)}>\n                <option value=\"blacklist\">Blacklist</option>\n                <option value=\"whitelist\">Whitelist</option>\n              </select>\n              <input className=\"flex-1 bg-black border border-slate-800 p-4 rounded-xl text-[10px] font-bold text-white uppercase outline-none focus:border-orange-500\" placeholder=\"Añadir url o palabra clave...\" value={newUrl} onChange={e => setNewUrl(e.target.value)} onKeyPress={e => e.key === 'Enter' && handleAddUrl()} />\n              <button onClick={handleAddUrl} className=\"bg-orange-500 px-6 rounded-xl text-white font-black\"><Plus size={18}/></button>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-6 h-64\">\n              <div className=\"overflow-y-auto space-y-2 pr-2 custom-scrollbar\">\n                <p className=\"text-[8px] font-black text-red-500 uppercase sticky top-0 bg-[#0f1117] pb-2\">Blacklist Actual</p>\n                {data?.blacklist?.map((url: string) => (\n                  <div key={url} className=\"flex justify-between items-center bg-black/40 p-3 rounded-lg border border-slate-800\">\n                    <span className=\"text-[9px] font-mono text-slate-400 truncate\">{url}</span>\n                    <button onClick={() => handleRemoveUrl(url, 'blacklist')} className=\"text-slate-600 hover:text-red-500 transition-colors\"><Trash2 size={12}/></button>\n                  </div>\n                ))}\n              </div>\n              <div className=\"overflow-y-auto space-y-2 pr-2 custom-scrollbar\">\n                <p className=\"text-[8px] font-black text-green-500 uppercase sticky top-0 bg-[#0f1117] pb-2\">Whitelist Actual</p>\n                {data?.whitelist?.map((url: string) => (\n                  <div key={url} className=\"flex justify-between items-center bg-black/40 p-3 rounded-lg border border-slate-800\">\n                    <span className=\"text-[9px] font-mono text-slate-400 truncate\">{url}</span>\n                    <button onClick={() => handleRemoveUrl(url, 'whitelist')} className=\"text-slate-600 hover:text-red-500 transition-colors\"><Trash2 size={12}/></button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-[#0f1117] p-8 rounded-[2.5rem] border border-slate-800\">\n             <div className=\"flex justify-between items-center mb-6\">\n                <h3 className=\"text-xs font-black text-white uppercase italic flex items-center gap-2\"><ShieldAlert className=\"text-orange-500\" size={16}/> Logs de Incidencias</h3>\n                <div className=\"flex gap-2\">\n                  <button onClick={fetchIncidencias} className={`p-2 rounded-lg bg-slate-900 border border-slate-800 text-orange-500 transition-all ${refreshing ? 'animate-spin' : ''}`}><RefreshCw size={14} /></button>\n                  <button onClick={() => generatePDF('incidencias')} className=\"text-[8px] font-black text-slate-500 hover:text-white uppercase border border-slate-800 px-3 rounded-lg\">Exportar Logs</button>\n                </div>\n             </div>\n             <div className=\"space-y-2\">\n                {incidencias.length > 0 ? incidencias.map((inc, idx) => (\n                  <div key={idx} className=\"grid grid-cols-5 gap-4 p-4 bg-black/40 rounded-xl border border-slate-800/50 text-[8px] font-bold uppercase italic text-slate-400\">\n                    <span className=\"text-white tracking-tighter\">{inc.alumno}</span>\n                    <span className=\"text-orange-500/80\">{inc.tablet}</span>\n                    <span className=\"text-slate-600\">{inc.fecha}</span>\n                    <span className=\"text-slate-600\">{inc.hora}</span>\n                    <span className=\"text-red-500/70 truncate\">{inc.url}</span>\n                  </div>\n                )) : (\n                  <div className=\"text-center py-10 text-[9px] font-black text-slate-600 uppercase tracking-[0.2em]\">Pulsa el icono para actualizar incidencias</div>\n                )}\n             </div>\n          </div>\n        </div>\n\n        <div className=\"col-span-12 lg:col-span-4 space-y-6\">\n          <div className=\"bg-[#0f1117] p-8 rounded-[2.5rem] border border-slate-800 space-y-6\">\n            <div className=\"text-center\">\n              <FileText className=\"text-orange-500 mx-auto mb-4\" size={32} />\n              <h4 className=\"text-[11px] font-black text-white uppercase italic\">Reporte de Protección</h4>\n            </div>\n\n            {/* CONTADOR INFERIOR (PROTECCIÓN ACTIVA) */}\n            <div className=\"p-6 bg-green-500/5 border border-green-500/10 rounded-2xl\">\n                <p className=\"text-[7px] font-black text-green-500 uppercase tracking-[0.2em] mb-1\">Estado de Seguridad</p>\n                <p className=\"text-xl font-black text-white italic\">{data?.blacklist?.length || 0} <span className=\"text-green-500 text-[10px]\">URLs Protegidas</span></p>\n            </div>\n\n            <button onClick={() => generatePDF('seguridad')} className=\"w-full bg-white text-black font-black py-4 rounded-xl text-[10px] uppercase italic hover:bg-orange-500 hover:text-white transition-all shadow-lg\">\n              Descargar PDF Profesional\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1866, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/dashboard/InstitutionView.tsx"],"sourcesContent":["'use client';\nimport React, { useState, useEffect } from 'react';\nimport { db, auth } from '@/firebase/config';\nimport { \n  collection, query, onSnapshot, where, addDoc, serverTimestamp, \n  doc, getDoc, updateDoc, deleteDoc \n} from 'firebase/firestore';\nimport { useInstitution } from '@/app/(admin)/dashboard/institution-context';\nimport { \n  ShieldAlert, Radio, Users, LogOut, Lock, Search, MessageSquare, Send,\n  Plus, DoorOpen, Activity, Monitor, Globe, ChevronRight, Tablet, User, \n  ArrowLeft, Settings, Trash2, Zap, Save, Building2, Key, Info, Edit3, Link2, Check, X, HardDrive, Smartphone, MapPin, ShieldCheck\n} from 'lucide-react';\nimport { signOut } from 'firebase/auth';\nimport { GlobalControls } from '@/components/admin/config/GlobalControls';\nimport { WebHistoryModal } from '@/components/admin/monitoring/WebHistoryModal';\nimport { SecurityRules } from '@/components/admin/config/SecurityRules';\n\nexport default function InstitutionView() {\n  const { institutionId, setInstitutionId } = useInstitution();\n  const [institutionName, setInstitutionName] = useState('Cargando...');\n  const [instData, setInstData] = useState({ direccion: '', telefono: '' });\n  const [activeSection, setActiveSection] = useState<'dashboard' | 'monitoring' | 'users' | 'settings' | 'security'>('dashboard');\n  const [historyModal, setHistoryModal] = useState({ isOpen: false, tabletId: '', alumnoNombre: '' });\n  const [messageModal, setMessageModal] = useState({ isOpen: false, tabletId: '', alumnoNombre: '', text: '' });\n  const [aulas, setAulas] = useState<any[]>([]);\n  const [tablets, setTablets] = useState<any[]>([]);\n  const [selectedAula, setSelectedAula] = useState<any>(null);\n  const [alumnos, setAlumnos] = useState<any[]>([]);\n  const [allAlumnos, setAllAlumnos] = useState<any[]>([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const [newAula, setNewAula] = useState({ nombre_completo: '', seccion: '' });\n  const [editingAula, setEditingAula] = useState<any>(null);\n  const [editingUser, setEditingUser] = useState<any>(null);\n  const [activeUrlRequest, setActiveUrlRequest] = useState<string | null>(null);\n  const [isSaving, setIsSaving] = useState(false);\n\n  const inputStyle = \"w-full bg-slate-900 border border-slate-800 p-4 rounded-xl text-white font-bold text-xs uppercase outline-none focus:border-orange-500 transition-all\";\n\n  useEffect(() => {\n    if (!institutionId) return;\n    const fetchInstData = async () => {\n      const docRef = doc(db, \"institutions\", institutionId);\n      const docSnap = await getDoc(docRef);\n      if (docSnap.exists()) {\n        const data = docSnap.data();\n        setInstitutionName(data.nombre);\n        setInstData({ direccion: data.direccion || '', telefono: data.telefono || '' });\n      }\n    };\n    fetchInstData();\n  }, [institutionId]);\n\n  useEffect(() => {\n    if (!institutionId) return;\n    const unsubAulas = onSnapshot(query(collection(db, `institutions/${institutionId}/Aulas`)), (s) => {\n      setAulas(s.docs.map(d => ({ id: d.id, ...d.data() })));\n    });\n    const unsubTablets = onSnapshot(query(collection(db, \"dispositivos\"), where(\"InstitutoId\", \"==\", institutionId)), (s) => {\n      setTablets(s.docs.map(d => ({ id: d.id, ...d.data() })));\n    });\n    const unsubAllAlumnos = onSnapshot(query(collection(db, \"usuarios\"), where(\"InstitutoId\", \"==\", institutionId), where(\"role\", \"==\", \"estudiante\")), (s) => {\n      setAllAlumnos(s.docs.map(d => ({ id: d.id, ...d.data() })));\n    });\n    return () => { unsubAulas(); unsubTablets(); unsubAllAlumnos(); };\n  }, [institutionId]);\n\n  useEffect(() => {\n    if (!selectedAula || !institutionId) { setAlumnos([]); return; }\n    const q = query(collection(db, \"usuarios\"), \n              where(\"InstitutoId\", \"==\", institutionId), \n              where(\"aulaId\", \"==\", selectedAula.id),\n              where(\"role\", \"==\", \"estudiante\"));\n    return onSnapshot(q, (s) => {\n      setAlumnos(s.docs.map(d => ({ id: d.id, ...d.data() })));\n    });\n  }, [selectedAula, institutionId]);\n\n  const handleUpdateInstitution = async () => {\n    if (!institutionId) return;\n    setIsSaving(true);\n    try {\n      await updateDoc(doc(db, \"institutions\", institutionId), {\n        nombre: institutionName,\n        direccion: instData.direccion,\n        telefono: instData.telefono,\n        lastUpdated: serverTimestamp()\n      });\n      alert(\"✅ Datos de la Sede actualizados.\");\n    } catch (e) { console.error(e); }\n    setIsSaving(false);\n  };\n\n  const handleSendMessage = async () => {\n    if (!messageModal.tabletId || !messageModal.text.trim()) return;\n    setIsSaving(true);\n    try {\n      await updateDoc(doc(db, \"dispositivos\", messageModal.tabletId), {\n        pending_message: messageModal.text,\n        message_timestamp: serverTimestamp(),\n        message_sender: \"Dirección Institucional\"\n      });\n      setMessageModal({ ...messageModal, isOpen: false, text: '' });\n    } catch (e) { console.error(e); }\n    setIsSaving(false);\n  };\n\n  const handleSaveAula = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newAula.nombre_completo || !newAula.seccion) return;\n    try {\n      if (editingAula) {\n        await updateDoc(doc(db, `institutions/${institutionId}/Aulas`, editingAula.id), { ...newAula, lastUpdated: serverTimestamp() });\n      } else {\n        await addDoc(collection(db, `institutions/${institutionId}/Aulas`), { ...newAula, status: 'published', createdAt: serverTimestamp(), InstitutoId: institutionId });\n      }\n      setShowModal(false); setEditingAula(null); setNewAula({ nombre_completo: '', seccion: '' });\n    } catch (e) { console.error(e); }\n  };\n\n  const handleDeleteAula = async (e: React.MouseEvent, aulaId: string) => {\n    e.stopPropagation();\n    if (!confirm('¿ELIMINAR ESTA AULA PERMANENTEMENTE?')) return;\n    try { await deleteDoc(doc(db, `institutions/${institutionId}/Aulas`, aulaId)); } catch (e) { console.error(e); }\n  };\n\n  const handleUpdateUser = async () => {\n    if (!editingUser) return;\n    try {\n      await updateDoc(doc(db, \"usuarios\", editingUser.id), {\n        nombre: editingUser.nombre,\n        aulaId: editingUser.aulaId,\n        updatedAt: serverTimestamp()\n      });\n      setEditingUser(null);\n      alert(\"✅ Usuario actualizado correctamente.\");\n    } catch (e) { console.error(e); }\n  };\n\n  const handleDeleteUser = async (userId: string, tabletId?: string) => {\n    if (!confirm(\"¿ELIMINAR ESTE ALUMNO? SE DESVINCULARÁ LA TABLET AUTOMÁTICAMENTE.\")) return;\n    try {\n      if (tabletId) {\n        await updateDoc(doc(db, \"dispositivos\", tabletId), {\n          alumno_asignado: \"\",\n          aulaId: \"\",\n          status: \"available\",\n          last_url: \"Desvinculado por Dirección\"\n        });\n      }\n      await deleteDoc(doc(db, \"usuarios\", userId));\n      alert(\"✅ Alumno eliminado y Hardware liberado.\");\n    } catch (e) { console.error(e); }\n  };\n\n  const filteredUsers = allAlumnos.filter(a => \n    a.nombre.toLowerCase().includes(searchTerm.toLowerCase()) || \n    (a.tabletId && a.tabletId.toLowerCase().includes(searchTerm.toLowerCase()))\n  );\n\n  return (\n    <div className=\"min-h-screen bg-[#0a0c10] text-slate-300 font-sans\">\n      <nav className=\"fixed left-0 top-0 h-full w-20 bg-[#0f1117] border-r border-slate-800/50 flex flex-col items-center py-8 gap-8 z-50\">\n        <div className=\"bg-orange-500 p-3 rounded-2xl shadow-lg shadow-orange-500/20\"><ShieldAlert className=\"text-white w-6 h-6\" /></div>\n        <div className=\"flex-1 flex flex-col gap-6 pt-10\">\n          <button title=\"Tablero de Control\" onClick={() => { setActiveSection('dashboard'); setSelectedAula(null); }} className={`p-3 rounded-xl transition-all ${activeSection === 'dashboard' ? 'text-orange-500 bg-orange-500/10' : 'text-slate-600 hover:text-white'}`}><Activity className=\"w-5 h-5\" /></button>\n          <button title=\"U.S. Security Center\" onClick={() => setActiveSection('security')} className={`p-3 rounded-xl transition-all ${activeSection === 'security' ? 'text-orange-500 bg-orange-500/10' : 'text-slate-600 hover:text-white'}`}><ShieldCheck className=\"w-5 h-5\" /></button>\n          <button title=\"Directorio Global\" onClick={() => setActiveSection('users')} className={`p-3 rounded-xl transition-all ${activeSection === 'users' ? 'text-orange-500 bg-orange-500/10' : 'text-slate-600 hover:text-white'}`}><Users className=\"w-5 h-5\" /></button>\n          <button title=\"Configuración de Sede\" onClick={() => setActiveSection('settings')} className={`p-3 rounded-xl transition-all ${activeSection === 'settings' ? 'text-orange-500 bg-orange-500/10' : 'text-slate-600 hover:text-white'}`}><Settings className=\"w-5 h-5\" /></button>\n        </div>\n        <button title=\"Cerrar Sesión\" onClick={() => signOut(auth)} className=\"p-3 text-slate-600 hover:text-red-500 transition-colors\"><LogOut className=\"w-5 h-5\" /></button>\n      </nav>\n\n      <main className=\"pl-20\">\n        <header className=\"sticky top-0 z-40 bg-[#0a0c10]/80 backdrop-blur-md border-b border-slate-800/50 px-8 py-6 flex justify-between items-center\">\n          <div>\n            <div className=\"flex items-center gap-2 text-[9px] font-black uppercase tracking-[0.4em] text-orange-500 mb-1\">\n              <span className=\"w-2 h-2 bg-orange-500 rounded-full animate-ping\"></span>\n              EDUControlPro Sistema de Control Parental Educativo v3.0\n            </div>\n            <h1 className=\"text-2xl font-black italic uppercase text-white tracking-tighter\">\n              {institutionName} <span className=\"text-slate-500 font-light ml-2\">/ {activeSection.toUpperCase()}</span>\n            </h1>\n          </div>\n          <button onClick={() => setInstitutionId(null)} className=\"bg-slate-900 border border-slate-800 text-slate-400 hover:text-white px-5 py-2 rounded-xl text-[10px] font-black uppercase italic flex items-center gap-2\">← Volver a Sedes</button>\n        </header>\n\n        <div className=\"p-8 max-w-[1600px] mx-auto grid grid-cols-12 gap-8\">\n          <div className=\"col-span-12 lg:col-span-4 space-y-6\">\n            <div className=\"bg-[#0f1117] p-8 rounded-[2.5rem] border border-slate-800 shadow-2xl\">\n              <h2 className=\"text-xl font-black italic uppercase text-white mb-6 flex items-center gap-3\"><Lock className=\"text-orange-500 w-5 h-5\" /> Master Switch</h2>\n              <div className=\"scale-95 origin-left\"><GlobalControls institutionId={institutionId!} /></div>\n            </div>\n          </div>\n\n          <div className=\"col-span-12 lg:col-span-8\">\n            <div className=\"bg-[#0f1117] p-10 rounded-[3rem] border border-slate-800 min-h-[600px] relative\">\n              \n              {activeSection === 'dashboard' && !selectedAula && (\n                <>\n                  <div className=\"flex justify-between items-center mb-10\">\n                    <h2 className=\"text-4xl font-black italic uppercase text-white tracking-tighter\">Mapa <span className=\"text-orange-500 font-light\">de Aulas</span></h2>\n                    <button onClick={() => { setEditingAula(null); setNewAula({nombre_completo:'', seccion:''}); setShowModal(true); }} className=\"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-2xl font-black text-[10px] uppercase italic transition-all flex items-center gap-2\"><Plus className=\"w-4 h-4\" /> Crear Nueva Aula</button>\n                  </div>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    {aulas.map((aula) => (\n                      <button key={aula.id} onClick={() => setSelectedAula(aula)} className=\"bg-slate-900/30 p-8 rounded-[2.5rem] border border-slate-800 hover:border-orange-500 transition-all group text-left relative\">\n                        <DoorOpen className=\"w-8 h-8 text-slate-700 mb-4 group-hover:text-orange-500\" />\n                        <h3 className=\"text-xl font-black italic uppercase text-white\">{aula.nombre_completo}</h3>\n                        <p className=\"text-[10px] font-bold text-slate-500 uppercase\">{aula.seccion || 'SIN SECCIÓN'}</p>\n                        <div className=\"absolute top-6 right-6 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                          <div title=\"Editar Aula\" onClick={(e) => { e.stopPropagation(); setEditingAula(aula); setNewAula({nombre_completo: aula.nombre_completo, seccion: aula.seccion}); setShowModal(true); }} className=\"p-2 bg-slate-800 hover:text-orange-500 rounded-lg\"><Edit3 size={14} /></div>\n                          <div title=\"Eliminar Aula\" onClick={(e) => handleDeleteAula(e, aula.id)} className=\"p-2 bg-slate-800 hover:text-red-500 rounded-lg\"><Trash2 size={14} /></div>\n                        </div>\n                      </button>\n                    ))}\n                  </div>\n                </>\n              )}\n\n              {activeSection === 'security' && (\n                <div className=\"animate-in fade-in duration-500\">\n                  <SecurityRules institutionId={institutionId!} />\n                </div>\n              )}\n\n              {activeSection === 'users' && (\n                <div className=\"space-y-8\">\n                  <div className=\"flex justify-between items-center\">\n                    <h2 className=\"text-4xl font-black italic uppercase text-white tracking-tighter\">Directorio <span className=\"text-orange-500 font-light\">Global</span></h2>\n                    <div className=\"relative\">\n                      <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500\" />\n                      <input placeholder=\"BUSCAR POR NOMBRE O ID...\" className=\"bg-slate-900 border border-slate-800 rounded-2xl pl-12 pr-6 py-3 text-[10px] font-bold uppercase text-white w-72 outline-none focus:border-orange-500 transition-all\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} />\n                    </div>\n                  </div>\n                  <div className=\"overflow-hidden rounded-[2rem] border border-slate-800 bg-slate-900/20\">\n                    <table className=\"w-full text-[10px]\">\n                      <thead className=\"bg-slate-900/80 border-b border-slate-800 text-slate-500\">\n                        <tr>\n                          <th className=\"px-6 py-5 text-left uppercase font-black italic\">Alumno / Hardware</th>\n                          <th className=\"px-6 py-5 text-left uppercase font-black italic\">Aula Asignada</th>\n                          <th className=\"px-6 py-5 text-right uppercase font-black italic\">Acciones</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {filteredUsers.map((alumno) => {\n                          const device = tablets.find(t => t.id === alumno.tabletId);\n                          const isReq = activeUrlRequest === alumno.id;\n                          return (\n                            <tr key={alumno.id} className=\"border-b border-slate-800/30 hover:bg-slate-800/10 transition-all group\">\n                              <td className=\"px-6 py-5\">\n                                {editingUser?.id === alumno.id ? (\n                                  <input className=\"bg-black border border-orange-500 rounded px-2 py-1 text-white uppercase text-[10px]\" value={editingUser.nombre} onChange={e => setEditingUser({...editingUser, nombre: e.target.value})} />\n                                ) : (\n                                  <div>\n                                    <p className=\"font-black text-white italic uppercase\">{alumno.nombre}</p>\n                                    <p className=\"text-[8px] font-bold text-blue-500 flex items-center gap-1 mt-1 opacity-70\"><HardDrive size={10}/> {device?.mac_address || device?.imei || device?.id || 'NO VINCULADO'}</p>\n                                  </div>\n                                )}\n                              </td>\n                              <td className=\"px-6 py-5\">\n                                {editingUser?.id === alumno.id ? (\n                                  <select className=\"bg-black border border-orange-500 rounded px-2 py-1 text-white uppercase text-[9px]\" value={editingUser.aulaId} onChange={e => setEditingUser({...editingUser, aulaId: e.target.value})}>\n                                    <option value=\"\">SIN ASIGNAR</option>\n                                    {aulas.map(a => <option key={a.id} value={a.id}>{a.nombre_completo}</option>)}\n                                  </select>\n                                ) : (\n                                  <span className=\"uppercase font-bold text-slate-400\">{aulas.find(a => a.id === alumno.aulaId)?.nombre_completo || 'SIN AULA'}</span>\n                                )}\n                              </td>\n                              <td className=\"px-6 py-5\">\n                                <div className=\"flex gap-2 justify-end items-center\">\n                                  {isReq && device && (\n                                    <div className=\"bg-orange-500/10 border border-orange-500/20 px-3 py-1 rounded-lg animate-in fade-in slide-in-from-right-1\">\n                                      <p className=\"text-[7px] font-black text-orange-500 uppercase\">En Vivo:</p>\n                                      <p className=\"text-[9px] text-white font-medium truncate max-w-[120px]\">{device.last_url || 'SISTEMA'}</p>\n                                    </div>\n                                  )}\n                                  <button title=\"Consultar URL en Vivo\" onClick={() => setActiveUrlRequest(isReq ? null : alumno.id)} className={`p-2 rounded-lg transition-all ${isReq ? 'bg-orange-500 text-white' : 'bg-slate-800 text-slate-400 hover:text-white'}`}><Link2 size={14} /></button>\n                                  <button title=\"Ver Historial Web (Top 20)\" onClick={() => setHistoryModal({ isOpen: true, tabletId: alumno.tabletId || \"\", alumnoNombre: alumno.nombre })} className=\"p-2 bg-slate-800 rounded-lg text-slate-400 hover:text-orange-500 transition-all\"><Globe size={14} /></button>\n                                  {editingUser?.id === alumno.id ? (\n                                    <button title=\"Guardar Cambios\" onClick={handleUpdateUser} className=\"p-2 bg-green-600 rounded-lg text-white\"><Check size={14} /></button>\n                                  ) : (\n                                    <button title=\"Modificar Datos y Aula\" onClick={() => setEditingUser({id: alumno.id, nombre: alumno.nombre, aulaId: alumno.aulaId})} className=\"p-2 bg-slate-800 rounded-lg text-slate-400 hover:text-blue-500 transition-all\"><Edit3 size={14} /></button>\n                                  )}\n                                  <button title=\"Eliminar Alumno y Liberar Hardware\" onClick={() => handleDeleteUser(alumno.id, alumno.tabletId)} className=\"p-2 bg-slate-800 rounded-lg text-slate-400 hover:text-red-500 transition-all\"><Trash2 size={14} /></button>\n                                </div>\n                              </td>\n                            </tr>\n                          );\n                        })}\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              )}\n\n              {selectedAula && activeSection === 'dashboard' && (\n                <>\n                  <button onClick={() => setSelectedAula(null)} className=\"mb-8 flex items-center gap-2 text-[10px] font-black uppercase text-slate-500 hover:text-orange-500\"><ArrowLeft className=\"w-3 h-3\" /> Regresar</button>\n                  <div className=\"grid grid-cols-1 gap-4\">\n                    {alumnos.map((alumno) => {\n                      const device = tablets.find(t => t.id === alumno.tabletId);\n                      return (\n                        <div key={alumno.id} className=\"flex items-center justify-between p-6 bg-slate-900/50 rounded-[2rem] border border-slate-800 gap-4\">\n                          <div className=\"flex items-center gap-4 flex-1\">\n                            <div className=\"w-12 h-12 bg-slate-800 rounded-2xl flex items-center justify-center\"><User className={device?.online ? \"text-orange-500\" : \"text-slate-500\"} /></div>\n                            <div>\n                              <p className=\"text-sm font-black uppercase text-white italic\">{alumno.nombre}</p>\n                              <span className=\"text-[8px] font-black text-slate-500 uppercase\">{device?.online ? 'EN LÍNEA' : 'OFFLINE'}</span>\n                            </div>\n                          </div>\n                          <div className=\"flex gap-2\">\n                            <button title=\"Enviar Mensaje Directo\" onClick={() => setMessageModal({ isOpen: true, tabletId: alumno.tabletId || '', alumnoNombre: alumno.nombre, text: '' })} className=\"w-12 h-12 rounded-2xl bg-blue-500/10 border border-blue-500/20 flex items-center justify-center hover:bg-blue-500 transition-all group/msg\"><MessageSquare className=\"w-5 h-5 group-hover/msg:text-white\" /></button>\n                            <button title=\"Ver Actividad Reciente\" onClick={() => setHistoryModal({ isOpen: true, tabletId: alumno.tabletId || \"\", alumnoNombre: alumno.nombre })} className=\"w-12 h-12 rounded-2xl bg-orange-500/10 border border-orange-500/20 flex items-center justify-center hover:bg-orange-500 transition-all group/globe\"><Globe className=\"w-5 h-5 group-hover/globe:text-white\" /></button>\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </>\n              )}\n\n              {activeSection === 'settings' && (\n                <div className=\"space-y-10\">\n                  <div className=\"flex justify-between items-center\">\n                    <h2 className=\"text-4xl font-black italic uppercase text-white tracking-tighter leading-none\">Configuración <span className=\"text-orange-500 font-light\">de Sede</span></h2>\n                    <button onClick={handleUpdateInstitution} disabled={isSaving} className=\"bg-orange-500 hover:bg-orange-600 disabled:opacity-50 text-white px-6 py-3 rounded-2xl font-black text-[10px] uppercase italic transition-all flex items-center gap-2\">\n                      <Save size={16} /> {isSaving ? 'Guardando...' : 'Guardar Cambios'}\n                    </button>\n                  </div>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div className=\"bg-slate-900/40 p-8 rounded-[2.5rem] border border-slate-800 space-y-6\">\n                      <div className=\"flex items-center gap-3 text-orange-500 mb-2\"><Building2 size={16}/><span className=\"text-[10px] font-black uppercase tracking-widest\">Perfil General</span></div>\n                      <div className=\"space-y-2\">\n                        <label className=\"text-[9px] font-black text-slate-500 uppercase italic ml-1\">Nombre de la Sede</label>\n                        <input className={inputStyle} value={institutionName} onChange={(e) => setInstitutionName(e.target.value)} />\n                      </div>\n                      <div className=\"space-y-2\">\n                        <label className=\"text-[9px] font-black text-slate-500 uppercase italic ml-1\">Dirección Física</label>\n                        <div className=\"relative\">\n                          <MapPin size={14} className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-600\" />\n                          <input className={`${inputStyle} pl-12`} placeholder=\"Dirección Completa...\" value={instData.direccion} onChange={(e) => setInstData({...instData, direccion: e.target.value})} />\n                        </div>\n                      </div>\n                      <div className=\"space-y-2\">\n                        <label className=\"text-[9px] font-black text-slate-500 uppercase italic ml-1\">Teléfono de Contacto</label>\n                        <div className=\"relative\">\n                          <Smartphone size={14} className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-600\" />\n                          <input className={`${inputStyle} pl-12`} placeholder=\"+00 000 0000000\" value={instData.telefono} onChange={(e) => setInstData({...instData, telefono: e.target.value})} />\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"bg-slate-900/40 p-8 rounded-[2.5rem] border border-slate-800 space-y-4\">\n                      <div className=\"flex items-center gap-3 text-blue-500 mb-2\"><Key size={16}/><span className=\"text-[10px] font-black uppercase tracking-widest\">Identificador de Sede</span></div>\n                      <div className=\"w-full bg-slate-900 border border-slate-800 rounded-xl px-4 py-3 text-[10px] font-mono text-slate-500 truncate\">{institutionId}</div>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </main>\n\n      {/* MODALES EXTERNOS */}\n      {showModal && (\n        <div className=\"fixed inset-0 bg-[#0a0c10]/95 backdrop-blur-sm z-[100] flex items-center justify-center p-4\">\n          <div className=\"bg-[#0f1117] border border-slate-800 rounded-[3rem] p-10 w-full max-w-md shadow-2xl animate-in zoom-in duration-300\">\n            <h2 className=\"text-3xl font-black italic uppercase text-white mb-8\">\n              {editingAula ? 'Editar' : 'Nueva'} <span className=\"text-orange-500\">Aula</span>\n            </h2>\n            <form onSubmit={handleSaveAula} className=\"space-y-6\">\n              <input placeholder=\"EJ: LABORATORIO\" className={inputStyle} value={newAula.nombre_completo} onChange={e => setNewAula({...newAula, nombre_completo: e.target.value})} />\n              <input placeholder=\"EJ: 5TO AÑO B\" className={inputStyle} value={newAula.seccion} onChange={e => setNewAula({...newAula, seccion: e.target.value})} />\n              <div className=\"grid grid-cols-2 gap-4\">\n                <button type=\"button\" onClick={() => { setShowModal(false); setEditingAula(null); }} className=\"bg-slate-800 text-slate-400 font-black py-5 rounded-xl text-[10px] uppercase italic\">Cancelar</button>\n                <button type=\"submit\" className=\"bg-orange-500 text-white font-black py-5 rounded-xl text-[10px] uppercase italic\">Guardar</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {messageModal.isOpen && (\n        <div className=\"fixed inset-0 bg-[#0a0c10]/95 backdrop-blur-md z-[120] flex items-center justify-center p-4\">\n          <div className=\"bg-[#0f1117] border border-slate-800 rounded-[2.5rem] p-10 w-full max-w-md\">\n            <h2 className=\"text-xl font-black italic uppercase text-white mb-6\">Comunicado: <span className=\"text-blue-500\">{messageModal.alumnoNombre}</span></h2>\n            <textarea className=\"w-full bg-slate-900 border border-slate-800 p-4 rounded-xl text-white font-bold text-xs uppercase min-h-[120px] outline-none mb-6\" value={messageModal.text} onChange={(e) => setMessageModal({...messageModal, text: e.target.value})} />\n            <div className=\"flex gap-2\">\n               <button onClick={handleSendMessage} className=\"flex-1 bg-blue-600 p-5 rounded-xl font-black uppercase text-white text-[10px] italic\">Transmitir Alerta</button>\n               <button onClick={() => setMessageModal({...messageModal, isOpen: false})} className=\"p-5 text-[9px] font-black uppercase text-slate-600 italic\">Cerrar</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <WebHistoryModal isOpen={historyModal.isOpen} onClose={() => setHistoryModal({ ...historyModal, isOpen: false })} tabletId={historyModal.tabletId} alumnoNombre={historyModal.alumnoNombre} />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3538, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/super-admin/create-institution-form.tsx"],"sourcesContent":["'use client';\nimport React, { useState } from 'react';\nimport { db } from '@/firebase/config';\nimport { doc, setDoc, serverTimestamp } from 'firebase/firestore';\nimport { Building2, Plus } from 'lucide-react';\n\nexport default function CreateInstitutionForm() {\n  const [formData, setFormData] = useState({ manualId: '', nombre: '', direccion: '', telefono: '' });\n  const [isSaving, setIsSaving] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!formData.manualId || !formData.nombre) return alert(\"El ID y el Nombre son obligatorios\");\n    setIsSaving(true);\n    try {\n      // El ID del documento será manualId, pero el campo interno será InstitutoId\n      await setDoc(doc(db, \"institutions\", formData.manualId.trim()), {\n        InstitutoId: formData.manualId.trim(),\n        nombre: formData.nombre,\n        direccion: formData.direccion,\n        telefono: formData.telefono,\n        createdAt: serverTimestamp(),\n        status: 'active'\n      });\n      setFormData({ manualId: '', nombre: '', direccion: '', telefono: '' });\n      alert(\"✅ Sede creada con éxito. ID: \" + formData.manualId);\n    } catch (error) {\n      console.error(error);\n      alert(\"Error al crear la sede\");\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const inputStyle = \"w-full bg-[#1a1d26] border border-slate-800 p-4 rounded-xl focus:border-orange-500 outline-none font-bold text-slate-200 text-[10px] uppercase transition-all\";\n\n  return (\n    <section className=\"bg-[#0f1117] p-8 rounded-[3rem] border border-slate-800 shadow-2xl\">\n      <h2 className=\"text-xl font-black italic uppercase text-white mb-6 flex items-center gap-3\">\n        <Building2 className=\"text-orange-500 w-5 h-5\" /> Nueva Sede\n      </h2>\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div>\n          <label className=\"text-[9px] font-black text-slate-500 uppercase mb-2 block italic\">ID Manual (InstitutoId)</label>\n          <input className={inputStyle} value={formData.manualId} onChange={e => setFormData({...formData, manualId: e.target.value})} placeholder=\"EJ: SC-005...\" />\n        </div>\n        <div>\n          <label className=\"text-[9px] font-black text-slate-500 uppercase mb-2 block italic\">Nombre del Instituto</label>\n          <input className={inputStyle} value={formData.nombre} onChange={e => setFormData({...formData, nombre: e.target.value})} placeholder=\"NOMBRE DE LA SEDE...\" />\n        </div>\n        <button type=\"submit\" disabled={isSaving} className=\"w-full bg-orange-500 hover:bg-orange-600 text-white font-black py-5 rounded-2xl text-[10px] uppercase italic transition-all flex items-center justify-center gap-2\">\n          {isSaving ? 'CREANDO...' : <><Plus size={16}/> CREAR INSTITUCIÓN</>}\n        </button>\n      </form>\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAAA;AACA;AAAA;;;AAJA;;;;;AAMe,SAAS;;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;QAAE,UAAU;QAAI,QAAQ;QAAI,WAAW;QAAI,UAAU;IAAG;IACjG,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IAEzC,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,IAAI,CAAC,SAAS,QAAQ,IAAI,CAAC,SAAS,MAAM,EAAE,OAAO,MAAM;QACzD,YAAY;QACZ,IAAI;YACF,4EAA4E;YAC5E,MAAM,IAAA,gLAAM,EAAC,IAAA,6KAAG,EAAC,kIAAE,EAAE,gBAAgB,SAAS,QAAQ,CAAC,IAAI,KAAK;gBAC9D,aAAa,SAAS,QAAQ,CAAC,IAAI;gBACnC,QAAQ,SAAS,MAAM;gBACvB,WAAW,SAAS,SAAS;gBAC7B,UAAU,SAAS,QAAQ;gBAC3B,WAAW,IAAA,yLAAe;gBAC1B,QAAQ;YACV;YACA,YAAY;gBAAE,UAAU;gBAAI,QAAQ;gBAAI,WAAW;gBAAI,UAAU;YAAG;YACpE,MAAM,kCAAkC,SAAS,QAAQ;QAC3D,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC;YACd,MAAM;QACR,SAAU;YACR,YAAY;QACd;IACF;IAEA,MAAM,aAAa;IAEnB,qBACE,6LAAC;QAAQ,WAAU;;0BACjB,6LAAC;gBAAG,WAAU;;kCACZ,6LAAC,gOAAS;wBAAC,WAAU;;;;;;oBAA4B;;;;;;;0BAEnD,6LAAC;gBAAK,UAAU;gBAAc,WAAU;;kCACtC,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;0CAAmE;;;;;;0CACpF,6LAAC;gCAAM,WAAW;gCAAY,OAAO,SAAS,QAAQ;gCAAE,UAAU,CAAA,IAAK,YAAY;wCAAC,GAAG,QAAQ;wCAAE,UAAU,EAAE,MAAM,CAAC,KAAK;oCAAA;gCAAI,aAAY;;;;;;;;;;;;kCAE3I,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;0CAAmE;;;;;;0CACpF,6LAAC;gCAAM,WAAW;gCAAY,OAAO,SAAS,MAAM;gCAAE,UAAU,CAAA,IAAK,YAAY;wCAAC,GAAG,QAAQ;wCAAE,QAAQ,EAAE,MAAM,CAAC,KAAK;oCAAA;gCAAI,aAAY;;;;;;;;;;;;kCAEvI,6LAAC;wBAAO,MAAK;wBAAS,UAAU;wBAAU,WAAU;kCACjD,WAAW,6BAAe;;8CAAE,6LAAC,6MAAI;oCAAC,MAAM;;;;;;gCAAK;;;;;;;;;;;;;;;;;;;;AAKxD;GAlDwB;KAAA","debugId":null}},
    {"offset": {"line": 3721, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/super-admin/institution-list.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport { db } from '@/firebase/config';\nimport { collection, onSnapshot, deleteDoc, doc } from 'firebase/firestore';\nimport { Trash2, Building2, ArrowRight } from 'lucide-react';\nimport { useInstitution } from '@/app/(admin)/dashboard/institution-context';\n\nexport default function InstitutionList() {\n  const [institutions, setInstitutions] = React.useState<any[]>([]);\n  const { setInstitutionId } = useInstitution();\n\n  React.useEffect(() => {\n    return onSnapshot(collection(db, \"institutions\"), (s) => {\n      setInstitutions(s.docs.map(d => ({ id: d.id, ...d.data() })));\n    });\n  }, []);\n\n  const handleDelete = async (e: React.MouseEvent, id: string, nombre: string) => {\n    e.stopPropagation(); // Evita que se dispare el evento de 'Gestionar'\n    const confirmDelete = confirm(`⚠️ ACCIÓN CRÍTICA ⚠️\\n\\n¿Estás seguro de eliminar la sede \"${nombre.toUpperCase()}\"?\\nEsta acción borrará el registro de la institución permanentemente.`);\n    \n    if (confirmDelete) {\n      try {\n        await deleteDoc(doc(db, \"institutions\", id));\n        alert(\"✅ Sede eliminada correctamente.\");\n      } catch (error) {\n        console.error(\"Error al eliminar:\", error);\n        alert(\"No se pudo eliminar la sede.\");\n      }\n    }\n  };\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n      {institutions.map((inst) => (\n        <div key={inst.id} className=\"bg-[#0f1117] p-8 rounded-[2.5rem] border border-slate-800 hover:border-orange-500/50 transition-all group relative\">\n          <div className=\"flex justify-between items-start mb-6\">\n            <div className=\"bg-slate-900 p-4 rounded-2xl text-orange-500\">\n              <Building2 size={24} />\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <span className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></span>\n              <span className=\"text-[8px] font-black text-slate-500 uppercase italic\">Online</span>\n            </div>\n          </div>\n\n          <h3 className=\"text-2xl font-black italic uppercase text-white mb-2 leading-none truncate pr-10\">\n            {inst.nombre || 'Sin Nombre'}\n          </h3>\n          <p className=\"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-8\">\n            Access Key: <span className=\"text-orange-500/80\">{inst.InstitutoId || inst.id}</span>\n          </p>\n\n          <div className=\"flex gap-3\">\n            <button \n              onClick={() => setInstitutionId(inst.id)}\n              className=\"flex-1 bg-white text-black font-black py-4 rounded-xl text-[10px] uppercase italic flex items-center justify-center gap-2 hover:bg-orange-500 hover:text-white transition-all\"\n            >\n              Gestionar <ArrowRight size={14} />\n            </button>\n            \n            {/* BOTÓN DE ELIMINAR SEÑALADO EN TU IMAGEN */}\n            <button \n              onClick={(e) => handleDelete(e, inst.id, inst.nombre)}\n              className=\"p-4 bg-slate-900 border border-slate-800 text-slate-500 hover:text-red-500 hover:border-red-500/50 rounded-xl transition-all\"\n              title=\"Eliminar Sede\"\n            >\n              <Trash2 size={18} />\n            </button>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;;;AALA;;;;;;AAOe,SAAS;;IACtB,MAAM,CAAC,cAAc,gBAAgB,GAAG,wKAAK,CAAC,QAAQ,CAAQ,EAAE;IAChE,MAAM,EAAE,gBAAgB,EAAE,GAAG,IAAA,oLAAc;IAE3C,wKAAK,CAAC,SAAS;qCAAC;YACd,OAAO,IAAA,oLAAU,EAAC,IAAA,oLAAU,EAAC,kIAAE,EAAE;6CAAiB,CAAC;oBACjD,gBAAgB,EAAE,IAAI,CAAC,GAAG;qDAAC,CAAA,IAAK,CAAC;gCAAE,IAAI,EAAE,EAAE;gCAAE,GAAG,EAAE,IAAI,EAAE;4BAAC,CAAC;;gBAC5D;;QACF;oCAAG,EAAE;IAEL,MAAM,eAAe,OAAO,GAAqB,IAAY;QAC3D,EAAE,eAAe,IAAI,gDAAgD;QACrE,MAAM,gBAAgB,QAAQ,AAAC,8DAAkF,OAArB,OAAO,WAAW,IAAG;QAEjH,IAAI,eAAe;YACjB,IAAI;gBACF,MAAM,IAAA,mLAAS,EAAC,IAAA,6KAAG,EAAC,kIAAE,EAAE,gBAAgB;gBACxC,MAAM;YACR,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,sBAAsB;gBACpC,MAAM;YACR;QACF;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACZ,aAAa,GAAG,CAAC,CAAC,qBACjB,6LAAC;gBAAkB,WAAU;;kCAC3B,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,gOAAS;oCAAC,MAAM;;;;;;;;;;;0CAEnB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;;;;;;kDAChB,6LAAC;wCAAK,WAAU;kDAAwD;;;;;;;;;;;;;;;;;;kCAI5E,6LAAC;wBAAG,WAAU;kCACX,KAAK,MAAM,IAAI;;;;;;kCAElB,6LAAC;wBAAE,WAAU;;4BAAsE;0CACrE,6LAAC;gCAAK,WAAU;0CAAsB,KAAK,WAAW,IAAI,KAAK,EAAE;;;;;;;;;;;;kCAG/E,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,SAAS,IAAM,iBAAiB,KAAK,EAAE;gCACvC,WAAU;;oCACX;kDACW,6LAAC,mOAAU;wCAAC,MAAM;;;;;;;;;;;;0CAI9B,6LAAC;gCACC,SAAS,CAAC,IAAM,aAAa,GAAG,KAAK,EAAE,EAAE,KAAK,MAAM;gCACpD,WAAU;gCACV,OAAM;0CAEN,cAAA,6LAAC,uNAAM;oCAAC,MAAM;;;;;;;;;;;;;;;;;;eAhCV,KAAK,EAAE;;;;;;;;;;AAuCzB;GAnEwB;;QAEO,oLAAc;;;KAFrB","debugId":null}},
    {"offset": {"line": 3921, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/admin/users/UserManagement.tsx"],"sourcesContent":["'use client';\nimport React, { useState, useEffect } from 'react';\nimport { db } from '@/firebase/config';\nimport { collection, addDoc, onSnapshot, query, where, getDocs } from 'firebase/firestore';\nimport { Loader2, UserPlus, ShieldCheck } from 'lucide-react';\n\nexport default function UserManagement() {\n  const [loading, setLoading] = useState(false);\n  const [formData, setFormData] = useState({ \n    nombre: '', \n    email: '', \n    role: 'director', \n    InstitutoId: '' \n  });\n  const [institutions, setInstitutions] = useState<any[]>([]);\n\n  // 1. Cargar lista de instituciones para el select\n  useEffect(() => {\n    const unsub = onSnapshot(query(collection(db, \"institutions\")), (snapshot) => {\n      setInstitutions(snapshot.docs.map(d => ({ id: d.id, ...d.data() })));\n    });\n    return () => unsub();\n  }, []);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!formData.email || !formData.InstitutoId) return;\n    setLoading(true);\n\n    try {\n      // 2. Guardar en la colección global de usuarios\n      await addDoc(collection(db, \"usuarios\"), {\n        nombre: formData.nombre,\n        email: formData.email.toLowerCase().trim(),\n        role: formData.role,\n        InstitutoId: formData.InstitutoId, // VINCULACIÓN MAESTRA\n        createdAt: new Date()\n      });\n      \n      setFormData({ nombre: '', email: '', role: 'director', InstitutoId: '' });\n      alert(\"Usuario creado y vinculado correctamente\");\n    } catch (error) {\n      console.error(\"Error:\", error);\n      alert(\"Error al crear usuario\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const inputStyle = \"w-full bg-[#1a1d26] border border-slate-800 p-4 rounded-xl focus:border-orange-500 outline-none font-bold text-slate-200 text-xs transition-all placeholder:text-slate-600\";\n  const selectStyle = \"w-full bg-[#1a1d26] border border-slate-800 p-4 rounded-xl focus:border-orange-500 outline-none font-bold text-slate-200 text-xs transition-all appearance-none\";\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <div className=\"flex items-center gap-3 mb-6\">\n        <UserPlus className=\"text-orange-500 w-5 h-5\" />\n        <h3 className=\"text-sm font-black uppercase text-white tracking-widest italic\">Nuevo Operador</h3>\n      </div>\n      \n      <input required className={inputStyle} value={formData.nombre} onChange={(e) => setFormData({...formData, nombre: e.target.value})} placeholder=\"NOMBRE COMPLETO\" />\n      <input required type=\"email\" className={inputStyle} value={formData.email} onChange={(e) => setFormData({...formData, email: e.target.value})} placeholder=\"CORREO ELECTRÓNICO\" />\n      \n      <div className=\"grid grid-cols-2 gap-4\">\n        <select className={selectStyle} value={formData.role} onChange={(e) => setFormData({...formData, role: e.target.value})}>\n          <option value=\"director\">Director</option>\n          <option value=\"profesor\">Profesor</option>\n        </select>\n        \n        {/* SELECTOR DE INSTITUCIÓN (VINCULACIÓN) */}\n        <select required className={selectStyle} value={formData.InstitutoId} onChange={(e) => setFormData({...formData, InstitutoId: e.target.value})}>\n          <option value=\"\">Seleccionar Sede</option>\n          {institutions.map(inst => (\n            <option key={inst.InstitutoId} value={inst.InstitutoId}>{inst.nombre} ({inst.InstitutoId})</option>\n          ))}\n        </select>\n      </div>\n\n      <button disabled={loading} type=\"submit\" className=\"w-full bg-slate-900 hover:bg-orange-500 text-white font-black italic uppercase py-4 rounded-xl transition-all shadow-lg flex items-center justify-center gap-3 text-xs mt-4 border border-slate-800\">\n        {loading ? <Loader2 className=\"animate-spin w-4 h-4\" /> : <ShieldCheck className=\"w-4 h-4\" />}\n        Vincular al Sistema\n      </button>\n    </form>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4172, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/dashboard/SuperAdminView.tsx"],"sourcesContent":["'use client';\nimport React, { useState, useEffect } from 'react';\nimport { db } from '@/firebase/config';\nimport { \n collection, onSnapshot, query, where, addDoc, serverTimestamp, \n orderBy, limit, updateDoc, doc, arrayUnion, arrayRemove, deleteDoc, setDoc, Timestamp \n} from 'firebase/firestore';\nimport { useInstitution } from '@/app/(admin)/dashboard/institution-context';\nimport { QRCodeSVG } from 'qrcode.react';\nimport { \n ShieldCheck, Users, Zap, QrCode, Play, Tablet, Building2, ShieldAlert, \n Plus, X, Smartphone, Lock, Eye, EyeOff, Layout, GraduationCap, Briefcase, Trash2, Edit3, Globe, CheckCircle2, AlertCircle, Settings2, DoorOpen, Save, Search, Layers\n} from 'lucide-react';\n\nimport CreateInstitutionForm from '@/components/super-admin/create-institution-form';\nimport InstitutionList from '@/components/super-admin/institution-list';\nimport UserManagement from '@/components/admin/users/UserManagement';\n\nexport default function SuperAdminView() {\n  const { institutionId } = useInstitution();\n  const [activeTab, setActiveTab] = useState('vincular'); \n  const [subTab, setSubTab] = useState<'master' | 'jornada'>('jornada');\n  const [institutions, setInstitutions] = useState<any[]>([]);\n  const [availableAulas, setAvailableAulas] = useState<any[]>([]);\n  const [devices, setDevices] = useState<any[]>([]);\n  const [allUsers, setAllUsers] = useState<any[]>([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  \n  const [targetInstId, setTargetInstId] = useState('');\n  const [targetAulaId, setTargetAulaId] = useState('');\n  const [currentAulaData, setCurrentAulaData] = useState<any>(null);\n\n  const [isJornadaActive, setIsJornadaActive] = useState(false);\n  const [sessionStartTime, setSessionStartTime] = useState<Date | null>(null); \n  \n  // Estación de vinculación con selectores de precisión\n  const [selectedConfig, setSelectedConfig] = useState({ \n    instId: '', \n    seccion: '',\n    aulaId: '', \n    rol: 'alumno' \n  });\n  \n  const [lastLinkedDevice, setLastLinkedDevice] = useState<any>(null);\n  const [studentName, setStudentName] = useState('');\n  const [isSaving, setIsSaving] = useState(false);\n  const [appToBlock, setAppToBlock] = useState('');\n\n  const [appVersion, setAppVersion] = useState({ code: 1, url: '', force: true });\n  const [editingUser, setEditingUser] = useState<any>(null);\n  const [editForm, setEditForm] = useState({ \n    nombre: '', \n    InstitutoId: '', \n    seccionSeleccionada: '', \n    aulaIdFinal: '' \n  });\n  const [editAulasList, setEditAulasList] = useState<any[]>([]);\n\n  // Listeners Core\n  useEffect(() => {\n    return onSnapshot(doc(db, \"config\", \"app_status\"), (d) => {\n      if (d.exists()) {\n        const data = d.data();\n        setAppVersion({\n          code: data.versionCode || 1,\n          url: data.downloadUrl || '',\n          force: data.forceUpdate ?? true\n        });\n      }\n    });\n  }, []);\n\n  useEffect(() => {\n    return onSnapshot(collection(db, \"institutions\"), (s) => {\n      setInstitutions(s.docs.map(d => ({ id: d.id, ...d.data() })));\n    });\n  }, []);\n\n  useEffect(() => {\n    const q = query(collection(db, \"usuarios\"), where(\"role\", \"in\", [\"director\", \"profesor\"]));\n    return onSnapshot(q, (s) => {\n      setAllUsers(s.docs.map(d => ({ id: d.id, ...d.data() })));\n    });\n  }, []);\n\n  // Carga dinámica de aulas para Vinculación y Filtros\n  useEffect(() => {\n    const instIdToLoad = activeTab === 'vincular' ? selectedConfig.instId : targetInstId;\n    if (!instIdToLoad) {\n      setAvailableAulas([]);\n      return;\n    }\n    return onSnapshot(collection(db, `institutions/${instIdToLoad}/Aulas`), (s) => {\n      setAvailableAulas(s.docs.map(d => ({ id: d.id, ...d.data() })));\n    });\n  }, [targetInstId, selectedConfig.instId, activeTab]);\n\n  // Carga dinámica para Reasignación de Usuarios\n  useEffect(() => {\n    if (!editForm.InstitutoId) {\n      setEditAulasList([]);\n      return;\n    }\n    return onSnapshot(collection(db, `institutions/${editForm.InstitutoId}/Aulas`), (s) => {\n      setEditAulasList(s.docs.map(d => ({ id: d.id, ...d.data() })));\n    });\n  }, [editForm.InstitutoId]);\n\n  // Monitorización de Aula Específica (Pestaña Dispositivos)\n  useEffect(() => {\n    if (!targetInstId || !targetAulaId) {\n      setCurrentAulaData(null);\n      return;\n    }\n    return onSnapshot(doc(db, `institutions/${targetInstId}/Aulas`, targetAulaId), (d) => {\n      if (d.exists()) setCurrentAulaData({ id: d.id, ...d.data() });\n    });\n  }, [targetInstId, targetAulaId]);\n\n  useEffect(() => {\n    const q = targetAulaId \n      ? query(collection(db, \"dispositivos\"), where(\"aulaId\", \"==\", targetAulaId))\n      : query(collection(db, \"dispositivos\"));\n    \n    return onSnapshot(q, (s) => {\n      setDevices(s.docs.map(d => ({ id: d.id, ...d.data() })));\n    });\n  }, [targetAulaId]);\n\n  useEffect(() => {\n    if (!isJornadaActive || !sessionStartTime) return; \n    const q = query(\n      collection(db, \"dispositivos\"),\n      where(\"status\", \"==\", \"pending_name\"),\n      where(\"createdAt\", \">=\", sessionStartTime),\n      orderBy(\"createdAt\", \"desc\"),\n      limit(1)\n    );\n    return onSnapshot(q, (s) => {\n      if (!s.empty) {\n        setLastLinkedDevice({ id: s.docs[0].id, ...s.docs[0].data() });\n      }\n    });\n  }, [isJornadaActive, sessionStartTime]);\n\n  // Funciones de Acción\n  const handleUpdateAppVersion = async () => {\n    try {\n      await setDoc(doc(db, \"config\", \"app_status\"), {\n        versionCode: Number(appVersion.code),\n        downloadUrl: appVersion.url,\n        forceUpdate: appVersion.force,\n        updatedAt: serverTimestamp()\n      });\n      alert(\"🚀 Orden de actualización enviada a todas las tablets\");\n    } catch (e) { console.error(e); }\n  };\n\n  const handleEditClick = (user: any) => {\n    setEditingUser(user);\n    setEditForm({ \n      nombre: user.nombre || '', \n      InstitutoId: user.InstitutoId || '',\n      seccionSeleccionada: '', \n      aulaIdFinal: ''\n    });\n  };\n\n  const handleUpdateUser = async () => {\n    if (!editingUser || !editForm.aulaIdFinal) return;\n    const aulaSeleccionada = editAulasList.find(a => a.id === editForm.aulaIdFinal);\n    try {\n      await updateDoc(doc(db, \"usuarios\", editingUser.id), {\n        nombre: editForm.nombre,\n        InstitutoId: editForm.InstitutoId,\n        seccion: aulaSeleccionada?.nombre_completo || '',\n        lastUpdated: serverTimestamp()\n      });\n      setEditingUser(null);\n      alert(\"✅ Operador reasignado exitosamente\");\n    } catch (e) { console.error(e); }\n  };\n\n  const handleDeleteUser = async (userId: string) => {\n    if (confirm('¿ELIMINAR ESTE OPERADOR?')) {\n      try { await deleteDoc(doc(db, \"usuarios\", userId)); } catch (e) { console.error(e); }\n    }\n  };\n\n  const handleSaveStudent = async () => {\n    if (!studentName || !lastLinkedDevice) return;\n    setIsSaving(true);\n    try {\n      const deviceId = lastLinkedDevice.serial || lastLinkedDevice.id;\n      await setDoc(doc(db, \"dispositivos\", deviceId), {\n        status: 'active',\n        alumno_asignado: studentName,\n        InstitutoId: selectedConfig.instId,\n        aulaId: selectedConfig.aulaId,\n        rol: selectedConfig.rol,\n        deviceSerial: lastLinkedDevice.serial || 'N/A',\n        lastUpdated: serverTimestamp(),\n        restrictions: { extremeSecurity: false } \n      }, { merge: true });\n      setLastLinkedDevice(null);\n      setStudentName('');\n    } catch (e) { console.error(e); } finally { setIsSaving(false); }\n  };\n\n  const addAppToAulaBlacklist = async () => {\n    if (!appToBlock || !targetInstId || !targetAulaId) return;\n    const aulaRef = doc(db, `institutions/${targetInstId}/Aulas`, targetAulaId);\n    await updateDoc(aulaRef, {\n      blacklistedApps: arrayUnion(appToBlock.toLowerCase().trim()),\n      lastSecurityUpdate: serverTimestamp()\n    });\n    setAppToBlock('');\n  };\n\n  const removeAppFromAulaBlacklist = async (appName: string) => {\n    const aulaRef = doc(db, `institutions/${targetInstId}/Aulas`, targetAulaId);\n    await updateDoc(aulaRef, { blacklistedApps: arrayRemove(appName) });\n  };\n\n  const toggleExtremeSecurity = async (deviceId: string, currentStatus: boolean) => {\n    await updateDoc(doc(db, \"dispositivos\", deviceId), {\n      \"restrictions.extremeSecurity\": !currentStatus,\n      lastUpdated: serverTimestamp()\n    });\n  };\n\n  const handleCleanupInstitutions = async () => {\n    if (!confirm(\"⚠️ ADVERTENCIA: ¿Eliminar sedes con IDs aleatorios?\")) return;\n    try {\n      const toDelete = institutions.filter(inst => inst.id.length > 15);\n      for (const inst of toDelete) { await deleteDoc(doc(db, \"institutions\", inst.id)); }\n    } catch (e) { console.error(e); }\n  };\n\n  const filteredUsers = allUsers.filter(u => \n    u.nombre?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    u.email?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    u.seccion?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    u.role?.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const uniqueSectionsForEdit = Array.from(new Set(editAulasList.map(a => a.seccion))).filter(Boolean);\n  const uniqueSectionsForVincular = Array.from(new Set(availableAulas.map(a => a.seccion))).filter(Boolean);\n\n  const generateMasterQR = () => {\n    const masterConfig = {\n      \"android.app.extra.PROVISIONING_DEVICE_ADMIN_PACKAGE_NAME\": \"com.educontrolpro\",\n      \"android.app.extra.PROVISIONING_DEVICE_ADMIN_COMPONENT_NAME\": \"com.educontrolpro/.AdminReceiver\",\n      \"android.app.extra.PROVISIONING_DEVICE_ADMIN_PACKAGE_DOWNLOAD_LOCATION\": appVersion.url,\n      \"android.app.extra.PROVISIONING_DEVICE_ADMIN_SIGNATURE_CHECKSUM\": \"bcofwtekjwPs7yqTj5kHv1ZqTS/n7JqEkN1b9R1GHZ0=\",\n      \"android.app.extra.PROVISIONING_LEAVE_ALL_SYSTEM_APPS_ENABLED\": true,\n      \"android.app.extra.PROVISIONING_SKIP_ENCRYPTION\": true\n    };\n    return JSON.stringify(masterConfig);\n  };\n\n  const generateVincularQR = () => {\n    return JSON.stringify({\n      InstitutoId: selectedConfig.instId,\n      aulaId: selectedConfig.aulaId,\n      rol: selectedConfig.rol\n    });\n  };\n\n  const inputStyle = \"w-full bg-[#1a1d26] border border-slate-800 p-4 rounded-xl focus:border-orange-500 outline-none font-bold text-slate-200 text-[10px] uppercase transition-all\";\n\n  return (\n    <div className=\"min-h-screen bg-[#0a0c10] text-slate-300 font-sans\">\n      <nav className=\"fixed left-0 top-0 h-full w-20 bg-[#0f1117] border-r border-slate-800/50 flex flex-col items-center py-8 gap-8 z-50\">\n        <div className=\"bg-orange-500 p-3 rounded-2xl shadow-lg shadow-orange-500/20\"><ShieldCheck className=\"text-white w-6 h-6\" /></div>\n        <div className=\"flex-1 flex flex-col gap-6 pt-10\">\n          <button onClick={() => setActiveTab('vincular')} className={`p-3 rounded-xl transition-all ${activeTab === 'vincular' ? 'text-orange-500 bg-orange-500/10' : 'text-slate-600 hover:text-white'}`}><Zap className=\"w-5 h-5\" /></button>\n          <button onClick={() => setActiveTab('sedes')} className={`p-3 rounded-xl transition-all ${activeTab === 'sedes' ? 'text-orange-500 bg-orange-500/10' : 'text-slate-600 hover:text-white'}`}><Building2 className=\"w-5 h-5\" /></button>\n          <button onClick={() => setActiveTab('usuarios')} className={`p-3 rounded-xl transition-all ${activeTab === 'usuarios' ? 'text-orange-500 bg-orange-500/10' : 'text-slate-600 hover:text-white'}`}><Users className=\"w-5 h-5\" /></button>\n          <button onClick={() => setActiveTab('dispositivos')} className={`p-3 rounded-xl transition-all ${activeTab === 'dispositivos' ? 'text-orange-500 bg-orange-500/10' : 'text-slate-600 hover:text-white'}`}><Tablet className=\"w-5 h-5\" /></button>\n        </div>\n      </nav>\n\n      <main className=\"pl-20\">\n        <header className=\"sticky top-0 z-40 bg-[#0a0c10]/80 backdrop-blur-md border-b border-slate-800/50 px-10 py-8 flex justify-between items-center\">\n            <div>\n              <h1 className=\"text-4xl font-black italic uppercase text-white tracking-tighter\">EDU <span className=\"text-orange-500\">ControlPro</span></h1>\n              <p className=\"text-[9px] font-black text-slate-500 uppercase tracking-[0.4em] mt-1 italic\">Super Admin Control</p>\n            </div>\n        </header>\n\n        <div className=\"p-10 max-w-[1700px] mx-auto\">\n          {activeTab === 'vincular' && (\n            <div className=\"space-y-8 animate-in slide-in-from-bottom-4\">\n              <div className=\"flex gap-4\">\n                <button onClick={() => setSubTab('jornada')} className={`px-6 py-2 rounded-full text-[9px] font-black uppercase italic transition-all ${subTab === 'jornada' ? 'bg-orange-500 text-white' : 'bg-slate-900 text-slate-500 border border-slate-800'}`}>Jornada Estándar</button>\n                <button onClick={() => setSubTab('master')} className={`px-6 py-2 rounded-full text-[9px] font-black uppercase italic transition-all ${subTab === 'master' ? 'bg-blue-600 text-white' : 'bg-slate-900 text-slate-500 border border-slate-800'}`}>Provisionamiento Master</button>\n              </div>\n\n              <div className=\"grid grid-cols-12 gap-10\">\n                <div className=\"col-span-12 lg:col-span-5\">\n                  <section className={`bg-[#0f1117] p-8 rounded-[3rem] border-2 shadow-2xl relative ${subTab === 'master' ? 'border-blue-500/20' : 'border-orange-500/20'}`}>\n                    {subTab === 'master' ? (\n                      <div className=\"text-center py-4\">\n                        <h2 className=\"text-xs font-black uppercase italic text-white flex items-center justify-center gap-2 mb-6\"><Settings2 className=\"text-blue-500\" size={18}/> Estación Master</h2>\n                        <div className=\"bg-white p-6 rounded-[2rem] inline-block border-[12px] border-slate-900 mb-6\">\n                          <QRCodeSVG value={generateMasterQR()} size={240} level=\"M\" />\n                        </div>\n                      </div>\n                    ) : (\n                      <>\n                        <h2 className=\"text-xs font-black uppercase italic text-white flex items-center gap-2 mb-8\"><QrCode className=\"text-orange-500\" size={18}/> Estación de Vinculación</h2>\n                        {!isJornadaActive ? (\n                          <div className=\"space-y-4\">\n                            <select className={inputStyle} onChange={e => setSelectedConfig({...selectedConfig, instId: e.target.value, seccion: '', aulaId: ''})}>\n                              <option value=\"\">1. SELECCIONAR SEDE</option>\n                              {institutions.map(i => <option key={i.id} value={i.id}>{i.nombre}</option>)}\n                            </select>\n\n                            <select className={inputStyle} disabled={!selectedConfig.instId} value={selectedConfig.seccion} onChange={e => setSelectedConfig({...selectedConfig, seccion: e.target.value, aulaId: ''})}>\n                              <option value=\"\">2. SELECCIONAR SECCIÓN</option>\n                              {uniqueSectionsForVincular.map(sec => <option key={sec} value={sec}>{sec}</option>)}\n                            </select>\n\n                            <select className={inputStyle} disabled={!selectedConfig.seccion} value={selectedConfig.aulaId} onChange={e => setSelectedConfig({...selectedConfig, aulaId: e.target.value})}>\n                              <option value=\"\">3. SELECCIONAR AULA EXACTA</option>\n                              {availableAulas.filter(a => a.seccion === selectedConfig.seccion).map(a => <option key={a.id} value={a.id}>{a.nombre_completo}</option>)}\n                            </select>\n\n                            <div className=\"grid grid-cols-2 gap-4\">\n                              <button onClick={() => setSelectedConfig({...selectedConfig, rol: 'alumno'})} className={`p-4 rounded-xl border-2 flex flex-col items-center gap-2 ${selectedConfig.rol === 'alumno' ? 'border-orange-500 bg-orange-500/10' : 'border-slate-800 bg-slate-900/50'}`}><GraduationCap size={20}/><span className=\"text-[8px] font-black uppercase\">Alumno</span></button>\n                              <button onClick={() => setSelectedConfig({...selectedConfig, rol: 'profesor'})} className={`p-4 rounded-xl border-2 flex flex-col items-center gap-2 ${selectedConfig.rol === 'profesor' ? 'border-orange-500 bg-orange-500/10' : 'border-slate-800 bg-slate-900/50'}`}><Briefcase size={20}/><span className=\"text-[8px] font-black uppercase\">Profesor</span></button>\n                            </div>\n                            \n                            <button disabled={!selectedConfig.aulaId} onClick={() => { setSessionStartTime(new Date()); setIsJornadaActive(true); }} className=\"w-full bg-orange-500 disabled:bg-slate-800 text-white font-black py-5 rounded-2xl shadow-lg shadow-orange-500/20\">Activar Estación</button>\n                          </div>\n                        ) : (\n                          <div className=\"flex flex-col items-center py-4\">\n                            <div className=\"bg-white p-6 rounded-[2rem] mb-8 border-[12px] border-slate-900\">\n                              <QRCodeSVG value={generateVincularQR()} size={240} level=\"L\" />\n                            </div>\n                            {lastLinkedDevice ? (\n                              <div className=\"w-full bg-slate-900 p-6 rounded-3xl border border-orange-500 animate-in zoom-in\">\n                                <label className=\"text-[8px] font-black text-orange-500 uppercase mb-2 block\">Dispositivo Detectado</label>\n                                <input autoFocus className={inputStyle} placeholder=\"NOMBRE DEL ALUMNO\" value={studentName} onChange={e => setStudentName(e.target.value)} />\n                                <button onClick={handleSaveStudent} className=\"w-full bg-green-600 text-white font-black py-4 rounded-xl text-[10px] mt-4 uppercase\">Finalizar Vinculación</button>\n                              </div>\n                            ) : (\n                              <div className=\"text-center\">\n                                <p className=\"text-[10px] font-bold text-slate-500 uppercase animate-pulse\">Esperando vinculación...</p>\n                                <p className=\"text-[8px] text-slate-600 mt-2\">Aula: {availableAulas.find(a => a.id === selectedConfig.aulaId)?.nombre_completo}</p>\n                              </div>\n                            )}\n                            <button onClick={() => { setIsJornadaActive(false); setLastLinkedDevice(null); }} className=\"mt-8 text-[9px] font-black text-red-500/50 uppercase\">Cerrar Sesión</button>\n                          </div>\n                        )}\n                      </>\n                    )}\n                  </section>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'dispositivos' && (\n            <div className=\"space-y-10 animate-in fade-in\">\n              <section className=\"bg-[#0f1117] p-8 rounded-[3rem] border-2 border-blue-500/20 shadow-2xl overflow-hidden relative\">\n                <div className=\"absolute top-0 right-0 p-10 opacity-5 pointer-events-none\"><Globe size={120}/></div>\n                <div className=\"flex justify-between items-center mb-6 relative z-10\">\n                  <h2 className=\"text-xs font-black uppercase italic text-white flex items-center gap-2\"><Globe className=\"text-blue-500\" size={18}/> Panel APK Global</h2>\n                  <button onClick={handleUpdateAppVersion} className=\"bg-blue-600 text-white text-[10px] font-black px-8 py-3 rounded-full shadow-lg shadow-blue-900/40\">Publicar Actualización</button>\n                </div>\n                <div className=\"grid grid-cols-12 gap-6 relative z-10\">\n                  <div className=\"col-span-3\">\n                    <label className=\"text-[9px] font-black text-slate-500 uppercase mb-2 block italic\">Version Code</label>\n                    <input type=\"number\" className={inputStyle} value={appVersion.code} onChange={e => setAppVersion({...appVersion, code: parseInt(e.target.value) || 0})} />\n                  </div>\n                  <div className=\"col-span-9\">\n                    <label className=\"text-[9px] font-black text-slate-500 uppercase mb-2 block italic\">URL Descarga (.apk)</label>\n                    <input className={inputStyle} value={appVersion.url} onChange={e => setAppVersion({...appVersion, url: e.target.value})} placeholder=\"https://...\" />\n                  </div>\n                </div>\n              </section>\n\n              <section className=\"bg-[#0f1117] p-8 rounded-[3rem] border border-slate-800 shadow-2xl\">\n                <div className=\"grid grid-cols-12 gap-8 items-end\">\n                  <div className=\"col-span-3\">\n                    <label className=\"text-[9px] font-black text-slate-500 uppercase mb-3 block italic\">1. Filtrar Sede</label>\n                    <select className={inputStyle} onChange={e => { setTargetInstId(e.target.value); setTargetAulaId(''); }}>\n                      <option value=\"\">-- SELECCIONAR --</option>\n                      {institutions.map(i => <option key={i.id} value={i.id}>{i.nombre}</option>)}\n                    </select>\n                  </div>\n                  <div className=\"col-span-3\">\n                    <label className=\"text-[9px] font-black text-slate-500 uppercase mb-3 block italic\">2. Filtrar Aula</label>\n                    <select className={inputStyle} value={targetAulaId} onChange={e => setTargetAulaId(e.target.value)}>\n                      <option value=\"\">-- SELECCIONAR --</option>\n                      {availableAulas.map(a => <option key={a.id} value={a.id}>{a.nombre_completo}</option>)}\n                    </select>\n                  </div>\n                  <div className=\"col-span-6\">\n                    <div className=\"h-[100px] flex items-center justify-between px-8 border-2 border-slate-800 rounded-3xl bg-black/20\">\n                      <div>\n                        <p className=\"text-[9px] font-black text-slate-500 uppercase italic\">Estado del Aula</p>\n                        <div className=\"flex items-center gap-2 mt-1\">\n                          {targetAulaId ? <><div className=\"w-2 h-2 rounded-full animate-pulse bg-green-500\" /><span className=\"text-xs font-black uppercase text-green-500\">Monitorización Activa</span></> : <><div className=\"w-2 h-2 rounded-full bg-red-500\" /><span className=\"text-xs font-black uppercase text-red-500\">Sin Filtro</span></>}\n                        </div>\n                      </div>\n                      <ShieldAlert className={targetAulaId ? 'text-orange-500' : 'text-slate-800'} size={32} />\n                    </div>\n                  </div>\n                </div>\n                {targetAulaId && (\n                   <div className=\"mt-8 pt-8 border-t border-slate-800/50\">\n                    <div className=\"flex gap-4\">\n                      <input className={inputStyle} placeholder=\"COM.BLOQUEAR.APP\" value={appToBlock} onChange={e => setAppToBlock(e.target.value)} />\n                      <button onClick={addAppToAulaBlacklist} className=\"bg-orange-500 text-white px-6 rounded-xl font-black text-[10px] uppercase\">Bloquear</button>\n                    </div>\n                    <div className=\"flex flex-wrap gap-2 mt-4\">\n                      {currentAulaData?.blacklistedApps?.map((app: string) => (\n                        <div key={app} className=\"bg-slate-900 border border-red-500/30 px-3 py-1 rounded-full flex items-center gap-2\">\n                          <span className=\"text-[10px] font-mono text-red-400\">{app}</span>\n                          <button onClick={() => removeAppFromAulaBlacklist(app)}><X size={12}/></button>\n                        </div>\n                      ))}\n                    </div>\n                   </div>\n                )}\n              </section>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n                {devices.map(device => (\n                  <div key={device.id} className={`bg-[#0f1117] rounded-[2.5rem] border ${device.restrictions?.extremeSecurity ? 'border-red-600' : 'border-slate-800'} p-8`}>\n                    <div className=\"flex justify-between items-start mb-4\">\n                      <Smartphone size={20} className={device.restrictions?.extremeSecurity ? 'text-red-500' : 'text-orange-500'} />\n                      <span className=\"text-[8px] font-black uppercase italic px-2 py-1 bg-slate-900 rounded-lg\">{device.rol}</span>\n                    </div>\n                    <h3 className=\"text-white font-black text-2xl italic uppercase truncate\">{device.alumno_asignado || 'NO ASIGNADO'}</h3>\n                    <p className=\"text-slate-600 text-[9px] mb-6 uppercase\">SERIAL: {device.deviceSerial || device.id}</p>\n                    <button onClick={() => toggleExtremeSecurity(device.id, !!device.restrictions?.extremeSecurity)} className={`w-full py-4 rounded-xl font-black uppercase text-[10px] border-2 ${device.restrictions?.extremeSecurity ? 'bg-red-600 text-white' : 'border-slate-800 text-slate-500 hover:text-white'}`}>\n                      {device.restrictions?.extremeSecurity ? 'Desactivar Blindaje' : 'Activar Blindaje'}\n                    </button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'sedes' && (\n            <div className=\"grid grid-cols-12 gap-10\">\n              <div className=\"col-span-12 lg:col-span-5\"><CreateInstitutionForm /></div>\n              <div className=\"col-span-12 lg:col-span-7\"><InstitutionList /></div>\n            </div>\n          )}\n\n          {activeTab === 'usuarios' && (\n            <div className=\"space-y-12\">\n              <UserManagement />\n              {editingUser && (\n                <section className=\"bg-orange-500/5 border-2 border-orange-500 rounded-[2.5rem] p-8 animate-in slide-in-from-top-4 shadow-2xl\">\n                  <div className=\"flex justify-between items-center mb-8\">\n                    <h4 className=\"text-xs font-black uppercase italic text-white flex items-center gap-2\"><Edit3 size={16} className=\"text-orange-500\"/> Reasignación Global</h4>\n                    <button onClick={() => setEditingUser(null)} className=\"p-2 hover:bg-slate-800 rounded-full transition-colors\"><X size={20}/></button>\n                  </div>\n                  \n                  <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                    <div className=\"space-y-2\">\n                      <label className=\"text-[8px] font-black uppercase text-orange-500 ml-2 italic\">Nombre</label>\n                      <input className={inputStyle} value={editForm.nombre} onChange={e => setEditForm({...editForm, nombre: e.target.value})} />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <label className=\"text-[8px] font-black uppercase text-orange-500 ml-2 italic\">1. Sede</label>\n                      <select className={inputStyle} value={editForm.InstitutoId} onChange={e => setEditForm({...editForm, InstitutoId: e.target.value, seccionSeleccionada: '', aulaIdFinal: ''})}>\n                        <option value=\"\">SELECCIONAR SEDE</option>\n                        {institutions.map(i => <option key={i.id} value={i.id}>{i.nombre}</option>)}\n                      </select>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <label className=\"text-[8px] font-black uppercase text-orange-500 ml-2 italic\">2. Sección</label>\n                      <select className={inputStyle} disabled={!editForm.InstitutoId} value={editForm.seccionSeleccionada} onChange={e => setEditForm({...editForm, seccionSeleccionada: e.target.value, aulaIdFinal: ''})}>\n                        <option value=\"\">SELECCIONAR SECCIÓN</option>\n                        {uniqueSectionsForEdit.map(sec => <option key={sec} value={sec}>{sec}</option>)}\n                      </select>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <label className=\"text-[8px] font-black uppercase text-orange-500 ml-2 italic\">3. Aula Exacta</label>\n                      <select className={inputStyle} disabled={!editForm.seccionSeleccionada} value={editForm.aulaIdFinal} onChange={e => setEditForm({...editForm, aulaIdFinal: e.target.value})}>\n                        <option value=\"\">SELECCIONAR AULA</option>\n                        {editAulasList.filter(a => a.seccion === editForm.seccionSeleccionada).map(a => <option key={a.id} value={a.id}>{a.nombre_completo}</option>)}\n                      </select>\n                    </div>\n                  </div>\n\n                  <button onClick={handleUpdateUser} disabled={!editForm.aulaIdFinal} className=\"w-full mt-8 bg-orange-500 disabled:bg-slate-800 text-white font-black py-5 rounded-2xl uppercase italic text-xs shadow-lg shadow-orange-500/20 flex items-center justify-center gap-2 transition-all\">\n                    <Save size={16}/> Confirmar Cambio de Jurisdicción\n                  </button>\n                </section>\n              )}\n\n              <section className=\"bg-[#0f1117] border border-slate-800 rounded-[2.5rem] overflow-hidden shadow-2xl\">\n                <div className=\"p-8 border-b border-slate-800 bg-black/20 flex flex-col md:flex-row md:items-center justify-between gap-6\">\n                  <div>\n                    <h3 className=\"text-xs font-black uppercase italic flex items-center gap-2\"><Globe className=\"text-orange-500\" size={16}/> Supervisión Global</h3>\n                    <span className=\"text-[9px] font-black text-slate-500 uppercase\">{filteredUsers.length} de {allUsers.length} Usuarios</span>\n                  </div>\n                  <div className=\"relative w-full md:w-96 group\">\n                    <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-600 group-focus-within:text-orange-500 transition-colors\" size={16} />\n                    <input className=\"w-full bg-slate-900 border border-slate-800 pl-12 pr-4 py-3 rounded-xl focus:border-orange-500 outline-none font-bold text-slate-200 text-[10px] uppercase transition-all\" placeholder=\"BUSCAR POR NOMBRE, EMAIL O AULA...\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} />\n                  </div>\n                </div>\n\n                <div className=\"overflow-x-auto\">\n                  <table className=\"w-full text-[10px] text-left\">\n                    <thead>\n                      <tr className=\"text-slate-500 uppercase border-b border-slate-800/50 bg-slate-900/30\">\n                        <th className=\"p-6\">Identidad</th>\n                        <th className=\"p-6\">Rol</th>\n                        <th className=\"p-6\">Sede Asignada</th>\n                        <th className=\"p-6\">Aula / Sección</th>\n                        <th className=\"p-6 text-right\">Acciones</th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"divide-y divide-slate-800/50\">\n                      {filteredUsers.map(u => (\n                        <tr key={u.id} className=\"hover:bg-white/[0.02] transition-colors\">\n                          <td className=\"p-6\">\n                            <p className=\"text-white font-black uppercase text-[11px]\">{u.nombre}</p>\n                            <p className=\"text-slate-500 font-mono text-[9px]\">{u.email}</p>\n                          </td>\n                          <td className=\"p-6\">\n                            <span className={`px-3 py-1 rounded-lg font-black uppercase text-[8px] ${u.role === 'director' ? 'bg-blue-500/10 text-blue-500' : 'bg-orange-500/10 text-orange-500'}`}>\n                              {u.role}\n                            </span>\n                          </td>\n                          <td className=\"p-6\">\n                            <p className=\"text-slate-300 font-bold uppercase\">{institutions.find(i => i.id === u.InstitutoId)?.nombre || 'DESCONOCIDA'}</p>\n                          </td>\n                          <td className=\"p-6\">\n                             <div className=\"flex items-center gap-2\">\n                               <DoorOpen size={12} className=\"text-orange-500\" />\n                               <span className=\"text-white font-black uppercase italic\">{u.seccion || 'SIN SECCIÓN'}</span>\n                             </div>\n                          </td>\n                          <td className=\"p-6 text-right\">\n                            <div className=\"flex justify-end gap-2\">\n                              <button onClick={() => handleEditClick(u)} className=\"p-3 bg-slate-800 hover:bg-orange-500/20 hover:text-orange-500 rounded-xl transition-all\"><Edit3 size={14}/></button>\n                              <button onClick={() => handleDeleteUser(u.id)} className=\"p-3 bg-slate-800 hover:bg-red-500/20 hover:text-red-500 text-red-500/30 rounded-xl transition-all\"><Trash2 size={14}/></button>\n                            </div>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              </section>\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAAA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;;;AAhBA;;;;;;;;;;AAkBe,SAAS;QA4U6D,sBAqE9D;;IAhZrB,MAAM,EAAE,aAAa,EAAE,GAAG,IAAA,oLAAc;IACxC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAuB;IAC3D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IAC1D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IAC9D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IAChD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IAClD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAM;IAE5D,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IACvD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAc;IAEtE,sDAAsD;IACtD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC;QACnD,QAAQ;QACR,SAAS;QACT,QAAQ;QACR,KAAK;IACP;IAEA,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAM;IAC9D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;QAAE,MAAM;QAAG,KAAK;QAAI,OAAO;IAAK;IAC7E,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAM;IACpD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;QACvC,QAAQ;QACR,aAAa;QACb,qBAAqB;QACrB,aAAa;IACf;IACA,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IAE5D,iBAAiB;IACjB,IAAA,0KAAS;oCAAC;YACR,OAAO,IAAA,oLAAU,EAAC,IAAA,6KAAG,EAAC,kIAAE,EAAE,UAAU;4CAAe,CAAC;oBAClD,IAAI,EAAE,MAAM,IAAI;wBACd,MAAM,OAAO,EAAE,IAAI;4BAIV;wBAHT,cAAc;4BACZ,MAAM,KAAK,WAAW,IAAI;4BAC1B,KAAK,KAAK,WAAW,IAAI;4BACzB,OAAO,CAAA,oBAAA,KAAK,WAAW,cAAhB,+BAAA,oBAAoB;wBAC7B;oBACF;gBACF;;QACF;mCAAG,EAAE;IAEL,IAAA,0KAAS;oCAAC;YACR,OAAO,IAAA,oLAAU,EAAC,IAAA,oLAAU,EAAC,kIAAE,EAAE;4CAAiB,CAAC;oBACjD,gBAAgB,EAAE,IAAI,CAAC,GAAG;oDAAC,CAAA,IAAK,CAAC;gCAAE,IAAI,EAAE,EAAE;gCAAE,GAAG,EAAE,IAAI,EAAE;4BAAC,CAAC;;gBAC5D;;QACF;mCAAG,EAAE;IAEL,IAAA,0KAAS;oCAAC;YACR,MAAM,IAAI,IAAA,+KAAK,EAAC,IAAA,oLAAU,EAAC,kIAAE,EAAE,aAAa,IAAA,+KAAK,EAAC,QAAQ,MAAM;gBAAC;gBAAY;aAAW;YACxF,OAAO,IAAA,oLAAU,EAAC;4CAAG,CAAC;oBACpB,YAAY,EAAE,IAAI,CAAC,GAAG;oDAAC,CAAA,IAAK,CAAC;gCAAE,IAAI,EAAE,EAAE;gCAAE,GAAG,EAAE,IAAI,EAAE;4BAAC,CAAC;;gBACxD;;QACF;mCAAG,EAAE;IAEL,qDAAqD;IACrD,IAAA,0KAAS;oCAAC;YACR,MAAM,eAAe,cAAc,aAAa,eAAe,MAAM,GAAG;YACxE,IAAI,CAAC,cAAc;gBACjB,kBAAkB,EAAE;gBACpB;YACF;YACA,OAAO,IAAA,oLAAU,EAAC,IAAA,oLAAU,EAAC,kIAAE,EAAE,AAAC,gBAA4B,OAAb,cAAa;4CAAU,CAAC;oBACvE,kBAAkB,EAAE,IAAI,CAAC,GAAG;oDAAC,CAAA,IAAK,CAAC;gCAAE,IAAI,EAAE,EAAE;gCAAE,GAAG,EAAE,IAAI,EAAE;4BAAC,CAAC;;gBAC9D;;QACF;mCAAG;QAAC;QAAc,eAAe,MAAM;QAAE;KAAU;IAEnD,+CAA+C;IAC/C,IAAA,0KAAS;oCAAC;YACR,IAAI,CAAC,SAAS,WAAW,EAAE;gBACzB,iBAAiB,EAAE;gBACnB;YACF;YACA,OAAO,IAAA,oLAAU,EAAC,IAAA,oLAAU,EAAC,kIAAE,EAAE,AAAC,gBAAoC,OAArB,SAAS,WAAW,EAAC;4CAAU,CAAC;oBAC/E,iBAAiB,EAAE,IAAI,CAAC,GAAG;oDAAC,CAAA,IAAK,CAAC;gCAAE,IAAI,EAAE,EAAE;gCAAE,GAAG,EAAE,IAAI,EAAE;4BAAC,CAAC;;gBAC7D;;QACF;mCAAG;QAAC,SAAS,WAAW;KAAC;IAEzB,2DAA2D;IAC3D,IAAA,0KAAS;oCAAC;YACR,IAAI,CAAC,gBAAgB,CAAC,cAAc;gBAClC,mBAAmB;gBACnB;YACF;YACA,OAAO,IAAA,oLAAU,EAAC,IAAA,6KAAG,EAAC,kIAAE,EAAE,AAAC,gBAA4B,OAAb,cAAa,WAAS;4CAAe,CAAC;oBAC9E,IAAI,EAAE,MAAM,IAAI,mBAAmB;wBAAE,IAAI,EAAE,EAAE;wBAAE,GAAG,EAAE,IAAI,EAAE;oBAAC;gBAC7D;;QACF;mCAAG;QAAC;QAAc;KAAa;IAE/B,IAAA,0KAAS;oCAAC;YACR,MAAM,IAAI,eACN,IAAA,+KAAK,EAAC,IAAA,oLAAU,EAAC,kIAAE,EAAE,iBAAiB,IAAA,+KAAK,EAAC,UAAU,MAAM,iBAC5D,IAAA,+KAAK,EAAC,IAAA,oLAAU,EAAC,kIAAE,EAAE;YAEzB,OAAO,IAAA,oLAAU,EAAC;4CAAG,CAAC;oBACpB,WAAW,EAAE,IAAI,CAAC,GAAG;oDAAC,CAAA,IAAK,CAAC;gCAAE,IAAI,EAAE,EAAE;gCAAE,GAAG,EAAE,IAAI,EAAE;4BAAC,CAAC;;gBACvD;;QACF;mCAAG;QAAC;KAAa;IAEjB,IAAA,0KAAS;oCAAC;YACR,IAAI,CAAC,mBAAmB,CAAC,kBAAkB;YAC3C,MAAM,IAAI,IAAA,+KAAK,EACb,IAAA,oLAAU,EAAC,kIAAE,EAAE,iBACf,IAAA,+KAAK,EAAC,UAAU,MAAM,iBACtB,IAAA,+KAAK,EAAC,aAAa,MAAM,mBACzB,IAAA,iLAAO,EAAC,aAAa,SACrB,IAAA,+KAAK,EAAC;YAER,OAAO,IAAA,oLAAU,EAAC;4CAAG,CAAC;oBACpB,IAAI,CAAC,EAAE,KAAK,EAAE;wBACZ,oBAAoB;4BAAE,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC,EAAE;4BAAE,GAAG,EAAE,IAAI,CAAC,EAAE,CAAC,IAAI,EAAE;wBAAC;oBAC9D;gBACF;;QACF;mCAAG;QAAC;QAAiB;KAAiB;IAEtC,sBAAsB;IACtB,MAAM,yBAAyB;QAC7B,IAAI;YACF,MAAM,IAAA,gLAAM,EAAC,IAAA,6KAAG,EAAC,kIAAE,EAAE,UAAU,eAAe;gBAC5C,aAAa,OAAO,WAAW,IAAI;gBACnC,aAAa,WAAW,GAAG;gBAC3B,aAAa,WAAW,KAAK;gBAC7B,WAAW,IAAA,yLAAe;YAC5B;YACA,MAAM;QACR,EAAE,OAAO,GAAG;YAAE,QAAQ,KAAK,CAAC;QAAI;IAClC;IAEA,MAAM,kBAAkB,CAAC;QACvB,eAAe;QACf,YAAY;YACV,QAAQ,KAAK,MAAM,IAAI;YACvB,aAAa,KAAK,WAAW,IAAI;YACjC,qBAAqB;YACrB,aAAa;QACf;IACF;IAEA,MAAM,mBAAmB;QACvB,IAAI,CAAC,eAAe,CAAC,SAAS,WAAW,EAAE;QAC3C,MAAM,mBAAmB,cAAc,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,SAAS,WAAW;QAC9E,IAAI;YACF,MAAM,IAAA,mLAAS,EAAC,IAAA,6KAAG,EAAC,kIAAE,EAAE,YAAY,YAAY,EAAE,GAAG;gBACnD,QAAQ,SAAS,MAAM;gBACvB,aAAa,SAAS,WAAW;gBACjC,SAAS,CAAA,6BAAA,uCAAA,iBAAkB,eAAe,KAAI;gBAC9C,aAAa,IAAA,yLAAe;YAC9B;YACA,eAAe;YACf,MAAM;QACR,EAAE,OAAO,GAAG;YAAE,QAAQ,KAAK,CAAC;QAAI;IAClC;IAEA,MAAM,mBAAmB,OAAO;QAC9B,IAAI,QAAQ,6BAA6B;YACvC,IAAI;gBAAE,MAAM,IAAA,mLAAS,EAAC,IAAA,6KAAG,EAAC,kIAAE,EAAE,YAAY;YAAU,EAAE,OAAO,GAAG;gBAAE,QAAQ,KAAK,CAAC;YAAI;QACtF;IACF;IAEA,MAAM,oBAAoB;QACxB,IAAI,CAAC,eAAe,CAAC,kBAAkB;QACvC,YAAY;QACZ,IAAI;YACF,MAAM,WAAW,iBAAiB,MAAM,IAAI,iBAAiB,EAAE;YAC/D,MAAM,IAAA,gLAAM,EAAC,IAAA,6KAAG,EAAC,kIAAE,EAAE,gBAAgB,WAAW;gBAC9C,QAAQ;gBACR,iBAAiB;gBACjB,aAAa,eAAe,MAAM;gBAClC,QAAQ,eAAe,MAAM;gBAC7B,KAAK,eAAe,GAAG;gBACvB,cAAc,iBAAiB,MAAM,IAAI;gBACzC,aAAa,IAAA,yLAAe;gBAC5B,cAAc;oBAAE,iBAAiB;gBAAM;YACzC,GAAG;gBAAE,OAAO;YAAK;YACjB,oBAAoB;YACpB,eAAe;QACjB,EAAE,OAAO,GAAG;YAAE,QAAQ,KAAK,CAAC;QAAI,SAAU;YAAE,YAAY;QAAQ;IAClE;IAEA,MAAM,wBAAwB;QAC5B,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,cAAc;QACnD,MAAM,UAAU,IAAA,6KAAG,EAAC,kIAAE,EAAE,AAAC,gBAA4B,OAAb,cAAa,WAAS;QAC9D,MAAM,IAAA,mLAAS,EAAC,SAAS;YACvB,iBAAiB,IAAA,oLAAU,EAAC,WAAW,WAAW,GAAG,IAAI;YACzD,oBAAoB,IAAA,yLAAe;QACrC;QACA,cAAc;IAChB;IAEA,MAAM,6BAA6B,OAAO;QACxC,MAAM,UAAU,IAAA,6KAAG,EAAC,kIAAE,EAAE,AAAC,gBAA4B,OAAb,cAAa,WAAS;QAC9D,MAAM,IAAA,mLAAS,EAAC,SAAS;YAAE,iBAAiB,IAAA,qLAAW,EAAC;QAAS;IACnE;IAEA,MAAM,wBAAwB,OAAO,UAAkB;QACrD,MAAM,IAAA,mLAAS,EAAC,IAAA,6KAAG,EAAC,kIAAE,EAAE,gBAAgB,WAAW;YACjD,gCAAgC,CAAC;YACjC,aAAa,IAAA,yLAAe;QAC9B;IACF;IAEA,MAAM,4BAA4B;QAChC,IAAI,CAAC,QAAQ,wDAAwD;QACrE,IAAI;YACF,MAAM,WAAW,aAAa,MAAM,CAAC,CAAA,OAAQ,KAAK,EAAE,CAAC,MAAM,GAAG;YAC9D,KAAK,MAAM,QAAQ,SAAU;gBAAE,MAAM,IAAA,mLAAS,EAAC,IAAA,6KAAG,EAAC,kIAAE,EAAE,gBAAgB,KAAK,EAAE;YAAI;QACpF,EAAE,OAAO,GAAG;YAAE,QAAQ,KAAK,CAAC;QAAI;IAClC;IAEA,MAAM,gBAAgB,SAAS,MAAM,CAAC,CAAA;YACpC,WACA,UACA,YACA;eAHA,EAAA,YAAA,EAAE,MAAM,cAAR,gCAAA,UAAU,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW,UACvD,WAAA,EAAE,KAAK,cAAP,+BAAA,SAAS,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW,UACtD,aAAA,EAAE,OAAO,cAAT,iCAAA,WAAW,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW,UACxD,UAAA,EAAE,IAAI,cAAN,8BAAA,QAAQ,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW;;IAGvD,MAAM,wBAAwB,MAAM,IAAI,CAAC,IAAI,IAAI,cAAc,GAAG,CAAC,CAAA,IAAK,EAAE,OAAO,IAAI,MAAM,CAAC;IAC5F,MAAM,4BAA4B,MAAM,IAAI,CAAC,IAAI,IAAI,eAAe,GAAG,CAAC,CAAA,IAAK,EAAE,OAAO,IAAI,MAAM,CAAC;IAEjG,MAAM,mBAAmB;QACvB,MAAM,eAAe;YACnB,4DAA4D;YAC5D,8DAA8D;YAC9D,yEAAyE,WAAW,GAAG;YACvF,kEAAkE;YAClE,gEAAgE;YAChE,kDAAkD;QACpD;QACA,OAAO,KAAK,SAAS,CAAC;IACxB;IAEA,MAAM,qBAAqB;QACzB,OAAO,KAAK,SAAS,CAAC;YACpB,aAAa,eAAe,MAAM;YAClC,QAAQ,eAAe,MAAM;YAC7B,KAAK,eAAe,GAAG;QACzB;IACF;IAEA,MAAM,aAAa;IAEnB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCAA+D,cAAA,6LAAC,sOAAW;4BAAC,WAAU;;;;;;;;;;;kCACrG,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAO,SAAS,IAAM,aAAa;gCAAa,WAAW,AAAC,iCAAkI,OAAlG,cAAc,aAAa,qCAAqC;0CAAqC,cAAA,6LAAC,0MAAG;oCAAC,WAAU;;;;;;;;;;;0CACjN,6LAAC;gCAAO,SAAS,IAAM,aAAa;gCAAU,WAAW,AAAC,iCAA+H,OAA/F,cAAc,UAAU,qCAAqC;0CAAqC,cAAA,6LAAC,gOAAS;oCAAC,WAAU;;;;;;;;;;;0CACjN,6LAAC;gCAAO,SAAS,IAAM,aAAa;gCAAa,WAAW,AAAC,iCAAkI,OAAlG,cAAc,aAAa,qCAAqC;0CAAqC,cAAA,6LAAC,gNAAK;oCAAC,WAAU;;;;;;;;;;;0CACnN,6LAAC;gCAAO,SAAS,IAAM,aAAa;gCAAiB,WAAW,AAAC,iCAAsI,OAAtG,cAAc,iBAAiB,qCAAqC;0CAAqC,cAAA,6LAAC,mNAAM;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAIhO,6LAAC;gBAAK,WAAU;;kCACd,6LAAC;wBAAO,WAAU;kCACd,cAAA,6LAAC;;8CACC,6LAAC;oCAAG,WAAU;;wCAAmE;sDAAI,6LAAC;4CAAK,WAAU;sDAAkB;;;;;;;;;;;;8CACvH,6LAAC;oCAAE,WAAU;8CAA8E;;;;;;;;;;;;;;;;;kCAIjG,6LAAC;wBAAI,WAAU;;4BACZ,cAAc,4BACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAO,SAAS,IAAM,UAAU;gDAAY,WAAW,AAAC,gFAAyL,OAA1G,WAAW,YAAY,6BAA6B;0DAAyD;;;;;;0DACrP,6LAAC;gDAAO,SAAS,IAAM,UAAU;gDAAW,WAAW,AAAC,gFAAsL,OAAvG,WAAW,WAAW,2BAA2B;0DAAyD;;;;;;;;;;;;kDAGnP,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC;gDAAQ,WAAW,AAAC,gEAAmI,OAApE,WAAW,WAAW,uBAAuB;0DAC9H,WAAW,yBACV,6LAAC;oDAAI,WAAU;;sEACb,6LAAC;4DAAG,WAAU;;8EAA6F,6LAAC,gOAAS;oEAAC,WAAU;oEAAgB,MAAM;;;;;;gEAAK;;;;;;;sEAC3J,6LAAC;4DAAI,WAAU;sEACb,cAAA,6LAAC,sKAAS;gEAAC,OAAO;gEAAoB,MAAM;gEAAK,OAAM;;;;;;;;;;;;;;;;yEAI3D;;sEACE,6LAAC;4DAAG,WAAU;;8EAA8E,6LAAC,uNAAM;oEAAC,WAAU;oEAAkB,MAAM;;;;;;gEAAK;;;;;;;wDAC1I,CAAC,gCACA,6LAAC;4DAAI,WAAU;;8EACb,6LAAC;oEAAO,WAAW;oEAAY,UAAU,CAAA,IAAK,kBAAkB;4EAAC,GAAG,cAAc;4EAAE,QAAQ,EAAE,MAAM,CAAC,KAAK;4EAAE,SAAS;4EAAI,QAAQ;wEAAE;;sFACjI,6LAAC;4EAAO,OAAM;sFAAG;;;;;;wEAChB,aAAa,GAAG,CAAC,CAAA,kBAAK,6LAAC;gFAAkB,OAAO,EAAE,EAAE;0FAAG,EAAE,MAAM;+EAA5B,EAAE,EAAE;;;;;;;;;;;8EAG1C,6LAAC;oEAAO,WAAW;oEAAY,UAAU,CAAC,eAAe,MAAM;oEAAE,OAAO,eAAe,OAAO;oEAAE,UAAU,CAAA,IAAK,kBAAkB;4EAAC,GAAG,cAAc;4EAAE,SAAS,EAAE,MAAM,CAAC,KAAK;4EAAE,QAAQ;wEAAE;;sFACtL,6LAAC;4EAAO,OAAM;sFAAG;;;;;;wEAChB,0BAA0B,GAAG,CAAC,CAAA,oBAAO,6LAAC;gFAAiB,OAAO;0FAAM;+EAAlB;;;;;;;;;;;8EAGrD,6LAAC;oEAAO,WAAW;oEAAY,UAAU,CAAC,eAAe,OAAO;oEAAE,OAAO,eAAe,MAAM;oEAAE,UAAU,CAAA,IAAK,kBAAkB;4EAAC,GAAG,cAAc;4EAAE,QAAQ,EAAE,MAAM,CAAC,KAAK;wEAAA;;sFACzK,6LAAC;4EAAO,OAAM;sFAAG;;;;;;wEAChB,eAAe,MAAM,CAAC,CAAA,IAAK,EAAE,OAAO,KAAK,eAAe,OAAO,EAAE,GAAG,CAAC,CAAA,kBAAK,6LAAC;gFAAkB,OAAO,EAAE,EAAE;0FAAG,EAAE,eAAe;+EAArC,EAAE,EAAE;;;;;;;;;;;8EAG9F,6LAAC;oEAAI,WAAU;;sFACb,6LAAC;4EAAO,SAAS,IAAM,kBAAkB;oFAAC,GAAG,cAAc;oFAAE,KAAK;gFAAQ;4EAAI,WAAW,AAAC,4DAAuK,OAA5G,eAAe,GAAG,KAAK,WAAW,uCAAuC;;8FAAsC,6LAAC,4OAAa;oFAAC,MAAM;;;;;;8FAAK,6LAAC;oFAAK,WAAU;8FAAkC;;;;;;;;;;;;sFAChV,6LAAC;4EAAO,SAAS,IAAM,kBAAkB;oFAAC,GAAG,cAAc;oFAAE,KAAK;gFAAU;4EAAI,WAAW,AAAC,4DAAyK,OAA9G,eAAe,GAAG,KAAK,aAAa,uCAAuC;;8FAAsC,6LAAC,4NAAS;oFAAC,MAAM;;;;;;8FAAK,6LAAC;oFAAK,WAAU;8FAAkC;;;;;;;;;;;;;;;;;;8EAGlV,6LAAC;oEAAO,UAAU,CAAC,eAAe,MAAM;oEAAE,SAAS;wEAAQ,oBAAoB,IAAI;wEAAS,mBAAmB;oEAAO;oEAAG,WAAU;8EAAmH;;;;;;;;;;;iFAGxP,6LAAC;4DAAI,WAAU;;8EACb,6LAAC;oEAAI,WAAU;8EACb,cAAA,6LAAC,sKAAS;wEAAC,OAAO;wEAAsB,MAAM;wEAAK,OAAM;;;;;;;;;;;gEAE1D,iCACC,6LAAC;oEAAI,WAAU;;sFACb,6LAAC;4EAAM,WAAU;sFAA6D;;;;;;sFAC9E,6LAAC;4EAAM,SAAS;4EAAC,WAAW;4EAAY,aAAY;4EAAoB,OAAO;4EAAa,UAAU,CAAA,IAAK,eAAe,EAAE,MAAM,CAAC,KAAK;;;;;;sFACxI,6LAAC;4EAAO,SAAS;4EAAmB,WAAU;sFAAuF;;;;;;;;;;;yFAGvI,6LAAC;oEAAI,WAAU;;sFACb,6LAAC;4EAAE,WAAU;sFAA+D;;;;;;sFAC5E,6LAAC;4EAAE,WAAU;;gFAAiC;iFAAO,uBAAA,eAAe,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,eAAe,MAAM,eAAvD,2CAAA,qBAA0D,eAAe;;;;;;;;;;;;;8EAGlI,6LAAC;oEAAO,SAAS;wEAAQ,mBAAmB;wEAAQ,oBAAoB;oEAAO;oEAAG,WAAU;8EAAuD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4BAWpK,cAAc,gCACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAQ,WAAU;;0DACjB,6LAAC;gDAAI,WAAU;0DAA4D,cAAA,6LAAC,gNAAK;oDAAC,MAAM;;;;;;;;;;;0DACxF,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAG,WAAU;;0EAAyE,6LAAC,gNAAK;gEAAC,WAAU;gEAAgB,MAAM;;;;;;4DAAK;;;;;;;kEACnI,6LAAC;wDAAO,SAAS;wDAAwB,WAAU;kEAAoG;;;;;;;;;;;;0DAEzJ,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAM,WAAU;0EAAmE;;;;;;0EACpF,6LAAC;gEAAM,MAAK;gEAAS,WAAW;gEAAY,OAAO,WAAW,IAAI;gEAAE,UAAU,CAAA,IAAK,cAAc;wEAAC,GAAG,UAAU;wEAAE,MAAM,SAAS,EAAE,MAAM,CAAC,KAAK,KAAK;oEAAC;;;;;;;;;;;;kEAEtJ,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAM,WAAU;0EAAmE;;;;;;0EACpF,6LAAC;gEAAM,WAAW;gEAAY,OAAO,WAAW,GAAG;gEAAE,UAAU,CAAA,IAAK,cAAc;wEAAC,GAAG,UAAU;wEAAE,KAAK,EAAE,MAAM,CAAC,KAAK;oEAAA;gEAAI,aAAY;;;;;;;;;;;;;;;;;;;;;;;;kDAK3I,6LAAC;wCAAQ,WAAU;;0DACjB,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAM,WAAU;0EAAmE;;;;;;0EACpF,6LAAC;gEAAO,WAAW;gEAAY,UAAU,CAAA;oEAAO,gBAAgB,EAAE,MAAM,CAAC,KAAK;oEAAG,gBAAgB;gEAAK;;kFACpG,6LAAC;wEAAO,OAAM;kFAAG;;;;;;oEAChB,aAAa,GAAG,CAAC,CAAA,kBAAK,6LAAC;4EAAkB,OAAO,EAAE,EAAE;sFAAG,EAAE,MAAM;2EAA5B,EAAE,EAAE;;;;;;;;;;;;;;;;;kEAG5C,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAM,WAAU;0EAAmE;;;;;;0EACpF,6LAAC;gEAAO,WAAW;gEAAY,OAAO;gEAAc,UAAU,CAAA,IAAK,gBAAgB,EAAE,MAAM,CAAC,KAAK;;kFAC/F,6LAAC;wEAAO,OAAM;kFAAG;;;;;;oEAChB,eAAe,GAAG,CAAC,CAAA,kBAAK,6LAAC;4EAAkB,OAAO,EAAE,EAAE;sFAAG,EAAE,eAAe;2EAArC,EAAE,EAAE;;;;;;;;;;;;;;;;;kEAG9C,6LAAC;wDAAI,WAAU;kEACb,cAAA,6LAAC;4DAAI,WAAU;;8EACb,6LAAC;;sFACC,6LAAC;4EAAE,WAAU;sFAAwD;;;;;;sFACrE,6LAAC;4EAAI,WAAU;sFACZ,6BAAe;;kGAAE,6LAAC;wFAAI,WAAU;;;;;;kGAAoD,6LAAC;wFAAK,WAAU;kGAA8C;;;;;;;6GAAkC;;kGAAE,6LAAC;wFAAI,WAAU;;;;;;kGAAoC,6LAAC;wFAAK,WAAU;kGAA4C;;;;;;;;;;;;;;;;;;;8EAG1S,6LAAC,sOAAW;oEAAC,WAAW,eAAe,oBAAoB;oEAAkB,MAAM;;;;;;;;;;;;;;;;;;;;;;;4CAIxF,8BACE,6LAAC;gDAAI,WAAU;;kEACd,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAM,WAAW;gEAAY,aAAY;gEAAmB,OAAO;gEAAY,UAAU,CAAA,IAAK,cAAc,EAAE,MAAM,CAAC,KAAK;;;;;;0EAC3H,6LAAC;gEAAO,SAAS;gEAAuB,WAAU;0EAA4E;;;;;;;;;;;;kEAEhI,6LAAC;wDAAI,WAAU;kEACZ,4BAAA,uCAAA,mCAAA,gBAAiB,eAAe,cAAhC,uDAAA,iCAAkC,GAAG,CAAC,CAAC,oBACtC,6LAAC;gEAAc,WAAU;;kFACvB,6LAAC;wEAAK,WAAU;kFAAsC;;;;;;kFACtD,6LAAC;wEAAO,SAAS,IAAM,2BAA2B;kFAAM,cAAA,6LAAC,oMAAC;4EAAC,MAAM;;;;;;;;;;;;+DAFzD;;;;;;;;;;;;;;;;;;;;;;kDAUpB,6LAAC;wCAAI,WAAU;kDACZ,QAAQ,GAAG,CAAC,CAAA;gDAC6D,sBAEnC,uBAK6I,uBAC7K;iEARL,6LAAC;gDAAoB,WAAW,AAAC,wCAAoH,OAA7E,EAAA,uBAAA,OAAO,YAAY,cAAnB,2CAAA,qBAAqB,eAAe,IAAG,mBAAmB,oBAAmB;;kEACnJ,6LAAC;wDAAI,WAAU;;0EACb,6LAAC,+NAAU;gEAAC,MAAM;gEAAI,WAAW,EAAA,wBAAA,OAAO,YAAY,cAAnB,4CAAA,sBAAqB,eAAe,IAAG,iBAAiB;;;;;;0EACzF,6LAAC;gEAAK,WAAU;0EAA4E,OAAO,GAAG;;;;;;;;;;;;kEAExG,6LAAC;wDAAG,WAAU;kEAA4D,OAAO,eAAe,IAAI;;;;;;kEACpG,6LAAC;wDAAE,WAAU;;4DAA2C;4DAAS,OAAO,YAAY,IAAI,OAAO,EAAE;;;;;;;kEACjG,6LAAC;wDAAO,SAAS;gEAAyC;mEAAnC,sBAAsB,OAAO,EAAE,EAAE,CAAC,GAAC,uBAAA,OAAO,YAAY,cAAnB,2CAAA,qBAAqB,eAAe;;wDAAG,WAAW,AAAC,oEAAuL,OAApH,EAAA,wBAAA,OAAO,YAAY,cAAnB,4CAAA,sBAAqB,eAAe,IAAG,0BAA0B;kEAC9O,EAAA,wBAAA,OAAO,YAAY,cAAnB,4CAAA,sBAAqB,eAAe,IAAG,wBAAwB;;;;;;;+CAR1D,OAAO,EAAE;;;;;;;;;;;;;;;;;4BAgB1B,cAAc,yBACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;kDAA4B,cAAA,6LAAC,mLAAqB;;;;;;;;;;kDACjE,6LAAC;wCAAI,WAAU;kDAA4B,cAAA,6LAAC,yKAAe;;;;;;;;;;;;;;;;4BAI9D,cAAc,4BACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,oKAAc;;;;;oCACd,6BACC,6LAAC;wCAAQ,WAAU;;0DACjB,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAG,WAAU;;0EAAyE,6LAAC,sNAAK;gEAAC,MAAM;gEAAI,WAAU;;;;;;4DAAmB;;;;;;;kEACrI,6LAAC;wDAAO,SAAS,IAAM,eAAe;wDAAO,WAAU;kEAAwD,cAAA,6LAAC,oMAAC;4DAAC,MAAM;;;;;;;;;;;;;;;;;0DAG1H,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAM,WAAU;0EAA8D;;;;;;0EAC/E,6LAAC;gEAAM,WAAW;gEAAY,OAAO,SAAS,MAAM;gEAAE,UAAU,CAAA,IAAK,YAAY;wEAAC,GAAG,QAAQ;wEAAE,QAAQ,EAAE,MAAM,CAAC,KAAK;oEAAA;;;;;;;;;;;;kEAEvH,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAM,WAAU;0EAA8D;;;;;;0EAC/E,6LAAC;gEAAO,WAAW;gEAAY,OAAO,SAAS,WAAW;gEAAE,UAAU,CAAA,IAAK,YAAY;wEAAC,GAAG,QAAQ;wEAAE,aAAa,EAAE,MAAM,CAAC,KAAK;wEAAE,qBAAqB;wEAAI,aAAa;oEAAE;;kFACxK,6LAAC;wEAAO,OAAM;kFAAG;;;;;;oEAChB,aAAa,GAAG,CAAC,CAAA,kBAAK,6LAAC;4EAAkB,OAAO,EAAE,EAAE;sFAAG,EAAE,MAAM;2EAA5B,EAAE,EAAE;;;;;;;;;;;;;;;;;kEAG5C,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAM,WAAU;0EAA8D;;;;;;0EAC/E,6LAAC;gEAAO,WAAW;gEAAY,UAAU,CAAC,SAAS,WAAW;gEAAE,OAAO,SAAS,mBAAmB;gEAAE,UAAU,CAAA,IAAK,YAAY;wEAAC,GAAG,QAAQ;wEAAE,qBAAqB,EAAE,MAAM,CAAC,KAAK;wEAAE,aAAa;oEAAE;;kFAChM,6LAAC;wEAAO,OAAM;kFAAG;;;;;;oEAChB,sBAAsB,GAAG,CAAC,CAAA,oBAAO,6LAAC;4EAAiB,OAAO;sFAAM;2EAAlB;;;;;;;;;;;;;;;;;kEAGnD,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAM,WAAU;0EAA8D;;;;;;0EAC/E,6LAAC;gEAAO,WAAW;gEAAY,UAAU,CAAC,SAAS,mBAAmB;gEAAE,OAAO,SAAS,WAAW;gEAAE,UAAU,CAAA,IAAK,YAAY;wEAAC,GAAG,QAAQ;wEAAE,aAAa,EAAE,MAAM,CAAC,KAAK;oEAAA;;kFACvK,6LAAC;wEAAO,OAAM;kFAAG;;;;;;oEAChB,cAAc,MAAM,CAAC,CAAA,IAAK,EAAE,OAAO,KAAK,SAAS,mBAAmB,EAAE,GAAG,CAAC,CAAA,kBAAK,6LAAC;4EAAkB,OAAO,EAAE,EAAE;sFAAG,EAAE,eAAe;2EAArC,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;;0DAKvG,6LAAC;gDAAO,SAAS;gDAAkB,UAAU,CAAC,SAAS,WAAW;gDAAE,WAAU;;kEAC5E,6LAAC,6MAAI;wDAAC,MAAM;;;;;;oDAAK;;;;;;;;;;;;;kDAKvB,6LAAC;wCAAQ,WAAU;;0DACjB,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;;0EACC,6LAAC;gEAAG,WAAU;;kFAA8D,6LAAC,gNAAK;wEAAC,WAAU;wEAAkB,MAAM;;;;;;oEAAK;;;;;;;0EAC1H,6LAAC;gEAAK,WAAU;;oEAAkD,cAAc,MAAM;oEAAC;oEAAK,SAAS,MAAM;oEAAC;;;;;;;;;;;;;kEAE9G,6LAAC;wDAAI,WAAU;;0EACb,6LAAC,mNAAM;gEAAC,WAAU;gEAA+G,MAAM;;;;;;0EACvI,6LAAC;gEAAM,WAAU;gEAA4K,aAAY;gEAAqC,OAAO;gEAAY,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;;;;;;;0DAIlT,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC;oDAAM,WAAU;;sEACf,6LAAC;sEACC,cAAA,6LAAC;gEAAG,WAAU;;kFACZ,6LAAC;wEAAG,WAAU;kFAAM;;;;;;kFACpB,6LAAC;wEAAG,WAAU;kFAAM;;;;;;kFACpB,6LAAC;wEAAG,WAAU;kFAAM;;;;;;kFACpB,6LAAC;wEAAG,WAAU;kFAAM;;;;;;kFACpB,6LAAC;wEAAG,WAAU;kFAAiB;;;;;;;;;;;;;;;;;sEAGnC,6LAAC;4DAAM,WAAU;sEACd,cAAc,GAAG,CAAC,CAAA;oEAYsC;qFAXvD,6LAAC;oEAAc,WAAU;;sFACvB,6LAAC;4EAAG,WAAU;;8FACZ,6LAAC;oFAAE,WAAU;8FAA+C,EAAE,MAAM;;;;;;8FACpE,6LAAC;oFAAE,WAAU;8FAAuC,EAAE,KAAK;;;;;;;;;;;;sFAE7D,6LAAC;4EAAG,WAAU;sFACZ,cAAA,6LAAC;gFAAK,WAAW,AAAC,wDAAmJ,OAA5F,EAAE,IAAI,KAAK,aAAa,iCAAiC;0FAC/H,EAAE,IAAI;;;;;;;;;;;sFAGX,6LAAC;4EAAG,WAAU;sFACZ,cAAA,6LAAC;gFAAE,WAAU;0FAAsC,EAAA,qBAAA,aAAa,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,EAAE,WAAW,eAA7C,yCAAA,mBAAgD,MAAM,KAAI;;;;;;;;;;;sFAE/G,6LAAC;4EAAG,WAAU;sFACX,cAAA,6LAAC;gFAAI,WAAU;;kGACb,6LAAC,6NAAQ;wFAAC,MAAM;wFAAI,WAAU;;;;;;kGAC9B,6LAAC;wFAAK,WAAU;kGAA0C,EAAE,OAAO,IAAI;;;;;;;;;;;;;;;;;sFAG5E,6LAAC;4EAAG,WAAU;sFACZ,cAAA,6LAAC;gFAAI,WAAU;;kGACb,6LAAC;wFAAO,SAAS,IAAM,gBAAgB;wFAAI,WAAU;kGAA0F,cAAA,6LAAC,sNAAK;4FAAC,MAAM;;;;;;;;;;;kGAC5J,6LAAC;wFAAO,SAAS,IAAM,iBAAiB,EAAE,EAAE;wFAAG,WAAU;kGAAoG,cAAA,6LAAC,uNAAM;4FAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;mEAtBxK,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCrC;GA/hBwB;;QACI,oLAAc;;;KADlB","debugId":null}},
    {"offset": {"line": 6204, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/dashboard/DirectorView.tsx"],"sourcesContent":["\n'use client';\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { db, auth } from '@/firebase/config';\nimport { \n  collection, onSnapshot, query, where, orderBy, doc, getDoc, getDocs, updateDoc, serverTimestamp \n} from 'firebase/firestore';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { \n  Users, Tablet, Layout, Search, GraduationCap, Briefcase, Activity, User, X, FileText, Printer, \n  Globe, Eye, ShieldCheck, RefreshCw, Zap, Flame, AlertTriangle, Send, MessageSquare, Lock, ShieldAlert\n} from 'lucide-react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport { GlobalControls } from '@/components/admin/config/GlobalControls';\nimport { WebHistoryModal } from '@/components/admin/monitoring/WebHistoryModal';\n\nexport default function DirectorView() {\n  const [profesores, setProfesores] = useState<any[]>([]);\n  const [aulas, setAulas] = useState<any[]>([]);\n  const [dispositivos, setDispositivos] = useState<any[]>([]);\n  const [sesionesActivas, setSesionesActivas] = useState<any[]>([]);\n  const [nombreInstituto, setNombreInstituto] = useState('Cargando...');\n  const [nombreDirector, setNombreDirector] = useState('Cargando...');\n  const [showReport, setShowReport] = useState(false);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  \n  const [aulaSeleccionada, setAulaSeleccionada] = useState<any>(null);\n  const [alumnosAula, setAlumnosAula] = useState<any[]>([]);\n  const [lastPulse, setLastPulse] = useState<string>('');\n\n  const [messageModal, setMessageModal] = useState({ isOpen: false, tabletId: '', alumnoNombre: '', text: '' });\n  const [historyModal, setHistoryModal] = useState({ isOpen: false, tabletId: '', alumnoNombre: '' });\n  \n  // Usamos estrictamente \"InstitutoId\" como en tu DB\n  const getInstitutoId = () => {\n    if (typeof window !== 'undefined') {\n      return localStorage.getItem('InstitutoId') || '';\n    }\n    return '';\n  };\n\n  const workingInstitutoId = getInstitutoId();\n\n  const fetchMonitorDocente = useCallback(async () => {\n    if (!workingInstitutoId) return;\n    setIsRefreshing(true);\n    try {\n      const qSesiones = query(\n        collection(db, \"sesiones_monitoreo\"), \n        where(\"InstitutoId\", \"==\", workingInstitutoId),\n        where(\"role\", \"==\", \"profesor\")\n      );\n      const snapshot = await getDocs(qSesiones);\n      setSesionesActivas(snapshot.docs.map(d => ({ id: d.id, ...d.data() })));\n    } catch (err) {\n      console.error(\"Error en sesiones_monitoreo:\", err);\n    } finally {\n      setTimeout(() => setIsRefreshing(false), 1000);\n    }\n  }, [workingInstitutoId]);\n\n  useEffect(() => {\n    if (!workingInstitutoId) return;\n\n    // 1. Nombre de la Institución\n    const fetchNombreInst = async () => {\n      try {\n        const instRef = doc(db, \"institutions\", workingInstitutoId);\n        const instSnap = await getDoc(instRef);\n        if (instSnap.exists()) setNombreInstituto(instSnap.data().nombre || \"Sede EDU\");\n      } catch (err) { console.error(\"Error instituciones:\", err); }\n    };\n    fetchNombreInst();\n\n    // 2. Nombre del Director\n    const unsubAuth = onAuthStateChanged(auth, (user) => {\n      if (user?.email) {\n        const qDir = query(collection(db, \"usuarios\"), where(\"email\", \"==\", user.email.toLowerCase()));\n        onSnapshot(qDir, (snap) => {\n          if (!snap.empty) setNombreDirector(snap.docs[0].data().nombre || 'Director');\n        }, (err) => console.error(\"Error usuarios dir:\", err));\n      }\n    });\n\n    // 3. Profesores\n    const qProf = query(\n        collection(db, \"usuarios\"), \n        where(\"InstitutoId\", \"==\", workingInstitutoId), \n        where(\"role\", \"==\", \"profesor\")\n    );\n    const unsubProf = onSnapshot(qProf, (s) => {\n      setProfesores(s.docs.map(d => ({ id: d.id, ...d.data() })));\n    }, (err) => console.error(\"Error profesores:\", err));\n\n    // 4. Aulas (CORREGIDO: Apuntando a subcolección y usando campos existentes según imagen)\n    const qAulas = query(\n        collection(db, \"institutions\", workingInstitutoId, \"Aulas\"), \n        orderBy(\"aulaId\") \n    );\n    const unsubAulas = onSnapshot(qAulas, (s) => {\n      setAulas(s.docs.map(d => ({ id: d.id, ...d.data() })));\n    }, (err) => {\n        console.error(\"Error aulas:\", err);\n        // Fallback en caso de que el índice de orderBy tarde en propagarse\n        const qAulasSimple = query(collection(db, \"institutions\", workingInstitutoId, \"Aulas\"));\n        onSnapshot(qAulasSimple, (s) => {\n            setAulas(s.docs.map(d => ({ id: d.id, ...d.data() })));\n        });\n    });\n\n    // 5. Dispositivos\n    const qDev = query(\n        collection(db, \"dispositivos\"), \n        where(\"InstitutoId\", \"==\", workingInstitutoId)\n    );\n    const unsubDev = onSnapshot(qDev, (s) => {\n      setDispositivos(s.docs.map(d => ({ id: d.id, ...d.data() })));\n    }, (err) => console.error(\"Error dispositivos:\", err));\n\n    fetchMonitorDocente();\n\n    return () => { unsubAuth(); unsubProf(); unsubAulas(); unsubDev(); };\n  }, [workingInstitutoId, fetchMonitorDocente]);\n\n  // Supervisión táctica de aula\n  useEffect(() => {\n    if (!aulaSeleccionada || !workingInstitutoId) return;\n    const qSup = query(\n      collection(db, \"sesiones_monitoreo\"),\n      where(\"InstitutoId\", \"==\", workingInstitutoId),\n      where(\"aulaId\", \"==\", aulaSeleccionada.aulaId) // Usamos aulaId del documento\n    );\n    const unsubSup = onSnapshot(qSup, (s) => {\n      setAlumnosAula(s.docs.map(d => ({ id: d.id, ...d.data() })));\n      setLastPulse(new Date().toLocaleTimeString());\n    }, (err) => console.error(\"Error monitoreo aula:\", err));\n    return () => unsubSup();\n  }, [aulaSeleccionada, workingInstitutoId]);\n\n  const handleSendMessage = async () => {\n    if (!messageModal.tabletId || !messageModal.text.trim()) return;\n    try {\n      await updateDoc(doc(db, \"dispositivos\", messageModal.tabletId), {\n        pending_message: messageModal.text,\n        message_timestamp: serverTimestamp(),\n        message_sender: \"Dirección Institucional\"\n      });\n      setMessageModal({ ...messageModal, isOpen: false, text: '' });\n    } catch (e) { console.error(e); }\n  };\n\n  const exportToPDF = async () => {\n    const element = document.getElementById('report-content');\n    if (!element) return;\n    try {\n      const canvas = await html2canvas(element, { backgroundColor: '#0f1117', scale: 2 });\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const pdfWidth = pdf.internal.pageSize.getWidth();\n      const pdfHeight = (canvas.height * pdfWidth) / canvas.width;\n      pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);\n      pdf.save(`EDU_Reporte_${new Date().getTime()}.pdf`);\n    } catch (error) { console.error(error); }\n  };\n\n  const alerts = dispositivos.filter(t => t.last_url?.includes('block') || t.status === 'restricted');\n\n  if (!workingInstitutoId) return <div className=\"p-10 text-red-500 font-black italic uppercase\">Acceso Denegado. No se encontró InstitutoId.</div>;\n\n  return (\n    <div className=\"animate-in fade-in duration-500 p-4 lg:p-0 relative space-y-8\">\n      {/* HEADER */}\n      <header className=\"flex flex-col md:flex-row justify-between items-start md:items-end gap-6\">\n        <div>\n          <h2 className=\"text-[10px] font-black text-orange-500 uppercase tracking-[0.3em] mb-2 italic\">Director Management</h2>\n          <h1 className=\"text-4xl font-black text-white italic uppercase tracking-tighter leading-none mb-4\">{nombreInstituto}</h1>\n          <div className=\"flex items-center gap-3 bg-slate-900/50 p-2 pr-4 rounded-2xl border border-slate-800 w-fit\">\n            <div className=\"bg-orange-500/20 p-2 rounded-xl text-orange-500\"><User size={16} /></div>\n            <div className=\"flex flex-col\">\n              <span className=\"text-white text-[10px] font-bold uppercase leading-tight\">{nombreDirector}</span>\n              <span className=\"text-orange-500 text-[9px] font-black uppercase italic tracking-[0.15em] mt-0.5\">Director de Sede</span>\n            </div>\n          </div>\n        </div>\n        <button onClick={() => setShowReport(true)} className=\"bg-slate-800 hover:bg-slate-700 text-white px-6 py-3 rounded-xl text-[10px] font-black uppercase italic transition-all flex items-center gap-2 border border-slate-700 shadow-xl\">\n          <Activity size={14} className=\"text-orange-500\" /> Exportar Status\n        </button>\n      </header>\n\n      {/* SECCIÓN TÁCTICA */}\n      <div className=\"grid grid-cols-12 gap-8\">\n        <div className=\"col-span-12 lg:col-span-4 space-y-6\">\n            <div className=\"bg-[#0f1117] p-8 rounded-[2.5rem] border border-slate-800 shadow-2xl\">\n              <h2 className=\"text-xs font-black italic uppercase text-white mb-6 flex items-center gap-3\"><Lock className=\"text-orange-500 w-4 h-4\" /> Control Maestro</h2>\n              <div className=\"scale-90 origin-left\"><GlobalControls institutionId={workingInstitutoId} /></div>\n            </div>\n\n            <div className=\"bg-[#0f1117] p-8 rounded-[2.5rem] border border-slate-800 shadow-xl\">\n               <div className=\"flex justify-between items-center mb-6\">\n                  <h3 className=\"text-[10px] font-black uppercase text-slate-500 tracking-widest italic flex items-center gap-2\">\n                    <Flame size={14} className=\"text-orange-500\" /> Riesgos de Navegación\n                  </h3>\n               </div>\n               <div className=\"space-y-3\">\n                  {alerts.length > 0 ? alerts.slice(0, 4).map((alert, i) => (\n                    <div key={i} className=\"bg-red-500/5 p-4 rounded-2xl border border-red-500/10 group hover:border-red-500/30 transition-all\">\n                        <div className=\"flex justify-between items-start mb-2\">\n                            <p className=\"text-[9px] font-black text-white uppercase italic\">{alert.alumno_asignado || 'Estudiante'}</p>\n                            <AlertTriangle size={12} className=\"text-red-500 animate-pulse\" />\n                        </div>\n                        <div className=\"flex items-center justify-between\">\n                           <p className=\"text-[8px] font-bold text-slate-600 uppercase truncate max-w-[120px]\">{alert.last_url || 'BLOQUEADO'}</p>\n                           <div className=\"flex gap-2\">\n                             <button onClick={() => setHistoryModal({ isOpen: true, tabletId: alert.id, alumnoNombre: alert.alumno_asignado })} className=\"text-slate-500 hover:text-white\"><Globe size={12}/></button>\n                             <button onClick={() => setMessageModal({ isOpen: true, tabletId: alert.id, alumnoNombre: alert.alumno_asignado, text: '' })} className=\"text-[8px] font-black text-orange-500 uppercase hover:text-white\">Notificar</button>\n                           </div>\n                        </div>\n                    </div>\n                  )) : (\n                    <div className=\"text-center py-6 border border-dashed border-slate-800 rounded-3xl\">\n                        <ShieldCheck size={24} className=\"text-slate-800 mx-auto mb-2\" />\n                        <p className=\"text-[9px] font-black text-slate-600 uppercase italic\">Sin Infracciones</p>\n                    </div>\n                  )}\n               </div>\n            </div>\n        </div>\n\n        <div className=\"col-span-12 lg:col-span-8\">\n            <section className=\"bg-[#0f1117] border border-slate-800 rounded-[2.5rem] overflow-hidden shadow-2xl h-full\">\n                <div className=\"p-8 border-b border-slate-800 bg-black/40 flex justify-between items-center\">\n                <h3 className=\"text-xs font-black text-white uppercase italic flex items-center gap-2\">\n                    <Globe className=\"text-orange-500\" size={16} /> Monitor Docente\n                </h3>\n                <button \n                    onClick={fetchMonitorDocente}\n                    disabled={isRefreshing}\n                    className={`flex items-center gap-2 px-4 py-2 rounded-xl text-[9px] font-black uppercase italic transition-all ${isRefreshing ? 'bg-slate-800 text-slate-500' : 'bg-orange-500 text-white shadow-lg shadow-orange-500/20 hover:scale-105'}`}\n                >\n                    {isRefreshing ? <RefreshCw size={12} className=\"animate-spin\" /> : <Zap size={12} />}\n                    {isRefreshing ? 'Sincronizando...' : 'Sincronizar'}\n                </button>\n                </div>\n                <div className=\"p-6 grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {sesionesActivas.length > 0 ? sesionesActivas.map(sesion => (\n                    <div key={sesion.id} className=\"bg-slate-900/40 border border-slate-800/60 p-5 rounded-3xl group\">\n                    <div className=\"flex items-center gap-3 mb-3\">\n                        <div className=\"bg-blue-500/10 p-2 rounded-xl text-blue-500\"><Briefcase size={16} /></div>\n                        <div>\n                        <p className=\"text-[10px] font-black text-white uppercase italic\">{sesion.usuario}</p>\n                        <p className=\"text-[8px] text-slate-500 font-bold uppercase\">ID: {sesion.tabletId}</p>\n                        </div>\n                    </div>\n                    <div className=\"bg-black/40 p-3 rounded-2xl border border-slate-800/50\">\n                        <p className=\"text-[10px] text-blue-400 font-bold truncate lowercase\">{sesion.url_actual || 'efas-control.pro'}</p>\n                    </div>\n                    </div>\n                )) : (\n                    <div className=\"col-span-full flex flex-col items-center justify-center py-10 text-slate-600\">\n                    <RefreshCw size={24} className=\"mb-2 opacity-20\" />\n                    <p className=\"text-[9px] font-black uppercase italic\">Esperando actividad docente...</p>\n                    </div>\n                )}\n                </div>\n            </section>\n        </div>\n      </div>\n\n      {/* STATS RÁPIDOS */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"bg-[#0f1117] border border-slate-800 p-6 rounded-[2rem] flex items-center gap-5\">\n           <Briefcase className=\"text-blue-500\" size={24} />\n           <div><p className=\"text-[9px] font-black text-slate-500 uppercase italic\">Docentes</p><p className=\"text-2xl font-black text-white italic\">{profesores.length}</p></div>\n        </div>\n        <div className=\"bg-[#0f1117] border border-slate-800 p-6 rounded-[2rem] flex items-center gap-5\">\n           <Layout className=\"text-orange-500\" size={24} />\n           <div><p className=\"text-[9px] font-black text-slate-500 uppercase italic\">Aulas</p><p className=\"text-2xl font-black text-white italic\">{aulas.length}</p></div>\n        </div>\n        <div className=\"bg-[#0f1117] border border-slate-800 p-6 rounded-[2rem] flex items-center gap-5\">\n           <Tablet className=\"text-green-500\" size={24} />\n           <div><p className=\"text-[9px] font-black text-slate-500 uppercase italic\">Dispositivos</p><p className=\"text-2xl font-black text-white italic\">{dispositivos.length}</p></div>\n        </div>\n      </div>\n\n      {/* SUPERVISIÓN PERSONAL */}\n      <div className=\"grid grid-cols-12 gap-8\">\n        <div className=\"col-span-12 lg:col-span-8\">\n          <section className=\"bg-[#0f1117] border border-slate-800 rounded-[2.5rem] overflow-hidden shadow-2xl\">\n            <div className=\"p-8 border-b border-slate-800 flex justify-between items-center bg-black/20\">\n              <h3 className=\"text-xs font-black text-white uppercase italic flex items-center gap-2\">\n                <Users className=\"text-orange-500\" size={16} /> Supervisión de Personal\n              </h3>\n            </div>\n            <div className=\"p-4 overflow-x-auto\">\n              <table className=\"w-full text-left\">\n                <thead>\n                  <tr className=\"text-[9px] font-black text-slate-600 uppercase italic\">\n                    <th className=\"p-4\">Nombre / Email</th>\n                    <th className=\"p-4\">Terminal ID</th>\n                    <th className=\"p-4\">Estado</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-slate-800/50\">\n                  {profesores.map(p => (\n                    <tr key={p.id} className=\"hover:bg-white/[0.03] text-[10px]\">\n                      <td className=\"p-4\">\n                        <p className=\"text-white font-bold uppercase\">{p.nombre || 'Sin nombre'}</p>\n                        <p className=\"text-slate-500\">{p.email}</p>\n                      </td>\n                      <td className=\"p-4 font-black uppercase italic text-blue-500\">{p.tabletId || '---'}</td>\n                      <td className=\"p-4\">\n                        <span className=\"bg-green-500/10 text-green-500 border border-green-500/20 px-2 py-1 rounded-lg text-[8px] font-black uppercase italic\">Adscrito</span>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </section>\n        </div>\n        <div className=\"col-span-12 lg:col-span-4\">\n           <section className=\"bg-[#0f1117] border border-slate-800 rounded-[2.5rem] p-8 shadow-2xl\">\n              <div className=\"flex items-center gap-2 mb-6\">\n                <ShieldCheck className=\"text-orange-500\" size={18} />\n                <h3 className=\"text-xs font-black text-white uppercase italic\">Supervisión de Aulas</h3>\n              </div>\n              <div className=\"space-y-3\">\n                {aulas.map(a => (\n                  <button \n                    key={a.id} \n                    onClick={() => setAulaSeleccionada(a)}\n                    className=\"w-full bg-slate-900/30 border border-slate-800 p-4 rounded-2xl flex justify-between items-center border-l-4 border-l-orange-500 hover:bg-orange-500/5 transition-all group\"\n                  >\n                    <div className=\"text-left\">\n                      <p className=\"text-white font-black text-[11px] uppercase italic group-hover:text-orange-500 transition-colors\">\n                        {a.aulaId}\n                      </p>\n                      <p className=\"text-[9px] text-slate-500 font-bold uppercase italic\">Sección: {a.seccion}</p>\n                    </div>\n                    <Eye size={16} className=\"text-slate-700 group-hover:text-orange-500 transition-colors\" />\n                  </button>\n                ))}\n              </div>\n           </section>\n        </div>\n      </div>\n\n      {/* MODAL SUPERVISIÓN LIVE AULA */}\n      {aulaSeleccionada && (\n        <div className=\"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/95 backdrop-blur-xl\">\n          <div className=\"bg-[#0f1117] border border-slate-800 w-full max-w-4xl rounded-[2.5rem] overflow-hidden shadow-2xl flex flex-col max-h-[90vh]\">\n            <div className=\"p-8 border-b border-slate-800 flex justify-between items-center bg-black/40 text-white\">\n              <div className=\"flex items-center gap-4\">\n                <div className=\"bg-orange-500 p-3 rounded-2xl animate-pulse shadow-lg shadow-orange-500/20\"><Layout size={24} /></div>\n                <div>\n                  <h3 className=\"font-black italic uppercase text-lg\">{aulaSeleccionada.aulaId} - {aulaSeleccionada.seccion}</h3>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-[10px] text-orange-500 font-black uppercase italic tracking-widest\">Monitoreo Live</span>\n                    <span className=\"text-[8px] text-slate-500 font-bold uppercase\">Último Pulso: {lastPulse}</span>\n                  </div>\n                </div>\n              </div>\n              <button onClick={() => setAulaSeleccionada(null)} className=\"hover:bg-red-500 p-2 rounded-full transition-colors\"><X size={24} /></button>\n            </div>\n            <div className=\"p-8 overflow-y-auto grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {alumnosAula.length > 0 ? alumnosAula.map(al => (\n                <div key={al.id} className=\"bg-slate-900/50 border border-slate-800 p-4 rounded-3xl border-l-4 border-l-blue-500\">\n                  <div className=\"flex justify-between items-center mb-2\">\n                    <span className=\"text-white font-bold text-xs uppercase\">{al.usuario}</span>\n                    <span className=\"text-[9px] text-slate-600 font-black italic\">TABLET: {al.tabletId}</span>\n                  </div>\n                  <div className=\"bg-black/40 p-3 rounded-xl border border-slate-800/50\">\n                    <p className=\"text-[10px] text-blue-400 font-medium truncate\">{al.url_actual || 'Pestaña del Sistema'}</p>\n                  </div>\n                </div>\n              )) : (\n                <div className=\"col-span-full py-20 text-center text-slate-500 font-black uppercase italic text-xs\">Sin tráfico detectado en este aula</div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* MODAL REPORTE */}\n      {showReport && (\n        <div className=\"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm\">\n          <div className=\"bg-[#0f1117] border border-slate-800 w-full max-w-md rounded-[2.5rem] overflow-hidden shadow-2xl\">\n            <div id=\"report-content\" className=\"p-8 space-y-6 bg-[#0f1117]\">\n                <div className=\"flex justify-between items-center border-b border-slate-800 pb-4\">\n                   <h3 className=\"text-white font-black italic uppercase text-lg tracking-tighter\">Status Report</h3>\n                   <button onClick={() => setShowReport(false)} className=\"text-slate-500 hover:text-white\"><X size={20} /></button>\n                </div>\n                <div className=\"space-y-4\">\n                   <div className=\"flex justify-between border-b border-slate-800/50 pb-2 text-[10px] font-black uppercase italic\">\n                     <span className=\"text-slate-500\">Director</span>\n                     <span className=\"text-white\">{nombreDirector}</span>\n                   </div>\n                   <div className=\"flex justify-between border-b border-slate-800/50 pb-2 text-[10px] font-black uppercase italic\">\n                     <span className=\"text-slate-500\">Sede</span>\n                     <span className=\"text-white\">{nombreInstituto}</span>\n                   </div>\n                </div>\n            </div>\n            <div className=\"p-8 pt-0 grid grid-cols-2 gap-3\">\n              <button onClick={() => window.print()} className=\"bg-slate-800 text-white font-black uppercase italic text-[10px] py-4 rounded-2xl flex items-center justify-center gap-2\">\n                <Printer size={14} /> Imprimir\n              </button>\n              <button onClick={exportToPDF} className=\"bg-orange-500 text-white font-black uppercase italic text-[10px] py-4 rounded-2xl flex items-center justify-center gap-2\">\n                <FileText size={14} /> PDF\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* MODAL MENSAJERÍA */}\n      {messageModal.isOpen && (\n        <div className=\"fixed inset-0 bg-black/95 backdrop-blur-md z-[200] flex items-center justify-center p-4\">\n          <div className=\"bg-[#0f1117] border border-slate-800 rounded-[2.5rem] p-10 w-full max-w-md shadow-2xl\">\n            <h2 className=\"text-xl font-black italic uppercase text-white tracking-tighter mb-4 flex items-center gap-2\">\n                <ShieldAlert className=\"text-blue-500\" size={20} /> Aviso de <span className=\"text-blue-500\">Dirección</span>\n            </h2>\n            <textarea \n              placeholder=\"ESCRIBA EL COMUNICADO...\" \n              className=\"w-full bg-slate-900 border border-slate-800 p-5 rounded-2xl text-white font-bold text-xs uppercase min-h-[140px] outline-none focus:border-blue-500 mb-6\" \n              value={messageModal.text} \n              onChange={(e) => setMessageModal({...messageModal, text: e.target.value})} \n            />\n            <div className=\"flex gap-2\">\n               <button onClick={handleSendMessage} className=\"flex-1 bg-blue-600 p-5 rounded-xl font-black uppercase text-white text-xs\">Enviar Alerta</button>\n               <button onClick={() => setMessageModal({...messageModal, isOpen: false})} className=\"p-5 text-[9px] font-black uppercase text-slate-600\">Cerrar</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <WebHistoryModal \n        isOpen={historyModal.isOpen} \n        onClose={() => setHistoryModal({ ...historyModal, isOpen: false })} \n        tabletId={historyModal.tabletId} \n        alumnoNombre={historyModal.alumnoNombre} \n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7824, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QAGjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 7949, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,KAA4C;QAA5C,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB,GAA5C;IACb,qBACE,6LAAC;QAAI,WAAW,IAAA,4HAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS","debugId":null}},
    {"offset": {"line": 7998, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/sheet.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,QAAQ,6KAAmB;AAEjC,MAAM,eAAe,gLAAsB;AAE3C,MAAM,aAAa,8KAAoB;AAEvC,MAAM,cAAc,+KAAqB;AAEzC,MAAM,6BAAe,2KAAgB,CAGnC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,gLAAsB;QACrB,WAAW,IAAA,4HAAE,EACX,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;;KAVH;AAaN,aAAa,WAAW,GAAG,gLAAsB,CAAC,WAAW;AAE7D,MAAM,gBAAgB,IAAA,0KAAG,EACvB,oMACA;IACE,UAAU;QACR,MAAM;YACJ,KAAK;YACL,QACE;YACF,MAAM;YACN,OACE;QACJ;IACF;IACA,iBAAiB;QACf,MAAM;IACR;AACF;AAOF,MAAM,6BAAe,2KAAgB,OAGnC,QAAoD;QAAnD,EAAE,OAAO,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;yBAClD,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,gLAAsB;gBACrB,KAAK;gBACL,WAAW,IAAA,4HAAE,EAAC,cAAc;oBAAE;gBAAK,IAAI;gBACtC,GAAG,KAAK;;oBAER;kCACD,6LAAC,8KAAoB;wBAAC,WAAU;;0CAC9B,6LAAC,oMAAC;gCAAC,WAAU;;;;;;0CACb,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,aAAa,WAAW,GAAG,gLAAsB,CAAC,WAAW;AAE7D,MAAM,cAAc;QAAC,EACnB,SAAS,EACT,GAAG,OACkC;yBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;;MATP;AAYN,YAAY,WAAW,GAAG;AAE1B,MAAM,cAAc;QAAC,EACnB,SAAS,EACT,GAAG,OACkC;yBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;;MATP;AAYN,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,OAGjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,8KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,yCAAyC;QACtD,GAAG,KAAK;;;;;;;;AAGb,WAAW,WAAW,GAAG,8KAAoB,CAAC,WAAW;AAEzD,MAAM,iCAAmB,2KAAgB,OAGvC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,oLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;;AAGb,iBAAiB,WAAW,GAAG,oLAA0B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 8192, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/dashboard/ProfesorView.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { db } from '@/firebase/config';\nimport { collection, query, where, onSnapshot, orderBy, limit, doc, updateDoc } from 'firebase/firestore';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { \n  Monitor, Clock, Globe, ShieldAlert, ShieldOff, ShieldCheck \n} from 'lucide-react';\nimport {\n  Sheet,\n  SheetContent,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\";\n\n// Definición de Props para eliminar el error en page.tsx\ninterface ProfesorViewProps {\n  professorId: string;\n  institutoId: string;\n}\n\ninterface Estudiante {\n  id: string;\n  nombre: string;\n  deviceId: string;\n  seccion: string;\n  aulaId: string;\n  bloqueado?: boolean;\n}\n\ninterface Actividad {\n  url: string;\n  titulo: string;\n  timestamp: any;\n}\n\nexport default function ProfesorView({ professorId, institutoId }: ProfesorViewProps) {\n  const [estudiantes, setEstudiantes] = useState<Estudiante[]>([]);\n  const [selectedAlumno, setSelectedAlumno] = useState<Estudiante | null>(null);\n  const [historial, setHistorial] = useState<Actividad[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  // Configuración de branding dinámico\n  const profesorAula = \"LABORATORIO\"; \n  const institutoNombre = `SEDE: ${institutoId}`;\n\n  useEffect(() => {\n    // Consulta filtrada por el InstitutoId recibido por props\n    const q = query(\n      collection(db, \"usuarios\"),\n      where(\"InstitutoId\", \"==\", institutoId),\n      where(\"aulaId\", \"==\", profesorAula),\n      where(\"role\", \"==\", \"estudiante\")\n    );\n\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const docs: Estudiante[] = [];\n      snapshot.forEach((doc) => {\n        docs.push({ id: doc.id, ...doc.data() } as Estudiante);\n      });\n      setEstudiantes(docs);\n      setLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, [institutoId, profesorAula]);\n\n  useEffect(() => {\n    if (!selectedAlumno) return;\n    const qActividad = query(\n      collection(db, \"sesiones_monitoreo\"),\n      where(\"deviceId\", \"==\", selectedAlumno.deviceId),\n      orderBy(\"timestamp\", \"desc\"),\n      limit(10)\n    );\n    const unsubscribeActividad = onSnapshot(qActividad, (snapshot) => {\n      const logs: Actividad[] = [];\n      snapshot.forEach((doc) => logs.push(doc.data() as Actividad));\n      setHistorial(logs);\n    });\n    return () => unsubscribeActividad();\n  }, [selectedAlumno]);\n\n  const toggleBloqueo = async (alumno: Estudiante) => {\n    try {\n      const alumnoRef = doc(db, \"usuarios\", alumno.id);\n      await updateDoc(alumnoRef, {\n        bloqueado: !alumno.bloqueado\n      });\n      if (selectedAlumno?.id === alumno.id) {\n        setSelectedAlumno({ ...alumno, bloqueado: !alumno.bloqueado });\n      }\n    } catch (error) {\n      console.error(\"Error al cambiar estado de bloqueo:\", error);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center p-20\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-t-2 border-[#f97316]\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 space-y-6 bg-[#0f1117] min-h-screen text-slate-200 font-sans\">\n      {/* HEADER ACTUALIZADO A EDUControlPro */}\n      <div className=\"flex justify-between items-center border-b border-slate-800 pb-6\">\n        <div>\n          <h1 className=\"text-3xl font-black uppercase italic tracking-tighter text-white\">\n            EDU<span className=\"text-[#f97316]\">ControlPro</span>\n          </h1>\n          <p className=\"text-[#f97316] text-[10px] font-bold uppercase tracking-widest mt-1\">\n            {institutoNombre} | AULA: {profesorAula} | PROFESOR: {professorId.substring(0,5)}\n          </p>\n        </div>\n        <Badge className=\"bg-slate-800 text-slate-400 border-slate-700 px-4 py-1\">\n          {estudiantes.length} ALUMNOS ACTIVOS\n        </Badge>\n      </div>\n\n      {/* GRID DE ALUMNOS */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n        {estudiantes.map((estudiante) => (\n          <Card key={estudiante.id} className={`bg-slate-900 border-2 transition-all ${estudiante.bloqueado ? 'border-red-500/50 shadow-[0_0_15px_rgba(239,68,68,0.1)]' : 'border-slate-800 hover:border-[#f97316]'}`}>\n            <CardHeader className=\"pb-2\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-[10px] font-black text-slate-500 uppercase\">{estudiante.seccion}</span>\n                <div className={`h-2.5 w-2.5 rounded-full ${estudiante.bloqueado ? 'bg-red-500 shadow-[0_0_8px_#ef4444]' : 'bg-green-500 shadow-[0_0_8px_#22c55e]'}`} />\n              </div>\n              <CardTitle className=\"text-sm font-black text-white uppercase mt-2\">{estudiante.nombre}</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2\">\n              <button \n                onClick={() => setSelectedAlumno(estudiante)}\n                className=\"w-full py-2.5 bg-slate-800 hover:bg-white hover:text-black text-white text-[10px] font-black uppercase italic rounded-xl transition-all flex items-center justify-center gap-2\"\n              >\n                <Monitor size={14} />\n                MONITOREAR\n              </button>\n              <button \n                onClick={() => toggleBloqueo(estudiante)}\n                className={`w-full py-2.5 text-[10px] font-black uppercase italic rounded-xl transition-all flex items-center justify-center gap-2 border-2 ${estudiante.bloqueado ? 'bg-red-500 text-white border-red-500' : 'border-red-500/20 text-red-500 hover:bg-red-500 hover:text-white'}`}\n              >\n                {estudiante.bloqueado ? <ShieldOff size={14} /> : <ShieldAlert size={14} />}\n                {estudiante.bloqueado ? 'DESBLOQUEAR NAV.' : 'BLOQUEAR NAV.'}\n              </button>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {/* MODAL DE MONITOREO */}\n      <Sheet open={!!selectedAlumno} onOpenChange={() => setSelectedAlumno(null)}>\n        <SheetContent side=\"right\" className=\"w-full sm:max-w-md bg-[#0f1117] border-slate-800 text-white p-0\">\n          <SheetHeader className=\"p-6 border-b border-slate-800 bg-slate-900/50\">\n            <SheetTitle className=\"text-[#f97316] font-black uppercase italic\">VISTA EN VIVO</SheetTitle>\n            <div className=\"mt-2\">\n              <p className=\"text-xl font-black uppercase\">{selectedAlumno?.nombre}</p>\n              <p className=\"text-[10px] text-slate-500 font-bold uppercase tracking-widest\">DEVICE: {selectedAlumno?.deviceId}</p>\n            </div>\n          </SheetHeader>\n\n          <div className=\"p-6 space-y-6\">\n            <div className={`flex items-center gap-2 ${selectedAlumno?.bloqueado ? 'text-red-500' : 'text-green-500'}`}>\n              <ShieldCheck size={16} />\n              <span className=\"text-[10px] font-black uppercase tracking-widest\">\n                {selectedAlumno?.bloqueado ? 'MODO RESTRICCIÓN ACTIVO' : 'NAVEGACIÓN SUPERVISADA'}\n              </span>\n            </div>\n\n            <div className=\"space-y-4\">\n              <h3 className=\"text-[10px] font-black uppercase text-slate-500 tracking-widest flex items-center gap-2\">\n                <Clock size={12} /> HISTORIAL DE ACTIVIDAD\n              </h3>\n              \n              <div className=\"space-y-3\">\n                {historial.length > 0 ? (\n                  historial.map((log, i) => (\n                    <div key={i} className=\"p-4 bg-slate-900/80 border border-slate-800 rounded-2xl flex items-start gap-3\">\n                      <div className=\"p-2 bg-[#f97316]/10 rounded-lg\">\n                        <Globe size={16} className=\"text-[#f97316]\" />\n                      </div>\n                      <div className=\"flex-1 overflow-hidden\">\n                        <p className=\"text-[11px] font-black uppercase text-white truncate\">{log.titulo || 'Sitio Web'}</p>\n                        <p className=\"text-[9px] text-slate-500 font-bold truncate lowercase italic\">{log.url}</p>\n                      </div>\n                    </div>\n                  ))\n                ) : (\n                  <div className=\"py-10 text-center border-2 border-dashed border-slate-800 rounded-[2rem]\">\n                    <p className=\"text-[10px] font-black uppercase text-slate-600 tracking-tighter\">SIN REGISTROS EN ESTA SESIÓN</p>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <button \n              onClick={() => selectedAlumno && toggleBloqueo(selectedAlumno)}\n              className={`w-full py-4 text-[11px] font-black uppercase italic rounded-2xl transition-all border-2 ${selectedAlumno?.bloqueado ? 'bg-green-500 border-green-500 text-white' : 'border-red-500 text-red-500 hover:bg-red-500 hover:text-white'}`}\n            >\n              {selectedAlumno?.bloqueado ? 'DESBLOQUEAR ACCESO' : 'BLOQUEAR ACCESO INMEDIATO'}\n            </button>\n          </div>\n        </SheetContent>\n      </Sheet>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8699, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/hooks/use-auth.ts"],"sourcesContent":["'use client';\nimport { useState, useEffect } from 'react';\nimport { auth, db } from '@/firebase/config';\nimport { onAuthStateChanged, User } from 'firebase/auth';\nimport { doc, getDoc } from 'firebase/firestore';\n\nexport const useAuth = () => {\n  const [user, setUser] = useState<User | null>(null);\n  const [userData, setUserData] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\n      if (firebaseUser) {\n        setUser(firebaseUser);\n        // Intentar obtener datos extra del usuario (como su rol e InstitutoId)\n        const docRef = doc(db, \"users\", firebaseUser.uid);\n        const docSnap = await getDoc(docRef);\n        if (docSnap.exists()) {\n          setUserData(docSnap.data());\n        }\n      } else {\n        setUser(null);\n        setUserData(null);\n      }\n      setLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  return { user, userData, loading, isSuperAdmin: user?.email === 'vallecondo@gmail.com' };\n};\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAAA;AACA;AAAA;;AAJA;;;;;AAMO,MAAM,UAAU;;IACrB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAc;IAC9C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAM;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;6BAAC;YACR,MAAM,cAAc,IAAA,mNAAkB,EAAC,oIAAI;iDAAE,OAAO;oBAClD,IAAI,cAAc;wBAChB,QAAQ;wBACR,uEAAuE;wBACvE,MAAM,SAAS,IAAA,6KAAG,EAAC,kIAAE,EAAE,SAAS,aAAa,GAAG;wBAChD,MAAM,UAAU,MAAM,IAAA,gLAAM,EAAC;wBAC7B,IAAI,QAAQ,MAAM,IAAI;4BACpB,YAAY,QAAQ,IAAI;wBAC1B;oBACF,OAAO;wBACL,QAAQ;wBACR,YAAY;oBACd;oBACA,WAAW;gBACb;;YAEA;qCAAO,IAAM;;QACf;4BAAG,EAAE;IAEL,OAAO;QAAE;QAAM;QAAU;QAAS,cAAc,CAAA,iBAAA,2BAAA,KAAM,KAAK,MAAK;IAAuB;AACzF;GA1Ba","debugId":null}},
    {"offset": {"line": 8759, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28admin%29/dashboard/page.tsx"],"sourcesContent":["'use client';\nimport { useEffect, useState } from 'react';\nimport { useInstitution } from '@/app/(admin)/dashboard/institution-context';\nimport InstitutionView from '@/components/dashboard/InstitutionView';\nimport SuperAdminView from '@/components/dashboard/SuperAdminView';\nimport DirectorView from '@/components/dashboard/DirectorView';\nimport ProfesorView from '@/components/dashboard/ProfesorView';\nimport { useAuth } from '@/hooks/use-auth';\n\nexport default function DashboardPage() {\n  const { institutionId } = useInstitution();\n  const { user, userData } = useAuth();\n  const [role, setRole] = useState<string | null>(null);\n  const [isMounted, setIsMounted] = useState(false);\n\n  useEffect(() => {\n    const savedRole = localStorage.getItem('userRole');\n    setRole(savedRole);\n    setIsMounted(true);\n  }, []);\n\n  if (!isMounted) {\n    return (\n      <div className=\"min-h-screen bg-[#0a0c10] flex items-center justify-center\">\n        <div className=\"w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full animate-spin\"></div>\n      </div>\n    );\n  }\n\n  // 1. LÓGICA SUPER ADMIN\n  if (role === 'super-admin') {\n    if (institutionId) return <main><InstitutionView /></main>;\n    return <main><SuperAdminView /></main>;\n  }\n\n  // 2. LÓGICA DIRECTOR\n  if (role === 'director') return <main><DirectorView /></main>;\n\n  // 3. LÓGICA PROFESOR (Nueva)\n  if (role === 'profesor') {\n    return (\n      <main>\n        <ProfesorView \n          professorId={user?.uid || ''} \n          institutoId={userData?.InstitutoId || 'default'} \n        />\n      </main>\n    );\n  }\n\n  // Fallback de seguridad por defecto\n  return <main><InstitutionView /></main>;\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;;AASe,SAAS;;IACtB,MAAM,EAAE,aAAa,EAAE,GAAG,IAAA,oLAAc;IACxC,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,IAAA,yIAAO;IAClC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAgB;IAChD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,IAAA,0KAAS;mCAAC;YACR,MAAM,YAAY,aAAa,OAAO,CAAC;YACvC,QAAQ;YACR,aAAa;QACf;kCAAG,EAAE;IAEL,IAAI,CAAC,WAAW;QACd,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,wBAAwB;IACxB,IAAI,SAAS,eAAe;QAC1B,IAAI,eAAe,qBAAO,6LAAC;sBAAK,cAAA,6LAAC,gKAAe;;;;;;;;;;QAChD,qBAAO,6LAAC;sBAAK,cAAA,6LAAC,+JAAc;;;;;;;;;;IAC9B;IAEA,qBAAqB;IACrB,IAAI,SAAS,YAAY,qBAAO,6LAAC;kBAAK,cAAA,6LAAC,6JAAY;;;;;;;;;;IAEnD,6BAA6B;IAC7B,IAAI,SAAS,YAAY;QACvB,qBACE,6LAAC;sBACC,cAAA,6LAAC,6JAAY;gBACX,aAAa,CAAA,iBAAA,2BAAA,KAAM,GAAG,KAAI;gBAC1B,aAAa,CAAA,qBAAA,+BAAA,SAAU,WAAW,KAAI;;;;;;;;;;;IAI9C;IAEA,oCAAoC;IACpC,qBAAO,6LAAC;kBAAK,cAAA,6LAAC,gKAAe;;;;;;;;;;AAC/B;GA3CwB;;QACI,oLAAc;QACb,yIAAO;;;KAFZ","debugId":null}}]
}