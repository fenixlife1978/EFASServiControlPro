(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[290],{3998:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var s=r(95155),a=r(12115),n=r(17129),i=r(83101),o=r(64269);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:l=!1,...c}=e,u=l?n.DX:"button";return(0,s.jsx)(u,{className:(0,o.cn)(d({variant:a,size:i,className:r})),ref:t,...c})});l.displayName="Button"},7545:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]])},18332:(e,t,r)=>{"use strict";r.d(t,{Fc:()=>d,TN:()=>c,XL:()=>l});var s=r(95155),a=r(12115),n=r(83101),i=r(64269);let o=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,...n}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(o({variant:a}),r),...n})});d.displayName="Alert";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})});l.displayName="AlertTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...a})});c.displayName="AlertDescription"},20063:(e,t,r)=>{"use strict";var s=r(47260);r.o(s,"redirect")&&r.d(t,{redirect:function(){return s.redirect}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},44297:(e,t,r)=>{"use strict";r.d(t,{C:()=>h,w:()=>v});var s=r(95155),a=r(12115),n=r(20063),i=r(63862),o=r(19708),d=r(92033),l=r(7545),c=r(18332),u=r(52619),f=r.n(u),m=r(3998);let g=(0,a.createContext)(void 0),h=e=>{let{children:t}=e,[r,u]=(0,a.useState)(null),[h,v]=(0,a.useState)(null),[x,p]=(0,a.useState)(!0),[b,y]=(0,a.useState)(null),w=(0,n.useSearchParams)(),{user:j,loading:I}=(0,i.Jd)();return((0,a.useEffect)(()=>{(async()=>{if(I||!i.db)return;if(p(!0),y(null),!j)return p(!1);let e=w.get("institutionId"),t=localStorage.getItem("selectedInstitutionId"),r="vallecondo@gmail.com"===j.email;try{let s=e||t;if(!r&&!s){let e=await (0,o.x7)((0,o.H9)(i.db,"users",j.uid));if(e.exists()&&e.data().institutionId)s=e.data().institutionId;else{y("Tu cuenta no est\xe1 asociada a ninguna instituci\xf3n."),p(!1);return}}if(!s){y(r?"Por favor, selecciona una instituci\xf3n desde el Panel Maestro.":"No se pudo determinar la instituci\xf3n."),p(!1);return}let a=(0,o.H9)(i.db,"institutions",s),n=await (0,o.x7)(a),d=null;if(n.exists())d=n.data();else{let e=(0,o.P)((0,o.rJ)(i.db,"institutions"),(0,o._M)("InstitutoId","==",s)),t=await (0,o.GG)(e);t.empty||(d=t.docs[0].data())}d?"published"===d.status||r?(u(s),v(d)):y("Esta instituci\xf3n no se encuentra publicada actualmente."):y('Error: La instituci\xf3n "'.concat(s,'" no existe en EFAS Cloud.'))}catch(e){console.error("Error en InstitutionProvider:",e),y("Error de conexi\xf3n con la base de datos.")}finally{p(!1)}})()},[w,j,I]),x||I)?(0,s.jsxs)("div",{className:"flex h-screen w-full flex-col items-center justify-center bg-slate-950 text-white",children:[(0,s.jsx)(d.A,{className:"h-10 w-10 animate-spin text-orange-600"}),(0,s.jsx)("p",{className:"mt-4 text-slate-400 font-bold tracking-widest uppercase italic",children:"EFAS ServiControlPro"})]}):b?(0,s.jsx)("div",{className:"flex h-screen w-full items-center justify-center bg-[#0a0c10] p-6",children:(0,s.jsxs)(c.Fc,{variant:"destructive",className:"max-w-md bg-slate-900 border-red-900/50 rounded-2xl p-8",children:[(0,s.jsx)(l.A,{className:"h-5 w-5 text-red-500 mb-2"}),(0,s.jsx)(c.XL,{className:"text-red-500 font-black uppercase tracking-tighter text-xl italic",children:"Acceso Denegado"}),(0,s.jsxs)(c.TN,{className:"text-slate-300 font-medium",children:[(0,s.jsx)("p",{className:"mt-2",children:b}),(null==j?void 0:j.email)==="vallecondo@gmail.com"&&(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)(m.$,{asChild:!0,className:"bg-orange-600 hover:bg-orange-700 w-full font-black italic uppercase py-6 rounded-xl shadow-lg shadow-orange-900/20",children:(0,s.jsx)(f(),{href:"/super-admin/dashboard",children:"Ir al Panel Maestro"})})})]})]})}):(0,s.jsx)(g.Provider,{value:{institutionId:r,institutionData:h,setInstitutionId:e=>{e?localStorage.setItem("selectedInstitutionId",e):localStorage.removeItem("selectedInstitutionId"),u(e)}},children:t})},v=()=>{let e=(0,a.useContext)(g);if(void 0===e)throw Error("useInstitution debe usarse dentro de un InstitutionProvider");return e}},45300:(e,t,r)=>{"use strict";r.d(t,{db:()=>l,j2:()=>d});var s=r(52078),a=r(59253),n=r(19708),i=r(58134);r(13328),r(34491);let o=(0,s.Dk)().length>0?(0,s.Sx)():(0,s.Wp)({apiKey:"AIzaSyACK79dDRclgjFMEUokqpskC1ezyvmO11k",authDomain:"studio-7637044995-2342d.firebaseapp.com",projectId:"studio-7637044995-2342d",storageBucket:"studio-7637044995-2342d.firebasestorage.app",messagingSenderId:"7637044995",appId:"1:7637044995:web:2c6b412952864386927958"}),d=(0,a.xI)(o),l=(0,n.aU)(o);(0,i.c7)(o)},53377:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(95155),a=r(12115),n=r(52619),i=r.n(n),o=r(44297);function d(){let{institutionId:e}=(0,o.w)();return(0,s.jsxs)("div",{className:"p-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-black italic uppercase text-slate-800",children:"Aulas - EFAS ServControlPro"}),(0,s.jsxs)("p",{className:"text-orange-500 font-bold mb-6",children:["Instituci\xf3n: ",e||"Cargando..."]}),(0,s.jsx)("div",{className:"bg-white border-2 border-slate-100 p-6 rounded-3xl shadow-sm",children:(0,s.jsx)(i(),{href:"/dashboard/classrooms/test-aula/",className:"bg-slate-800 text-white px-6 py-3 rounded-xl font-bold uppercase text-sm",children:"Ver Detalle de Aula"})})]})}function l(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"p-8",children:"Cargando aplicaci\xf3n..."}),children:(0,s.jsx)(o.C,{children:(0,s.jsx)(d,{})})})}},63862:(e,t,r)=>{"use strict";r.d(t,{As:()=>c,BH:()=>g,Ge:()=>m,Jd:()=>l,db:()=>s.db,jt:()=>u,pt:()=>h,ri:()=>d,uN:()=>f,zb:()=>v});var s=r(45300),a=r(13328),n=r(34491),i=r(19708),o=r(59253);let d=async()=>{try{await (0,o.CI)(s.j2),localStorage.removeItem("selectedInstitutionId"),window.location.href="/login"}catch(e){console.error("Error al cerrar sesi\xf3n:",e)}},l=()=>{let[e,t,r]=(0,a.hD)(s.j2);return{user:e,loading:t,error:r}},c=()=>{let[e,t,r]=(0,a.hD)(s.j2);return{user:e,loading:t,error:r,auth:s.j2}},u=()=>s.db,f=n.ZY,m=e=>{if("string"==typeof e&&(!e||e.includes("undefined")||e.includes("null")))return{value:[],loading:!1,error:Error("Ruta de colecci\xf3n inv\xe1lida")};let t="string"==typeof e?(0,i.rJ)(s.db,e):e,[r,a,o]=(0,n.Ar)(t,{idField:"id"});return{value:r||[],loading:a,error:o}},g=async(e,t)=>{try{if(!e||"string"!=typeof e||e.includes("undefined")||e.includes("null"))return console.error("Path inv\xe1lido detectado:",e),{success:!1,error:"Ruta de base de datos no v\xe1lida"};let r=await (0,i.gS)((0,i.rJ)(s.db,e),{...t,createdAt:(0,i.O5)(),updatedAt:(0,i.O5)()});return{success:!0,id:r.id}}catch(e){return console.error("Error addDocument:",e),{success:!1,error:e.message}}},h=async(e,t,r)=>{try{if(!e||!t)throw Error("Colecci\xf3n o ID faltante");return await (0,i.mZ)((0,i.H9)(s.db,e,t),{...r,updatedAt:(0,i.O5)()}),{success:!0}}catch(e){return console.error("Error updateDocument:",e),{success:!1,error:e.message}}},v=async(e,t)=>{try{if(!e||!t)throw Error("Colecci\xf3n o ID faltante");return await (0,i.kd)((0,i.H9)(s.db,e,t)),{success:!0}}catch(e){return console.error("Error deleteDocument:",e),{success:!1,error:e.message}}}},64269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(2821),a=r(75889);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},92033:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},99413:(e,t,r)=>{Promise.resolve().then(r.bind(r,53377))}},e=>{e.O(0,[992,644,909,982,15,441,255,358],()=>e(e.s=99413)),_N_E=e.O()}]);